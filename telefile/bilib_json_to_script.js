/**
 * Created by qw4wer on 2016/1/29.
 */
{
    "version"
:
    3, "sources"
:
    ["/Users/Felix/Bilibili/Repo/live-app-web/frontend/node_modules/gulp-browserify/node_modules/browserify/node_modules/browser-pack/_prelude.js", "/Users/Felix/Bilibili/Repo/live-app-web/frontend/common/app-config/app-config.js", "/Users/Felix/Bilibili/Repo/live-app-web/frontend/common/app-config/avalon-filters.js", "/Users/Felix/Bilibili/Repo/live-app-web/frontend/common/components/live-feedback/live-feedback.js", "/Users/Felix/Bilibili/Repo/live-app-web/frontend/common/components/live-top-navigator/intro-scripts.js", "/Users/Felix/Bilibili/Repo/live-app-web/frontend/common/components/live-top-navigator/javascripts/top-navigator.js", "/Users/Felix/Bilibili/Repo/live-app-web/frontend/common/components/live-top-navigator/javascripts/top-user-panel.js", "/Users/Felix/Bilibili/Repo/live-app-web/frontend/common/components/live-widget/live-popup/live-popup.js", "/Users/Felix/Bilibili/Repo/live-app-web/frontend/common/components/live-widget/live-toast/live-toast.js", "/Users/Felix/Bilibili/Repo/live-app-web/frontend/common/functions/func-avalon-lazy-init/lazy-init.js", "/Users/Felix/Bilibili/Repo/live-app-web/frontend/common/functions/func-explorer-detective/explorer-detective.js", "/Users/Felix/Bilibili/Repo/live-app-web/frontend/common/functions/func-friendly-format/friendly-format.js", "/Users/Felix/Bilibili/Repo/live-app-web/frontend/common/functions/func-get-abs-position/get-abs-position.js", "/Users/Felix/Bilibili/Repo/live-app-web/frontend/common/functions/func-jquery-cookie/jquery-cookie.js", "/Users/Felix/Bilibili/Repo/live-app-web/frontend/common/functions/func-live-quick-login/live-quick-login.js", "/Users/Felix/Bilibili/Repo/live-app-web/frontend/common/functions/func-number-tofixed/number-tofixed.js", "/Users/Felix/Bilibili/Repo/live-app-web/frontend/common/functions/func-random-emoji/random-emoji.js", "/Users/Felix/Bilibili/Repo/live-app-web/frontend/common/functions/func-setnum-avalon/avalon-set-num.js", "/Users/Felix/Bilibili/Repo/live-app-web/frontend/common/functions/func-setnum/set-num.js", "/Users/Felix/Bilibili/Repo/live-app-web/frontend/common/functions/func-timestamp-shorter/timestamp-shorter.js", "/Users/Felix/Bilibili/Repo/live-app-web/frontend/common/functions/func-type-adjust/type-adjust.js", "/Users/Felix/Bilibili/Repo/live-app-web/frontend/common/live-service/live-service-ctrl.js", "/Users/Felix/Bilibili/Repo/live-app-web/frontend/common/live-service/live-service-get-bp.js", "/Users/Felix/Bilibili/Repo/live-app-web/frontend/common/live-service/live-service-update-currency.js", "/Users/Felix/Bilibili/Repo/live-app-web/frontend/live-room/components/admin-functions/functions/live-on-rtmp.js", "/Users/Felix/Bilibili/Repo/live-app-web/frontend/live-room/components/admin-functions/intro-scripts.js", "/Users/Felix/Bilibili/Repo/live-app-web/frontend/live-room/components/admin-room-edit-panel/javascripts/admin-manage.js", "/Users/Felix/Bilibili/Repo/live-app-web/frontend/live-room/components/admin-room-edit-panel/javascripts/black-manage.js", "/Users/Felix/Bilibili/Repo/live-app-web/frontend/live-room/components/admin-room-edit-panel/javascripts/live-info-manage.js", "/Users/Felix/Bilibili/Repo/live-app-web/frontend/live-room/components/admin-room-edit-panel/javascripts/live-manage.js", "/Users/Felix/Bilibili/Repo/live-app-web/frontend/live-room/components/admin-room-edit-panel/javascripts/room-admin.js", "/Users/Felix/Bilibili/Repo/live-app-web/frontend/live-room/components/admin-room-edit-panel/javascripts/room-info-edit.js", "/Users/Felix/Bilibili/Repo/live-app-web/frontend/live-room/components/admin-room-edit-panel/room-edit-panel.js", "/Users/Felix/Bilibili/Repo/live-app-web/frontend/live-room/components/chat-area/components/bk-changer/bk-changer.js", "/Users/Felix/Bilibili/Repo/live-app-web/frontend/live-room/components/chat-area/components/chat-ctrl-panel/chat-ctrl-panel.js", "/Users/Felix/Bilibili/Repo/live-app-web/frontend/live-room/components/chat-area/components/chat-ctrl-panel/profile-ctrl/intro-javascripts.js", "/Users/Felix/Bilibili/Repo/live-app-web/frontend/live-room/components/chat-area/components/chat-ctrl-panel/profile-ctrl/javascripts/fans-medal.js", "/Users/Felix/Bilibili/Repo/live-app-web/frontend/live-room/components/chat-area/components/chat-ctrl-panel/profile-ctrl/javascripts/profile-ctrl.js", "/Users/Felix/Bilibili/Repo/live-app-web/frontend/live-room/components/chat-area/components/chat-ctrl-panel/profile-ctrl/javascripts/title.js", "/Users/Felix/Bilibili/Repo/live-app-web/frontend/live-room/components/chat-area/components/chat-msg-list/chat-list-ctnr.js", "/Users/Felix/Bilibili/Repo/live-app-web/frontend/live-room/components/chat-area/components/rank-list/javascripts/rank-list.js", "/Users/Felix/Bilibili/Repo/live-app-web/frontend/live-room/components/chat-area/components/super-gift/super-gift.js", "/Users/Felix/Bilibili/Repo/live-app-web/frontend/live-room/components/chat-area/intro-javascripts.js", "/Users/Felix/Bilibili/Repo/live-app-web/frontend/live-room/components/gift-section/intro-javascripts.js", "/Users/Felix/Bilibili/Repo/live-app-web/frontend/live-room/components/gift-section/javascripts/gift-package-ctrl.js", "/Users/Felix/Bilibili/Repo/live-app-web/frontend/live-room/components/gift-section/javascripts/gift-section-ctrl.js", "/Users/Felix/Bilibili/Repo/live-app-web/frontend/live-room/components/header-section/header-section.js", "/Users/Felix/Bilibili/Repo/live-app-web/frontend/live-room/components/live-room-sidebar-left/intro.js", "/Users/Felix/Bilibili/Repo/live-app-web/frontend/live-room/components/live-room-sidebar-left/javascripts/sidebar-ctrl.js", "/Users/Felix/Bilibili/Repo/live-app-web/frontend/live-room/components/my-attention/intro.js", "/Users/Felix/Bilibili/Repo/live-app-web/frontend/live-room/components/my-attention/javascripts/my-attention.js", "/Users/Felix/Bilibili/Repo/live-app-web/frontend/live-room/components/quiz-system/intro-scripts.js", "/Users/Felix/Bilibili/Repo/live-app-web/frontend/live-room/components/quiz-system/javascripts/quiz-avalon-ctrl.js", "/Users/Felix/Bilibili/Repo/live-app-web/frontend/live-room/components/quiz-system/javascripts/quiz-ctrl-methods.js", "/Users/Felix/Bilibili/Repo/live-app-web/frontend/live-room/components/quiz-system/javascripts/quiz-ctrl-quiz-setup.js", "/Users/Felix/Bilibili/Repo/live-app-web/frontend/live-room/components/quiz-system/javascripts/quiz-ctrl-status-ctrl.js", "/Users/Felix/Bilibili/Repo/live-app-web/frontend/live-room/components/quiz-system/javascripts/quiz-ctrl-user-events.js", "/Users/Felix/Bilibili/Repo/live-app-web/frontend/live-room/components/quiz-system/javascripts/quiz-protocol.js", "/Users/Felix/Bilibili/Repo/live-app-web/frontend/live-room/components/recommend-videos/recommend-videos.js", "/Users/Felix/Bilibili/Repo/live-app-web/frontend/live-room/components/seed-exchange/charge.js", "/Users/Felix/Bilibili/Repo/live-app-web/frontend/live-room/components/seed-exchange/exchange.js", "/Users/Felix/Bilibili/Repo/live-app-web/frontend/live-room/components/seed-exchange/seed-exchange.js", "/Users/Felix/Bilibili/Repo/live-app-web/frontend/live-room/components/sign-up/intro.js", "/Users/Felix/Bilibili/Repo/live-app-web/frontend/live-room/components/sign-up/javascripts/sign-up.js", "/Users/Felix/Bilibili/Repo/live-app-web/frontend/live-room/components/treasure-box/treasure-box.js", "/Users/Felix/Bilibili/Repo/live-app-web/frontend/live-room/components/wish/intro.js", "/Users/Felix/Bilibili/Repo/live-app-web/frontend/live-room/components/wish/javascripts/wish.js", "/Users/Felix/Bilibili/Repo/live-app-web/frontend/live-room/fake_56922f5f.js", "/Users/Felix/Bilibili/Repo/live-app-web/frontend/live-room/room-javascripts/live-room-flash-func.js", "/Users/Felix/Bilibili/Repo/live-app-web/frontend/live-room/room-javascripts/live-room-funcs.js", "/Users/Felix/Bilibili/Repo/live-app-web/frontend/live-room/room-javascripts/live-room-init.js", "/Users/Felix/Bilibili/Repo/live-app-web/frontend/live-room/room-javascripts/live-room-protocol.js", "/Users/Felix/Bilibili/Repo/live-app-web/frontend/live-room/room-javascripts/room-init-funcs/func-room-data-deferred.js", "/Users/Felix/Bilibili/Repo/live-app-web/frontend/live-room/room-javascripts/room-init-funcs/func-set-data-activity.js", "/Users/Felix/Bilibili/Repo/live-app-web/frontend/live-room/room-javascripts/room-init-funcs/func-set-data.js", "/Users/Felix/Bilibili/Repo/live-app-web/frontend/live-room/room-javascripts/room-init-funcs/func-set-global-variables.js", "/Users/Felix/Bilibili/Repo/live-app-web/frontend/live-room/room-javascripts/room-init-funcs/func-user-online-heart.js", "/Users/Felix/Bilibili/Repo/live-app-web/frontend/node_modules/perfect-scrollbar/jquery.js", "/Users/Felix/Bilibili/Repo/live-app-web/frontend/node_modules/perfect-scrollbar/src/js/adaptor/jquery.js", "/Users/Felix/Bilibili/Repo/live-app-web/frontend/node_modules/perfect-scrollbar/src/js/lib/class.js", "/Users/Felix/Bilibili/Repo/live-app-web/frontend/node_modules/perfect-scrollbar/src/js/lib/dom.js", "/Users/Felix/Bilibili/Repo/live-app-web/frontend/node_modules/perfect-scrollbar/src/js/lib/event-manager.js", "/Users/Felix/Bilibili/Repo/live-app-web/frontend/node_modules/perfect-scrollbar/src/js/lib/guid.js", "/Users/Felix/Bilibili/Repo/live-app-web/frontend/node_modules/perfect-scrollbar/src/js/lib/helper.js", "/Users/Felix/Bilibili/Repo/live-app-web/frontend/node_modules/perfect-scrollbar/src/js/main.js", "/Users/Felix/Bilibili/Repo/live-app-web/frontend/node_modules/perfect-scrollbar/src/js/plugin/default-setting.js", "/Users/Felix/Bilibili/Repo/live-app-web/frontend/node_modules/perfect-scrollbar/src/js/plugin/destroy.js", "/Users/Felix/Bilibili/Repo/live-app-web/frontend/node_modules/perfect-scrollbar/src/js/plugin/handler/click-rail.js", "/Users/Felix/Bilibili/Repo/live-app-web/frontend/node_modules/perfect-scrollbar/src/js/plugin/handler/drag-scrollbar.js", "/Users/Felix/Bilibili/Repo/live-app-web/frontend/node_modules/perfect-scrollbar/src/js/plugin/handler/keyboard.js", "/Users/Felix/Bilibili/Repo/live-app-web/frontend/node_modules/perfect-scrollbar/src/js/plugin/handler/mouse-wheel.js", "/Users/Felix/Bilibili/Repo/live-app-web/frontend/node_modules/perfect-scrollbar/src/js/plugin/handler/native-scroll.js", "/Users/Felix/Bilibili/Repo/live-app-web/frontend/node_modules/perfect-scrollbar/src/js/plugin/handler/selection.js", "/Users/Felix/Bilibili/Repo/live-app-web/frontend/node_modules/perfect-scrollbar/src/js/plugin/handler/touch.js", "/Users/Felix/Bilibili/Repo/live-app-web/frontend/node_modules/perfect-scrollbar/src/js/plugin/initialize.js", "/Users/Felix/Bilibili/Repo/live-app-web/frontend/node_modules/perfect-scrollbar/src/js/plugin/instances.js", "/Users/Felix/Bilibili/Repo/live-app-web/frontend/node_modules/perfect-scrollbar/src/js/plugin/update-geometry.js", "/Users/Felix/Bilibili/Repo/live-app-web/frontend/node_modules/perfect-scrollbar/src/js/plugin/update-scroll.js", "/Users/Felix/Bilibili/Repo/live-app-web/frontend/node_modules/perfect-scrollbar/src/js/plugin/update.js"], "names"
:
    [], "mappings"
:
    "AAAA;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACrDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC5BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACtEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACvBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC5HA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxiBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC1TA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC/GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC5BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACrDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC9BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC9BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACfA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC7BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC9EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACjJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACtBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACtBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC3IA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC5PA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC9QA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC5FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACliBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACjBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACvDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACrKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACZA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACvKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACnEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChgBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACjRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACtGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC1BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACVA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC5OA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClZA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClnBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC5GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACZA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC/KA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACZA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC9ZA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACzTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC/BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC/KA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC9PA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC1MA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC5HA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC3KA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACZA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC9qBA;AACA;AACA;;ACFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClWA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC3DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACvIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACtQA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACnbA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC7CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC5BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACtBA;AACA;AACA;AACA;AACA;AACA;AACA;;ACNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC9CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC7CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACvFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC1EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACdA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACzBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC/DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC1GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC7HA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACzIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC3KA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC/CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC7GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACjIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACzGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA", "file"
:
    "generated.js", "sourceRoot"
:
    "", "sourcesContent"
:
    ["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);throw new Error(\"Cannot find module '\"+o+\"'\")}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(e){var n=t[o][1][e];return s(n?n:e)},f,f.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})", "/*\n *  Live App Configuration By LancerComet at 11:23, 2015/11/25.\n *  # Carry Your World #\n *  ---\n *  .\n *\n */\n\nvar explorerDetective = require(\"../functions/func-explorer-detective/explorer-detective\");\n\nmodule.exports = {};\n\nmodule.exports.appInfo = {\n    name: \"Bilibili Live\",\n    version: \"V3.3.8-Worker\",\n    codeName: \"450\",\n    author: [\"Felix\", \"LancerComet\"]\n};\n\nmodule.exports.appConfig = {\n    xhrTimeout: 1000 * 30\n};\n\nmodule.exports.consoleText = {\n    info: module.exports.appInfo.name + \" Info: \",\n    success: module.exports.appInfo.name + \" Success: \",\n    caution: module.exports.appInfo.name + \" Caution: \",\n    error: module.exports.appInfo.name + \" Error: \"\n};\n\n\n// Avalon Config. | Avalon .\nmodule.exports.avalonConfig = function () {\n    avalon.config({\n        interpolate:[\"[[\",\"]]\"],\n        debug: false,\n        loader: false\n    });\n};\n\n\n// Global Config. | .\nmodule.exports.globalConfig = function (window) {\n    //  console .\n    // console.log ,  consoleText .\n    window.consoleText = window.console;\n\n    //  IE8  trim .\n    if (explorerDetective() === \"IE 8\") {\n        String.prototype.trim = function() {\n            return this.replace(/(^\\s*)|(\\s*$)/g,'');\n        }\n    }\n};", "/*\n *  Avalon Filters By LancerComet at 14:09, 2015/12/29.\n *  # Carry Your World #\n *  ---\n *  Avalon .\n */\n\nvar friendlyFormat = require('../functions/func-friendly-format/friendly-format');\n\nmodule.exports = function () {\n\n    // Friendly Format By LancerComet at 16:29, 2015.12.28.\n    // # Carry Your World #\n    (function friendlyFormatFilter () {\n        avalon.filters.tenThousand = function (source, args1, args2) {\n            return friendlyFormat.tenThousand(source);\n        };\n\n        avalon.filters.hunderdThousand = function (source, args1, args2) {\n            return friendlyFormat.hunderdThousand(source);\n        };\n\n        avalon.filters.length = function (source) {\n            return source.length;\n        }\n    })();\n\n};\n", "/*\n *  Created by LancerComet at 16:04, 2015/12/07.\n *  Original By Onion.\n */\nvar liveQuickLogin = require(\"../../functions/func-live-quick-login/live-quick-login\");\nvar liveToast = require('../live-widget/live-toast/live-toast');\n\nmodule.exports = function feedbackModule () {\n    var $submitBtn = $(\".feedback-submit-btn\");\n    // Action: \n    $(function () {\n        //\n        $('.feedback-close-btn').on('click',function(){\n            $('.feedback').fadeOut();\n        });\n        //\n        $(\"#remark\").on(\"click\", function(){\n            $(this).val(\"\").css('color','#fefefe');\n        });\n        //\n        $submitBtn.on(\"click\", feedbackSubmit);\n    });\n\n    /* Definition go below. */\n\n    function feedbackSubmit () {\n        var configuration =  {\n            type: $('#type input:radio:checked').val(),\n            num: $('#num input:radio:checked').val(),\n            city:  $('#city').val(),\n            operator:$('#operator').val(),\n            ip:  $('#ip').val(),\n            remark: $('#remark').val()\n        };\n        if(configuration.type  == \"\" || configuration.num == \"\" || configuration.city == \"\" || configuration.operator == \"\") {\n            liveToast($submitBtn[0], \"~~\");\n        } else {\n            $.ajax({\n                url: \"/feedback/submit\",\n                type: \"POST\",\n                data: configuration,\n                success: successCallback,\n                dataType: \"JSON\",\n                error: errorCallback\n            });\n        }\n\n        function successCallback (result) {\n            if (result.code != 0) {\n                liveToast($submitBtn[0], result.msg);\n                return;\n            }\n            liveToast($submitBtn[0], \"(_)\", \"success\");\n            $(function() {\n                $(\"#city,#operator,#ip,#remark\").attr(\"value\",\"\");\n                $(\".feedback\").fadeOut();\n            });\n        }\n\n        function errorCallback (result) {\n            liveToast($submitBtn[0], \" > <\");\n        }\n\n    }\n\n    // window Function Attachment.\n    window.feedBackShow = function () {\n        liveQuickLogin();\n        $(\".feedback\").fadeIn();\n    };\n};", "/*\n *  Bilibili Live Top Navigator Intro File By LancerComet at 14:40, 2015.11.23.\n *  # Carry Your World #\n *  ---\n *\n *  \n *  ---\n *   JS .\n *  , .\n *\n *  \n *  ---\n *  require(\"module-a\")();\n *  require(\"module-b\")();\n *  ...\n *\n */\n\nmodule.exports = topNavSetup;\n\nfunction topNavSetup () {\n    require(\"./javascripts/top-user-panel\")();  //  JavaScript .\n    require(\"./javascripts/top-navigator\")();  //  JavaScript .\n}", "/*\n *  Bilibili Live Top Navigator Script By LancerComet at 22:03, 2015.11.30.\n *  # Carry Your World #\n *  ---\n *\n *  \n *  ---\n *  .\n *\n *  Log:\n *  ---\n *  V0.1.0 - 22:03, 2015.11.30.\n *   - .\n *\n */\nvar explorerDetective = require(\"../../../functions/func-explorer-detective/explorer-detective\");\n\nmodule.exports = function () {\n\n    var $navLink = $(\".nav-link-item.area-navigator\");\n    var $navPanel = $navLink.find(\".live-top-nav-panel\");\n\n    var mouseOutTimeout = null;\n    var allowCtrl = true;\n\n    $navLink.mouseenter(mouseEnter).mouseleave(mouseLeave);\n\n    function mouseEnter () {\n        allowCtrl = false;\n        clearTimeout(mouseOutTimeout);\n        $navPanel.show().addClass(\"panel-in\");\n        var explorer = explorerDetective();\n\n        //  CSS3 .\n        if (explorer === \"IE 7\" || explorer === \"IE 8\" || explorer === \"IE 9\") {\n            $(\".live-top-nav-panel .nav-item\").addClass(\"move-in\");\n            allowCtrl = true;\n        } else {\n            (function itemAnimation () {\n                var $navItems = $(\".live-top-nav-panel .nav-item\");\n                var timeout = 100;\n                $navItems.each(function (index) {\n                    var $this = $(this);\n                    setTimeout(function () {\n                        $this.removeClass(\"move-in\").addClass(\"move-in\");\n                        allowCtrl = index === $navItems.length;\n                        //index === $navItems.length ? allowCtrl = true : void(0);\n                    }, timeout);\n                    timeout += 60;\n                });\n            })();\n        }\n    }\n\n    function mouseLeave () {\n        allowCtrl = false;\n        mouseOutTimeout = setTimeout(function () {\n            $navPanel.stop().fadeOut(300, function () {\n                $(\".live-top-nav-panel .nav-item\").removeClass(\"move-in\");\n                $navPanel.removeClass(\"panel-in\");\n                allowCtrl = true;\n            });\n        }, 250);\n    }\n\n\n\n\n\n    //var liveTopNavLeftCtrl = avalon.define({\n    //    $id: \"liveTopNavLeftCtrl\",\n    //    allowCtrl: true,  // .\n    //    timeoutTiming: 200,\n    //    navPanelCtrl: {\n    //        enter: navPanelMouseEnter,  // .\n    //        leave: navPanelMouseLeave  // .\n    //    },\n    //    navPanelShow: false,  // , .\n    //    navPanelOut: false,  // .\n    //    navPanelOutTimeout: null,  // .\n    //    navPanelFinishTimeout: null  // .\n    //});\n    //\n    //function navPanelMouseEnter () {\n    //    if (!liveTopNavLeftCtrl.allowCtrl) {\n    //        return;\n    //    }\n    //    clearTimeout(liveTopNavLeftCtrl.navPanelOutTimeout);\n    //    clearTimeout(liveTopNavLeftCtrl.navPanelFinishTimeout);\n    //    liveTopNavLeftCtrl.allowCtrl = false;\n    //    liveTopNavLeftCtrl.navPanelOut = false;\n    //    liveTopNavLeftCtrl.navPanelShow = true;\n    //    (function itemAnimation () {\n    //        var $navItems = $(\".live-top-nav-panel .nav-item\");\n    //        var timeout = 0;\n    //        $navItems.each(function () {\n    //            var $this = $(this);\n    //            $this.removeClass(\"move-in\");\n    //            setTimeout(function () {\n    //                $this.addClass(\"move-in\");\n    //            }, timeout);\n    //            timeout += 100;\n    //        });\n    //    })();\n    //    liveTopNavLeftCtrl.navPanelOutTimeout = setTimeout(function () {\n    //        liveTopNavLeftCtrl.allowCtrl = true;\n    //    }, liveTopNavLeftCtrl.timeoutTiming);\n    //}\n    //\n    //function navPanelMouseLeave () {\n    //    clearTimeout(liveTopNavLeftCtrl.navPanelOutTimeout);\n    //    clearTimeout(liveTopNavLeftCtrl.navPanelFinishTimeout);\n    //    liveTopNavLeftCtrl.navPanelOutTimeout = setTimeout(function () {\n    //        liveTopNavLeftCtrl.allowCtrl = false;\n    //        liveTopNavLeftCtrl.navPanelOut = true;  // .\n    //        liveTopNavLeftCtrl.navPanelFinishTimeout = setTimeout(function () {\n    //            liveTopNavLeftCtrl.navPanelOut = false;\n    //            liveTopNavLeftCtrl.navPanelShow = false;\n    //            liveTopNavLeftCtrl.allowCtrl = true;\n    //        }, liveTopNavLeftCtrl.timeoutTiming);\n    //    }, 200);\n    //}\n\n\n};", "/*\n *  Bilibili Live Top User Panel Script By LancerComet at 14:42, 2015.11.23.\n *  # Carry Your World #\n *  ---\n *\n *  \n *  ---\n *   JS .\n *\n *  Log:\n *  ---\n *  V0.1.2 - 22:02, 2015.11.30.\n *   +  Avalon .\n *   + .\n *   + .\n *\n *  V0.1.1 - 10:20, 2015.11.26.\n *   -  browserify .\n *\n *  V0.1.0 - 17:52, 2015.09.18.\n *   - .\n *\n */\n\nvar appConfig = require(\"../../../app-config/app-config\");\nvar quickLogin = require(\"../../../functions/func-live-quick-login/live-quick-login\");\nrequire(\"../../../functions/func-jquery-cookie/jquery-cookie\")();  // jQuery Cookie , .\n\nmodule.exports = liveTopNav;\n\n\n/*\n *  Definition: .\n *  , .\n *  ---\n *\n *  Log:\n *  ---\n *  V0.3.1 - 10:18, 2015.12.01.\n *   +  jQuery  Avalon  ms-mouseenter  ms-mouseleave.\n *\n *  V0.3.0 - 21:51, 2015.11.29.\n *   -  Avalon .\n *\n *  V0.1.1 - 10:20, 2015.11.26.\n *   -  browserify .\n *\n *  V0.1.0 - 17:52, 2015.09.18.\n *   - .\n *\n */\n\nfunction liveTopNav () {\n    \"use strict\";\n\n    // Definition: .\n    var moduleSettings = {\n        animationTiming: 499,  //  CSS3  - 1 ms.\n        xhrTimeout: 1000 * 30,  // XHR .\n        msgCheckInterval: 1000 * 60 * 5  // , ,  5 .\n    };\n\n    // Definition: .\n    var userPanelSettings = {\n        allowCtrl: true,\n        visibility: false,  // .\n        dataRequestURL: \"/User/getUserInfo\",  // .\n        mouseEnter: panelMouseEnter,\n        mouseLeave: panelMouseLeave,\n        mouseLeaveTimeout: null,  // .\n        panelOut: false,  //  ms-class .\n        unreadMsg: false,  // .\n        unreadMsgCount: 0,  // .\n        showProgress: true,  // , .\n        msgClick: msgClick,  // ,  window  onFocus .\n        vipIconClick: vipIconClick  // ,  window  onFocus .\n    };\n\n    // .\n    // .\n    function panelMouseEnter () {\n        if (!userPanelSettings.allowCtrl) { return; }\n        liveTopNavCtrl.$fire(\"topNavUserPanelDataRequest\", {\n            callback: function () {\n                liveTopNavCtrl.$fire(\"topNavUserPanelIn\", true);\n            }\n        });\n    }\n\n    function panelMouseLeave () {\n        liveTopNavCtrl.$fire(\"topNavUserPanelOut\", true);\n    }\n\n    function msgClick () {\n        $(window).on(\"focus\", function () {\n            liveTopNavCtrl.$fire(\"topNavMessageRefresh\");\n            $(window).off(\"focus\");\n        });\n    }\n\n    function vipIconClick () {\n        $(window).on(\"focus\", function () {\n            liveTopNavCtrl.$fire(\"topNavUserPanelDataRequest\");\n            $(window).off(\"focus\");\n        });\n    }\n\n    // Definition: .\n    var liveTopNavCtrl = avalon.define({\n        $id: \"liveTopNavCtrl\",\n        userPanel: userPanelSettings,  // .\n        panelData: {  // .\n            username: \" (==)\",\n            avatar: \"\",\n            isVip: 0,\n            vipIconLink: \"/i\",\n            userLevel: {\n                current: \"UL.--\",\n                next: \"UL.--\",\n                progress: \"0%\",\n                progressData: 0\n            },\n            ranking: \"--\",\n            restExperience: \"--\",\n            seeds: {\n                gold: \"--\",\n                silver: \"--\"\n            }\n        },\n        clearAvatar: function () {  //  Cookie ,  Cookie.\n            $.removeCookie(\"user_face\", { path: \"/\", domain: \".bilibili.com\" });\n        },\n        topNavOpacity: {\n            enable: function () {\n                liveTopNavCtrl.$fire(\"topNavOpacity\", true);\n            },\n            disable: function () {\n                liveTopNavCtrl.$fire(\"topNavOpacity\", false);\n            },\n            status: true  // .\n        },\n        levelPanel: {\n            onhover: false,\n            allowCtrl: true,\n            mouseLeaveTimeout: null,\n            restoreTimeout: null,\n            mouseEnter: function () {\n                if (!liveTopNavCtrl.levelPanel.allowCtrl) { return; }\n                liveTopNavCtrl.levelPanel.allowCtrl = false;\n                clearTimeout(liveTopNavCtrl.levelPanel.mouseLeaveTimeout);\n                clearTimeout(liveTopNavCtrl.levelPanel.restoreTimeout);\n                liveTopNavCtrl.levelPanel.onhover = true;\n                liveTopNavCtrl.levelPanel.restoreTimeout = setTimeout(function () {\n                    liveTopNavCtrl.levelPanel.allowCtrl = true;\n                }, 500);\n            },\n            mouseLeave: function () {\n                if (!liveTopNavCtrl.levelPanel.allowCtrl) { return; }\n                clearTimeout(liveTopNavCtrl.levelPanel.mouseLeaveTimeout);\n                clearTimeout(liveTopNavCtrl.levelPanel.restoreTimeout);\n                liveTopNavCtrl.levelPanel.mouseLeaveTimeout = setTimeout(function () {\n                    liveTopNavCtrl.levelPanel.allowCtrl = false;\n                    liveTopNavCtrl.levelPanel.onhover = false;\n                    liveTopNavCtrl.levelPanel.restoreTimeout = setTimeout(function () {\n                        liveTopNavCtrl.levelPanel.allowCtrl = true;\n                    }, 500);\n                }, 300);\n            }\n        },\n        liveLogin: function () {\n            quickLogin();\n        },\n        iframeObj: {\n            $blackLayer: $('<div class=\"black-layer\" style=\"z-index: 99\"></div>'),\n            $newlive: $('<div class=\"new-live-layer\" style=\"z-index: 100\"><iframe name=\"contentFrame\" id=\"g_iframe\" width=\"100%\" height=\"100%\" scrolling=\"no\" frameborder=\"0\" allowtransparency=\"true\" style=\"background-color:transparent;position: absolute;top:0;border:solid 1px #aaaaaa;border-radius: 10px\" src=\"/room/apply\"></iframe></div>'),\n            iframeExist: false\n        },\n        enterMyRoom: function () {\n            quickLogin();\n            $.ajax({\n                url: \"/liveact/myroom\",\n                type: \"POST\",\n                dataType: \"JSON\",\n                success: function (result) {\n                    if (result.code == 0) {\n                        if (result.data) {\n                            location.href = \"/\" + result.data;\n                            return;\n                        }\n                        if (!liveTopNavCtrl.iframeObj.iframeExist) {\n                            $(\"body\").append(liveTopNavCtrl.iframeObj.$blackLayer);\n                            $(\"body\").append(liveTopNavCtrl.iframeObj.$newlive);\n                            liveTopNavCtrl.iframeObj.iframeExist = true;\n                        } else {\n                            return false;\n                        }\n                    }\n                },\n                error: function (result) {\n                    console.log(appConfig.consoleText.error + \".\")\n                }\n            })\n        },\n        loadFinished: false,\n        logined: false  // .\n    });\n\n    // , , .\n    $.cookie(\"DedeUserID\") ? liveTopNavCtrl.logined = true : void(0);\n\n    avalon.ready(function () {\n        liveTopNavCtrl.loadFinished = true;\n    });\n\n    // Definition:  iframe.\n    //  offLayer.\n    // iframe .\n    window.offLayer = function () {\n        liveTopNavCtrl.iframeObj.$blackLayer.remove();\n        liveTopNavCtrl.iframeObj.$newlive.remove();\n        liveTopNavCtrl.iframeObj.iframeExist = false;\n    };\n    $(document).on('click', '.new-live-layer .off-button', window.offLayer);\n\n    // Definition: .\n    //  true , .\n    liveTopNavCtrl.$watch(\"topNavUserPanelIn\", function (value) {\n        if (arguments.length < 1 || value !== true) {\n            avalon.error(appConfig.consoleText.error + ' \"topNavUserPanel\"  true , .');\n        }\n        userPanelSettings.allowCtrl = false;\n        liveTopNavCtrl.levelPanel.allowCtrl = true;\n        liveTopNavCtrl.levelPanel.onhover = false;\n        clearTimeout(userPanelSettings.mouseLeaveTimeout);\n\n        // Action: .\n        (function itemIntroAnimation () {\n            var timeout = 100;\n            var $sectionBlocks = $(\"#top-nav-user-panel\").find(\".section-block\");\n            $sectionBlocks.each(function (index) {\n                var $this = $(this);\n                setTimeout(function () {\n                    $this.addClass(\"active\");\n                }, timeout);\n                timeout += 80;\n            });\n        })();\n\n        liveTopNavCtrl.userPanel.visibility = true;  // .\n        liveTopNavCtrl.topNavOpacity.disable();  // .\n    });\n\n    // Definition: .\n    //  true , .\n    liveTopNavCtrl.$watch(\"topNavUserPanelOut\", function (value) {\n        if (arguments.length < 1 || value !== true) {\n            avalon.error(appConfig.consoleText.error + ' \"topNavUserPanelOut\"  true , .');\n        }\n        if (userPanelSettings.allowCtrl) { return; }\n        liveTopNavCtrl.levelPanel.allowCtrl = true;\n        liveTopNavCtrl.levelPanel.onhover = false;\n        var $topNavUserPanel = $(\"#top-nav-user-panel\");\n        $topNavUserPanel.addClass(\"panel-out\");  //  jQuery  Avalon  ms-class, ms-class  ms-visible  ms-mouseleave .\n        $topNavUserPanel.find(\".section-block\").removeClass(\"active\");\n        setTimeout(function () {\n            liveTopNavCtrl.userPanel.visibility = false;  // .\n            $(\"#top-nav-user-panel\").removeClass(\"panel-out\");\n            userPanelSettings.allowCtrl = true;\n            liveTopNavCtrl.topNavOpacity.enable();  // .\n        }, 300);\n    });\n\n    // Definition: .\n    // , .\n    //  \"configuration.mode\"  \"force\" , , .\n    //  \"configuration.callback\", .\n    var requestAvailable = true;  // ,  false , , .\n    liveTopNavCtrl.$watch(\"topNavUserPanelDataRequest\", function (configuration) {\n        /*\n         *  @ configuration: {\n         *    mode: null || \"force\",\n         *    callback: Function\n         *  }\n         */\n\n        // Definition: Cookie .\n        var uidInCookie = $.cookie(\"DedeUserID\");  // DedeUserID.\n\n        //  ? GTFO!\n        if (!uidInCookie) {\n            return;\n        }\n\n        // Action: .\n        configuration ? configuration.mode === \"force\" ? requestAvailable = true : void(0) : void(0);\n\n        // Action: .\n        if (!requestAvailable) {\n            configuration ? configuration.callback ? configuration.callback() : void(0) : void(0);\n            return;\n        }\n\n        // .\n        (function dataRequest () {\n            $.ajax({\n                url: userPanelSettings.dataRequestURL,\n                type: \"GET\",\n                dataType: \"JSON\",\n                timeout: moduleSettings.xhrTimeout,  // 30s .\n                data: {\n                    timestamp: Date.now()\n                },\n                success: function (result) {\n                    /*\n                     *  @ result: {\n                     *      code: String,\n                     *      msg: String,\n                     *      data: {\n                     *          uname: String,\n                     *          face: URL[String],\n                     *          gold: Number,\n                     *          silver: Number,\n                     *          user_intimacy: Number,\n                     *          user_level: Number,\n                     *          user_level_rank: Number,\n                     *          user_next_intimacy: Number,\n                     *          user_next_level: Number,\n                     *          vip: [1: true, 0: false]\n                     *      }\n                     *  }\n                     *\n                     */\n                    if (result.code != \"REPONSE_OK\") {\n                        console.log(appConfig.consoleText.error + \":\");\n                        console.log(appConfig.consoleText.error + result.msg);\n                        console.log(appConfig.consoleText.error + \".\");\n                    } else {\n                        dataBinding(result.data);  // .\n                        liveTopNavCtrl.userPanel.showProgress = false;  // .\n                        configuration.callback ? configuration.callback() : void(0);  // .\n                        requestAvailable = false;  // , .\n                        return true;  // .\n                    }\n                },\n                error: function (result) {\n                    console.log(appConfig.consoleText.error + \": .\");\n                    liveTopNavCtrl.userPanel.showProgress = false;  // .\n                    configuration.callback ? configuration.callback() : void(0);  // .\n                }\n            });\n        })();\n\n        // Definition: .\n        function dataBinding (userData) {\n            if (!userData || Object.prototype.toString.call(userData) !== \"[object Object]\") {\n                avalon.error(appConfig.consoleText.error + ' \"dataBinding\" .');\n            }\n            userData.user_intimacy  ? userData.user_intimacy = parseInt(userData.user_intimacy, 10) : console.log(appConfig.consoleText.caution + userPanelSettings.dataRequestURL + '  \"user_intimacy\" .');\n            userData.user_next_intimacy ? userData.user_next_intimacy = parseInt(userData.user_next_intimacy, 10) : console.log(appConfig.consoleText.caution + userPanelSettings.dataRequestURL + '\"user_next_intimacy\" .');\n\n            if (isNaN(userData.user_intimacy) || isNaN(userData.user_next_intimacy)) {\n                console.log(appConfig.consoleText.error + ', .');\n            } else {\n                liveTopNavCtrl.panelData.restExperience = userData.user_next_intimacy - userData.user_intimacy; // .\n                liveTopNavCtrl.panelData.userLevel.progressData = userData.user_intimacy / userData.user_next_intimacy * 100;  // .\n                liveTopNavCtrl.panelData.userLevel.progress = userData.user_intimacy / userData.user_next_intimacy * 100 + \"%\";  // .\n            }\n\n            liveTopNavCtrl.panelData.username = userData.uname;  // .\n            liveTopNavCtrl.panelData.avatar = \"url(\" + userData.face + \")\";  // .\n            liveTopNavCtrl.panelData.seeds.gold = userData.gold;  // .\n            liveTopNavCtrl.panelData.seeds.silver = userData.silver;  // .\n            liveTopNavCtrl.panelData.userLevel.current = \"UL.\" + userData.user_level;  // .\n            liveTopNavCtrl.panelData.userLevel.next = \"UL.\" + userData.user_next_level;  // .\n            liveTopNavCtrl.panelData.ranking = userData.user_level_rank;  // .\n            liveTopNavCtrl.panelData.isVip = parseInt(userData.vip, 10);  //  VIP.\n            parseInt(userData.vip, 10) > 0 ? liveTopNavCtrl.panelData.vipIconLink = \"/i\" : liveTopNavCtrl.panelData.vipIconLink = \"/i#to-vip\";\n        }\n\n    });\n\n    // Definition: .\n    // Cookie ,  Cookie, , .\n    (function avatarFuncRegister () {\n        $(avatarHandler);  //  DomReady .\n        liveTopNavCtrl.$watch(\"topNavUserPanelAvatar\", function (value) {\n            avatarHandler();\n        });  //  Avalon .\n\n        /* Definition Goes Below. */\n\n        function avatarHandler () {\n\n            // Definition: Cookie .\n            var uidInCookie = $.cookie(\"DedeUserID\");  // DedeUserID.\n\n            //  ? GTFO!\n            if (!uidInCookie) {\n                return;\n            }\n\n            var avatarInCookie = $.cookie(\"user_face\");  //  Cookie .\n\n            if (!avatarInCookie) {\n                $.ajax({\n                    url: userPanelSettings.dataRequestURL,\n                    timeout: moduleSettings.xhrTimeout,  // 30s .\n                    data: {\n                        timestamp: Date.now()\n                    },\n                    dataType: \"JSON\",\n                    success: function (result) {\n                        if (result.code != \"REPONSE_OK\") {\n                            console.log(appConfig.consoleText.error + \":\");\n                            console.log(appConfig.consoleText.error + result.msg);\n                            console.log(appConfig.consoleText.error + \".\");\n                            return;\n                        }\n                        liveTopNavCtrl.panelData.avatar = \"url(\" + result.data.face + \")\";\n                    },\n                    error: function (result) {\n                        console.log(appConfig.consoleText.error + \": .\");\n                    }\n                });\n            } else {\n                liveTopNavCtrl.panelData.avatar = \"url(\" + avatarInCookie + \")\";  // .\n            }\n        }\n\n    })();\n\n    // Definition: .\n    //  JSON with Padding  message.bilibili.com , .\n    (function messageFuncRegister () {\n\n        // Definition: .\n        var messageHandler = {\n\n            // Definition: .\n            checkInterval: null,\n\n            // Definition: .\n            xhr: function (mode) {\n                mode = mode || \"normal\";\n\n                // GTFO when not logged in.\n                if (!$.cookie(\"DedeUserID\")) {\n                    return;\n                }\n\n                //  message.bilibili.com .\n                $.ajax({\n                    url: \"http://message.bilibili.com/api/notify/query.notify.count.do\",\n                    type: \"GET\",\n                    data: {\n                        type: \"jsonp\",\n                        captcha: window.captcha_key,\n                        callback: \"callback\",\n                        ts: Date.now()\n                    },\n                    dataType: \"JSONP\",\n                    jsonp: \"callback\",\n                    timeout: moduleSettings.xhrTimeout,  // .\n                    success: function (result) {\n                        // Error Handler.\n                        if (result.code != 0) {\n                            console.log(appConfig.consoleText.error + \" 30 ... (/= _ =)/~\");\n                            return;\n                        }\n\n                        var replyMe = parseInt(result.data.reply_me, 10),\n                            chatMe = parseInt(result.data.chat_me, 10),\n                            praiseMe = parseInt(result.data.praise_me, 10),\n                            notifyMe = parseInt(result.data.notify_me, 10),\n                            atMe = parseInt(result.data.at_me, 10);\n\n                        // Action: .\n                        if(replyMe > 0 || praiseMe > 0 || notifyMe > 0 || atMe > 0 || chatMe > 0){\n                            var msgCount = replyMe + praiseMe + notifyMe + atMe + chatMe;\n                            messageHandler.weHaveUnreadMsg(msgCount);\n                        }else{\n                            messageHandler.clearUnread();\n                        }\n\n                    },\n                    error: function (result) {\n                        console.log(appConfig.consoleText.error + \" 30 ... (/= _ =)/~\")\n                    }\n                });\n\n            },\n\n            // Definition: .\n            check: function () {\n                messageHandler.checkInterval = setInterval(messageHandler.xhr, moduleSettings.msgCheckInterval)\n            },\n\n            // Definition: \n            weHaveUnreadMsg: function (msgCount) {\n                msgCount = parseInt(msgCount, 10);\n                msgCount > 99 ? msgCount = \"99+\" : void(0);\n                liveTopNavCtrl.userPanel.unreadMsg = true;\n                liveTopNavCtrl.userPanel.unreadMsgCount = msgCount;\n            },\n\n            // Definition: \n            clearUnread: function () {\n                liveTopNavCtrl.userPanel.unreadMsg = false;\n                liveTopNavCtrl.userPanel.unreadMsgCount = 0;\n            }\n        };\n\n        // Definition: .\n        function messageInit () {\n            messageHandler.xhr();\n            messageHandler.check();\n            //liveTopNavCtrl.userPanel.msgXHR = messageHandler.xhr;\n        }\n\n        $(window).on(\"load\", messageInit);  // Window.onload .\n\n        //  Avalon . , .\n        liveTopNavCtrl.$watch(\"topNavMessageRefresh\", function (mode) {\n            if (mode === \"dev\") {\n                messageHandler.xhr(\"dev\");\n                console.log(\"~~ B \");\n                console.log(\" zhaopin@bilibili.com \");\n            } else {\n                messageHandler.xhr();\n            }\n        });\n\n    })();\n\n\n    // Definition: .\n    // true: , false: .\n    liveTopNavCtrl.$watch(\"topNavOpacity\", function (value) {\n        if (value !== true && value !== false) {\n            avalon.error(appConfig.consoleText.error + ' $fire  \"topNavOpacity\"  true  false.')\n        }\n        value ? liveTopNavCtrl.topNavOpacity.status = true : liveTopNavCtrl.topNavOpacity.status = false;\n    });\n\n    // Definition: .\n    liveTopNavCtrl.$watch(\"fillCurrency\", function (value) {\n        if (value.gold !== null && value.gold !== undefined) { liveTopNavCtrl.panelData.seeds.gold = value.gold; }\n        if (value.silver !== null && value.silver !== undefined) { liveTopNavCtrl.panelData.seeds.silver = value.silver; }\n    });\n\n\n\n}", "/*\n *  Live Popup By LancerComet at 18:45, 2015/12/15.\n *  # Carry Your World #\n *  ---\n *  .\n *  , , .\n *\n *  :\n *  ---\n *  var livePopup = require(\"live-popup\");\n *\n *  var newLivePopup = livePopup(param) || new livePopup(param);  // , .\n *                                                                // Param .\n *  newLivePopup.open();  // .\n *  newLivePopup.close();  // .\n *  newLivePopup.confirm();  // .\n *  newLivePopup.remove();  // .\n *\n *  :\n *  ---\n *  var newPopup = LivePopup({\n *      title: \"\",\n *      content: \"~\",\n *      type: \"alert\",\n *      initFunc: function () {\n *          console.log(\".\");\n *      },\n *      onConfirm: function () {\n *          var self = this;\n *          $.ajax({\n *              url: \"...\",\n *              type: \"...\",\n *              data: \"...\",\n *              success: function () {\n *                  // ...\n *                  self.done();  // onConfirm .\n *              }\n *          })\n *      }\n *  });\n *\n *  var newPopup2 = new LivePopup({\n *      title: \"~\",\n *      html: '<p>?</p>',\n *      button: {\n *          confirm: \"\",\n *          cancel: \"~\"\n *      },\n *      type: \"action\",\n *      initFunc: function () {\n *          // ...\n *      },\n *      onConfirm: function () {\n *          $.ajax(...);\n *      }\n *  });\n *\n *\n */\n\nvar appConfig = require('../../../app-config/app-config');\nvar randomEmoji = require(\"../../../functions/func-random-emoji/random-emoji\");\n//var explorerDetective = require(\"../../../functions/func-explorer-detective\");\n\n// Definition: .\nvar LivePopup = function (param) {\n    /*\n     *  @ param: {\n     *      title: String,  // .\n     *      content: \"String\" || null,  // .\n     *      html: String || null,  // . , ,  content .\n     *      type: \"action\" || \"alert\" || \"info\",  // , Action , Alert  Info , Alert .\n     *      button: {\n     *          confirm: String,  // .  \"\".\n     *          cancel: String  // .  \"\".\n     *      } || false,  //  button  false  button.\n     *      width: String || null,  // .\n     *      silent: true,  //  true .\n     *      initFunc: Function || null  // .\n     *      onConfirm: Function || null  // , .\n     *                                   // ,  newPopup.done(),  Promise, .\n     *      onCancel: Function || null  // .\n     *                                  //  close, !\n     *    }\n     */\n\n    //  LivePopup  \"\".\n    if (!(this instanceof LivePopup)) {\n        return new LivePopup(param);\n    }\n\n    var self = this;\n\n    if (!param) {\n        throw new Error(appConfig.consoleText.error + ' Live Popup .');\n    }\n\n    // Definition: .\n    var fragment = document.createDocumentFragment();\n\n    // Definition: .\n    var newPopup = document.createElement(\"div\");\n    newPopup.className = \"live-popup-panel\";  // Add Class.\n\n    // Definition:  Body Merge.\n    var bodyMerge = document.createElement(\"div\");\n    bodyMerge.className = \"body-merge\";\n    newPopup.appendChild(bodyMerge);\n\n    // Definition:  Panel Content Container.\n    var panelContent = document.createElement(\"div\");\n    panelContent.className = \"panel-content\";\n    newPopup.appendChild(panelContent);\n\n    // Definition: .\n    //  Param Handler.\n    (function popupTitleHandler () {\n        param.title = param.title.toString() ? param.title.toString() : randomEmoji.helpless() ;  // .\n\n        // .\n        var titleCtnr = document.createElement(\"div\");\n        titleCtnr.className = \"popup-title-container\";\n        titleCtnr.innerHTML = '<h2 class=\"popup-title\">' + param.title + '</h2>';\n\n        panelContent.appendChild(titleCtnr);\n    })();\n\n    // Definition: .\n    (function popupContentHandler () {\n        var contentCtnr = document.createElement(\"div\");\n        contentCtnr.className = \"popup-content-container\";\n\n        // .\n        if (param.html) {\n            contentCtnr.innerHTML = param.html;\n        } else {\n            param.content = param.content || \"~ \" + randomEmoji.helpless();\n            contentCtnr.innerHTML = '<p>' + param.content + '</p>';\n        }\n\n        panelContent.appendChild(contentCtnr);\n    })();\n\n    // Definition: .\n    (function popupButtonsHandler () {\n        if (param.button !== false) {\n            // Type Handler.\n            param.type = (param.type || \"action\").toLowerCase();\n            if (param.type !== \"alert\" && param.type !== \"action\" && param.type !== \"info\") {\n                throw new Error(appConfig.consoleText.error + \"Live Popup  Action  Alert  Info.\");\n            }\n\n            var btnsCtnr = document.createElement(\"div\");\n            btnsCtnr.className = \"popup-button-container\";\n\n            param.button = param.button ? param.button : { confirm: \"\", cancel: \"\" };\n\n            // . ,  param.onConfirm.\n            var confirmBtn = document.createElement(\"button\");\n            confirmBtn.className = \"popup-button confirm\";\n            confirmBtn.innerHTML = param.button.confirm || \"\";\n            confirmBtn.setAttribute(\"aria-label\", \"\");\n\n            //  onConfirm :  onConfirm, .\n            if (param.onConfirm && $.isFunction(param.onConfirm)) {\n                self.onConfirm = param.onConfirm;\n            } else {\n                //  onConfirm .\n                self.onConfirm = self.close;\n            }\n\n            //  onCancel :  onCancel, .\n            if (param.onCancel && $.isFunction(param.onCancel)) {\n                self.onCancel = param.onCancel;\n            }\n\n            $(confirmBtn).on(\"click\", function () {\n                self.confirm();\n            });\n            btnsCtnr.appendChild(confirmBtn);\n            self.confirmBtn = confirmBtn;\n\n            //  Action ,  Cancel .\n            if (param.type === \"action\") {\n                var cancelBtn = document.createElement(\"button\");\n                cancelBtn.innerHTML = param.button.cancel || \"\";\n                cancelBtn.className = \"popup-button cancel close-btn\";\n                cancelBtn.setAttribute(\"aria-label\", \"\");\n                $(cancelBtn).on(\"click\", function () {\n                    self.close();\n                });\n                btnsCtnr.appendChild(cancelBtn);\n                self.cancelBtn = cancelBtn;\n            }\n\n            //  Alert  \".alert\".\n            if (param.type === \"alert\") {\n                newPopup.className = \"live-popup-panel alert\";\n            }\n\n            panelContent.appendChild(btnsCtnr);\n\n        }\n\n        // Action: .\n        var closeBtn = document.createElement(\"div\");\n        closeBtn.className = \"close-btn right-top\";\n        closeBtn.setAttribute(\"role\", \"button\");\n        closeBtn.setAttribute(\"aria-label\", \".\");\n        closeBtn.setAttribute(\"title\", \" \" + randomEmoji.helpless());\n        $(closeBtn).on(\"click\", function () {\n            self.close();\n        });  // Let jQuery Handle the Event Binding.\n        panelContent.appendChild(closeBtn);\n    })();\n\n    // Action: .\n    param.width && $(panelContent).css({\"width\": param.width});\n\n    fragment.appendChild(newPopup);\n    document.body.appendChild(fragment);\n\n    //$(\".body-container\").addClass(\"blur\");\n\n    //  Open  KeyEvent.\n    this.open();\n\n    //\n    param.silent && $(newPopup).hide();\n\n    //  popup.\n    this.popup = newPopup;\n\n    // Action:  initFunc. initFunc .\n    (function execInitFunc () {\n        if (param.initFunc && !$.isFunction(param.initFunc)) {\n            throw new Error(appConfig.consoleText.error + \" Live Popup ,  initFunc  Function.\");\n        }\n        param.initFunc && param.initFunc();\n    })();\n};\n\n// Definition: .\nLivePopup.prototype.open = function () {\n    var self = this;\n\n    // Action: .\n    $(window).on(\"keyup\", function keyEvent (event) {\n        self.keyupEvent = keyEvent;\n        event.keyCode === 27 && self.allowEnterKey && self.close();\n        event.keyCode === 13 && self.allowEnterKey && self.confirm();\n    });\n\n    // Action: .\n    $(this.popup).show().removeClass(\"hide\").attr(\"aria-hidden\", false);\n    setTimeout(function () {\n        self.allowEnterKey = true;\n    }, 300);\n};\n\n// Definition: .\nLivePopup.prototype.close = function (callback) {\n    var self = this;\n\n    // Exec onCancel when exist.\n    if ($.isFunction(this.onCancel)) {\n        console.log(\"Popup onCancel exec.\");\n        setTimeout(self.onCancel, 0);\n    }\n\n    // .\n    popupHide(self, callback);\n\n    // Action: .\n    $(window).off(\"keyup\", this.keyupEvent);\n    this.allowEnterKey = false;\n    $(\".body-container\").removeClass(\"blur\");\n};\n\n// Definition: .\nLivePopup.prototype.confirm = function () {\n    if (this.onConfirm && $.isFunction(this.onConfirm)) {\n        this.onConfirm();\n    }\n};\n\n// Definition: .\n//  \" = null\" .\nLivePopup.prototype.remove = function () {\n    var popup = this.popup;\n    popupHide(this, function () {\n        $(popup).remove();\n        popup = null;\n    });\n};\n\n// Definition:  onConfirm  Promise.\n//  param.onConfirm , ,  newPopup.done().\nLivePopup.prototype.done = function () {\n    this.close();\n};\n\n// Definition: Popup .\n//  close  remove .\nfunction popupHide (self, callback) {\n    var popup = self.popup;\n    $(popup).addClass(\"hide\").attr(\"aria-hidden\", true);\n    setTimeout(function () {\n        $(popup).hide();\n        callback && callback();\n    }, 380);\n}\n\n\nmodule.exports = LivePopup;", "/*\n *  Live Toast JavaScripts By LancerComet at 17:35, 2015.12.16.\n *  # Carry Your World #\n *  ---\n *   Toast  JavaScript .\n */\n\nvar appConfig = require('../../../app-config/app-config');\nvar typeAdjust = require(\"../../../functions/func-type-adjust/type-adjust\");\nvar randomEmoji = require(\"../../../functions/func-random-emoji/random-emoji\");\n\nvar LiveToast = function (element, content, type, fixed) {\n\n    /*\n     *  @ element: Object || jQuery Object,  jQuery .\n     *  @ content: String, .\n     *  @ type: String, success || caution || error || info.\n     *  @ fixed: Boolean,  fixed .\n     */\n\n    //  fixed, .\n    if (typeof type === \"boolean\") {\n        fixed = type;\n        type = null;\n    }\n\n    // Action:  Toast .\n    var fragment = document.createDocumentFragment();\n    var newToast = document.createElement(\"div\");\n\n    // Action:  Toast .\n    type = type || \"info\";\n    if (type !== \"success\" && type !== \"caution\" && type !== \"error\" && type !== \"info\") {\n        throw new Error(appConfig.consoleText.error + \" Live Toast : success || caution || error || info\");\n    }\n    newToast.innerHTML = \"<i class='toast-icon \" + type + \"'></i><span class='toast-text'>\" + content + \"</span>\" || \"<i class='toast-icon info'></i><span class='toast-text'>~ </span>\" + randomEmoji();\n    newToast.className = \"live-toast \" + type;\n\n    // Action:  element ,  jQuery .\n    var targetElement = null;\n    switch (typeAdjust(element)) {\n        case \"HTML Element\":\n            targetElement = element;\n            break;\n        case \"jQuery Object\":\n            targetElement = element[0];\n            break;\n        default:\n            throw new Error(appConfig.consoleText.error + \" Live Toast  Dom  jQuery .\");\n    }\n\n    //  Toast .\n    var size = {\n        width: $(targetElement).width(),\n        height: $(targetElement).height()\n    };\n\n    var targetElementLeft = getLeft(targetElement);\n    var targetElementTop = getTop(targetElement);\n\n    //  Toast .\n    if (targetElementLeft > $(window).width() - 300) {\n        $(newToast).css({\"left\": targetElementLeft - size.width});\n    } else {\n        $(newToast).css({\"left\": targetElementLeft + size.width});\n    }\n\n    //  fixed .\n    var scrollTop = 0;\n    if (fixed) { scrollTop = document.body.scrollTop; }\n    $(newToast).css({\"top\": targetElementTop + size.height + scrollTop});\n\n    // Toast .\n    setTimeout(function () {\n        $(newToast).addClass(\"out\");\n        setTimeout(function () {\n            $(newToast).remove();\n            // Manual GC.\n            fragment = newToast = targetElement = size = targetElementLeft = targetElementTop = scrollTop  = null;\n        }, 400);\n    }, 2000);\n\n    // Appending.\n    //  liveToast , .\n    //if (!$(\"#live-toast-ctnr\")[0]) {\n    //    var liveToastCtnr = document.createElement(\"div\");\n    //    liveToastCtnr.id = \"live-toast-ctnr\";\n    //    liveToastCtnr.className = \"w-100 p-absolute p-zero\";\n    //    $(liveToastCtnr).css({\"height\": $(\"body\").height()});\n    //    document.body.appendChild(liveToastCtnr);\n    //}\n\n    fragment.appendChild(newToast);\n    document.body.appendChild(fragment);\n\n};\n\n// Definition:  X .\nfunction getLeft (element) {\n    var offset = element.offsetLeft;\n    element.offsetParent !== null ? offset += getLeft(element.offsetParent) : void(0);\n    return offset;\n}\n\n// Definition:  Y .\nfunction getTop (element) {\n    var offset = element.offsetTop;\n    element.offsetParent !== null ? offset += getTop(element.offsetParent) : void(0);\n    return offset;\n}\n\nmodule.exports = LiveToast;", "/*\n *  Live Room Avalon Controllers Lazy Init By LancerComet at 11:47, 2015/12/21.\n *  # Carry Your World #\n *  ---\n *   Lazy-Init .\n */\n\nvar lazyInitTime = 1;\n//var lazyInitArray = [];\nmodule.exports = function (node, vmodel, callback) {\n\n    setTimeout(function () {\n        if (node === null && vmodel === null) {\n            avalon.scan();\n        } else {\n            avalon.scan(node, vmodel);\n        }\n        callback && callback();\n    }, lazyInitTime);\n\n    lazyInitTime += 100;\n\n    //for (var i = 0, length = lazyInitArray.length; i < length; i++) {\n    //    lazyInitArray[i]();\n    //    lazyInitArray[i](i, 1);\n    //}\n\n};\n", "/*\n *   Explorer Detective By LancerComet at 11:30, 2015/11/25.\n *   # Carry Your World #\n *   ---\n *\n *   :\n *   ---\n *   .\n *\n *   :\n *   ---\n *   var browserIs = require(\"func-explorer-detective\")();  // browserIs .\n *\n *   License\n *   ---\n *    2015 LancerComet @ MIT License.\n *\n */\n\nmodule.exports = explorerDetective;\n\nfunction explorerDetective () {\n    var userAgent = window.navigator.userAgent;\n    var browser = {\n        myBrowser : \"unknown\",\n        database: [\n            { type: \"IE Legacy\", regExp: \"MSIE [1-6].*\"},  // IE 1-6\n            { type: \"IE 7\", regExp: \"MSIE [7].*\"},  // IE 7\n            { type: \"IE 8\", regExp: \"MSIE [8].*\"},  // IE 8,  CSS3  HTML5.\n            { type: \"IE 9\", regExp: \"MSIE [9].*\"},  // IE 9,  CSS3  HTML5.\n            { type: \"IE Modern\", regExp: \"Trident/[6-9].*\" },  // gt IE 10,  CSS3  HTML5.\n            //{ type: \"IE No CSS3\", regExp: \"MSIE [1-9].*\" },  // lt IE 10,  CSS3.\n            { type: \"Firefox\", regExp: \"Firefox/[0-9].*\" },\n            { type: \"Safari\", regExp: \"AppleWebKit/[0-9].*.Safari/[0-9]\" },\n            { type: \"Chrome\", regExp: \"AppleWebKit/[0-9].*.Chrome/[0-9].*.Safari/[0-9]\" },\n            { type: \"Opera Presto\", regExp: \"Opera.[0-9].*.Presto/[0-9]\" },\n            { type: \"Opera Modern\", regExp: \"OPR/[0-9][0-9]\" },\n            { type: \"Edge\", regExp: \"Edge/[0-9].*\" },\n            { type: \"Maxthon 4\", regExp: \"Maxthon/[4]\" }\n        ]\n    };\n\n    (function matchExplorer () {\n        for (var i = 0, length = browser.database.length; i < length; i++) {\n            var newRegExp = new RegExp(browser.database[i].regExp);\n            if(userAgent.match(newRegExp)){\n                browser.myBrowser = browser.database[i].type;\n            }\n        }\n    })();\n\n    return browser.myBrowser;\n}\n", "/*\n *  Friendly Format By LancerComet at 16:00, 2015.11.20.\n *  # Carry Your Wolrd #\n *  ---\n *\n *  Description:\n *  ---\n *  .\n *  ,  10000 ,  100000 .\n *\n */\n\nmodule.exports = {\n    tenThousand: tenThousandFriendlyFormat,\n    hunderdThousand: oneHundredThousandFormat\n};\n\n// Definition: .\nfunction tenThousandFriendlyFormat (num) {\n    if (parseInt(num, 10) < 10000) {\n        return num;\n    }\n    return friendlyFormat(num);\n}\n\n// Definition: .\nfunction oneHundredThousandFormat (num) {\n    if (parseInt(num, 10) < 100000) {\n        return num;\n    }\n    return friendlyFormat(num);\n}\n\n// Definition: .\nfunction friendlyFormat (num) {\n\n    //  0  .\n    if (!num) { return num; }\n\n    // , .\n    if (isNaN(parseInt(num, 10))) {\n        console.log(\"Bilibili Live Caution: , .\");\n        return num;\n    }\n\n    // .\n    num = num.toString();\n\n    //  \"XX\" .\n    if (num.indexOf(\"\\u4e07\") > -1) {\n        var pureNum = parseFloat(num.substr(0, num.indexOf(\"\\u4e07\")));\n        if (pureNum < 10) return num;\n        var returnNum = pureNum.toFixed(1);\n        return returnNum + \"\\u4e07\";\n    }\n\n    if ( !(0 <= num.indexOf(\"\\u4e07\") || 0 <= num.indexOf(\",\") ) ) {\n        return (num = parseInt(num)) ? 10000<= num && (num = (num / 10000).toFixed(1) + \"\\u4e07\") : num = \"--\", num\n    }\n\n    /*\n     *  \"110000\" => \"10.1\"\n     *  110000 => \"10.1\"\n     *  \"10.1\" => \"10.1\"\n     *  \"10\" => \"10.0\"\n     */\n}", "/*\n *  Get Absolute Position of Targeted Dom By LancerComet at 17:13, 2015/12/24.\n *  # Carry Your World #\n *  ---\n *  .\n *\n */\n\nvar typeAdjust = require('../func-type-adjust/type-adjust');\n\nmodule.exports = function (element) {\n    element = typeAdjust(element) === \"jQuery Object\" ? element[0] : element;\n    return {\n        left: getLeft(element),\n        top: getTop(element)\n    }\n};\n\n// Definition:  X .\nfunction getLeft (element) {\n    var offset = element.offsetLeft;\n    element.offsetParent !== null ? offset += getLeft(element.offsetParent) : void(0);\n    return offset;\n}\n\n// Definition:  Y .\nfunction getTop (element) {\n    var offset = element.offsetTop;\n    element.offsetParent !== null ? offset += getTop(element.offsetParent) : void(0);\n    return offset;\n}", "/*!\n *  Cookie window.jQuery Plugin Packaged By LancerComet at 10:25, 2015.11.26.\n *  jQuery Cookie .\n *\n *  :\n *  ---\n *  require(\"func-jquery-cookie\")();\n *\n *  :\n *  ---\n *  .\n *\n *  ---------\n *\n *  window.jQuery Cookie Plugin v1.4.1\n *  https://github.com/carhartl/window.jQuery-cookie\n *\n *  Copyright 2013 Klaus Hartl\n *  Released under the MIT license\n *\n */\n\nvar appConfig = require('../../app-config/app-config');\nmodule.exports = getCookie;\n\nfunction getCookie () {\n\n    if (window.jQuery.cookie && window.jQuery.removeCookie) {\n        console.log(appConfig.consoleText.info + \"jQuery cookie was already loaded, and now return.\");\n        return;\n    }\n\n    var pluses = /\\+/g;\n\n    function encode(s) {\n        return config.raw ? s : encodeURIComponent(s);\n    }\n\n    function decode(s) {\n        return config.raw ? s : decodeURIComponent(s);\n    }\n\n    function stringifyCookieValue(value) {\n        return encode(config.json ? JSON.stringify(value) : String(value));\n    }\n\n    function parseCookieValue(s) {\n        if (s.indexOf('\"') === 0) {\n            // This is a quoted cookie as according to RFC2068, unescape...\n            s = s.slice(1, -1).replace(/\\\\\"/g, '\"').replace(/\\\\\\\\/g, '\\\\');\n        }\n\n        try {\n            // Replace server-side written pluses with spaces.\n            // If we can't decode the cookie, ignore it, it's unusable.\n            // If we can't parse the cookie, ignore it, it's unusable.\n            s = decodeURIComponent(s.replace(pluses, ' '));\n            return config.json ? JSON.parse(s) : s;\n        } catch(e) {}\n    }\n\n    function read(s, converter) {\n        var value = config.raw ? s : parseCookieValue(s);\n        return window.jQuery.isFunction(converter) ? converter(value) : value;\n    }\n\n    var config = window.jQuery.cookie = function (key, value, options) {\n\n        // Write\n\n        if (value !== undefined && !window.jQuery.isFunction(value)) {\n            options = window.jQuery.extend({}, config.defaults, options);\n\n            if (typeof options.expires === 'number') {\n                var days = options.expires, t = options.expires = new Date();\n                t.setTime(+t + days * 864e+5);\n            }\n\n            return (document.cookie = [\n                encode(key), '=', stringifyCookieValue(value),\n                options.expires ? '; expires=' + options.expires.toUTCString() : '', // use expires attribute, max-age is not supported by IE\n                options.path    ? '; path=' + options.path : '',\n                options.domain  ? '; domain=' + options.domain : '',\n                options.secure  ? '; secure' : ''\n            ].join(''));\n        }\n\n        // Read\n\n        var result = key ? \"\" : {};\n\n        // To prevent the for loop in the first place assign an empty array\n        // in case there are no cookies at all. Also prevents odd result when\n        // calling window.jQuery.cookie().\n        var cookies = document.cookie ? document.cookie.split('; ') : [];\n\n        for (var i = 0, l = cookies.length; i < l; i++) {\n            var parts = cookies[i].split('=');\n            var name = decode(parts.shift());\n            var cookie = parts.join('=');\n\n            if (key && key === name) {\n                // If second argument (value) is a function it's a converter...\n                result = read(cookie, value);\n                break;\n            }\n\n            // Prevent storing a cookie that we couldn't decode.\n            if (!key && (cookie = read(cookie)) !== undefined) {\n                result[name] = cookie;\n            }\n        }\n\n        return result;\n    };\n\n    config.defaults = {};\n\n    window.jQuery.removeCookie = function (key, options) {\n        if (window.jQuery.cookie(key) === undefined) {\n            return false;\n        }\n\n        // Must not alter options, thus extending a fresh object...\n        window.jQuery.cookie(key, '', window.jQuery.extend({}, options, { expires: -1 }));\n        return !window.jQuery.cookie(key);\n    };\n\n}", "/*\n *  Live Quick Login Packaged By LancerComet at 17:19, 2015/11/20.\n *  # Carry Your World #\n *  ---\n *  .\n *  ,  throw new Error  JS .\n *  .\n *\n */\n\nmodule.exports = liveQuickLogin;\n\nfunction liveQuickLogin () {\n    \"use strict\";\n\n    if (!$.cookie(\"DedeUserID\")){\n        try {\n            if (window.biliQuickLogin) {\n                window.biliQuickLogin(function () {\n                    window.location.reload();\n                });\n                throw \"Bilibili Live: ~~ -_-\";\n            } else {\n                throw \"Bilibili Live: .\";\n            }\n        } catch (tryErr) {\n            throw new Error(tryErr);\n        }\n    }\n\n}", "/*\n *  Number to Fixed Function By LancerComet at 14:15, 2015/12/18.\n *  # Carry Your World #\n *  ---\n *  .\n *   Number .\n */\n\nmodule.exports = function () {\n\n    Number.prototype.toFixed1 = function (){\n        return parseFloat(this.toString().replace(/(\\.\\d{1})\\d+$/, \"$1\"));\n    }\n\n};\n", "/*\n *  Random Emoji By LancerComet at 10:39, 2015/12/16.\n *  # Carry Your World #\n *  ---\n *  .\n */\n\nvar emojiPool = {\n    happy: [\"()\", \"\", \"\", \"(/  \\\\)\", \"(==)\", \"('')\", \"<()>\", \"(  )\", \"(,,  ,,) \"],\n    shock: [ \",,,,\", \"()\", \"(   |||)\", \"( _)\", \"()!?\"],\n    sad: [\"(  ;)\", \"\", \"\", \"\", \"(`)\"],\n    helpless: [\"\", \"\", \"_(:3 )_\", \"_(:)_\", \"(/)\", \"()\"]\n};\n\n\nmodule.exports = {\n    happy: function () {\n        return emojiPool.happy[Math.floor(Math.random() * emojiPool.happy.length)];\n    },\n    sad: function () {\n        return emojiPool.sad[Math.floor(Math.random() * emojiPool.sad.length)];\n    },\n    shock: function () {\n        return emojiPool.shock[Math.floor(Math.random() * emojiPool.shock.length)];\n    },\n    helpless: function () {\n        return emojiPool.helpless[Math.floor(Math.random() * emojiPool.helpless.length)];\n    }\n};\n", "/*\n *  Avalon Set Number with Animation By LancerComet at 17:13, 2015.12.23.\n *  # Carry Your Wolrd #\n *  ---\n *\n *  Description:\n *  ---\n *  .\n *   Avalon .\n *\n *  Usage:\n *  ---\n *  avalonSetNum(, , Avalon [])\n *\n *  :\n *  avalonSetNum(10000, testCtrl.num, \"testCtrl.num\");\n *\n */\n\nmodule.exports = avalonSetNum;\n\nfunction avalonSetNum (newNumber, oldNumber, avalonProp) {\n    \"use strict\";\n\n    var numTimer = null;\n\n    // Error Handler.\n    if (Object.prototype.toString.call(newNumber) !== \"[object String]\" && Object.prototype.toString.call(newNumber) !== \"[object Number]\") {\n        throw new Error('Function \"avalonSetNum\" Error:  avalonSetNum() .');\n    }\n\n    var currentNum = parseInt(oldNumber, 10);  // Definition: .\n    var newNum = parseInt(newNumber, 10);  // Definition: .\n\n    //  currentNum  newNum .\n    if (isNaN(currentNum) || isNaN(newNum)) {\n        console.log('Function \"avalonSetNum\" Error: , .');\n        return;\n    }\n\n    //  currentNum  newNum .\n    if (!isFinite(currentNum) || !isFinite(newNum)) {\n        console.log('Function \"avalonSetNum\" Error: , .');\n        return;\n    }\n\n    var deltaNum = newNum - currentNum;  // Definition: .\n\n    // Action:  deltaNum .\n    if (Math.abs(deltaNum) <= 10) {\n        eval(\"avalon.vmodels.\" + avalonProp + \" = \" + newNumber);\n        return;\n    }\n\n    var execTime = Math.abs(Math.floor(deltaNum / 10000));  // Definition: .\n    if (execTime > 100) { execTime = 100; }  // execTime  100.\n\n    var deltaPerTime = deltaNum / execTime,  // .\n        addCount = 0;  // .\n\n    // : element.timer.\n    numTimer = setInterval(function () {\n        if (addCount++ >= execTime) {\n            numTimer && _clearNumTimer();  // .\n            eval(\"avalon.vmodels.\" + avalonProp + \" = \" + newNum);  // .\n            return;\n        }\n        eval(\"avalon.vmodels.\" + avalonProp + \" = \" + parseInt(currentNum + deltaPerTime * addCount, 10));\n    }, 10);\n\n    /* Internal Function goes below. */\n\n    // Definition: .\n    function _clearNumTimer () {\n        clearInterval(numTimer);\n        numTimer = null;\n    }\n\n}", "/*\n *  Set Number with Animation Rewrite By LancerComet at 14:14, 2015.11.11.\n *  # Carry Your Wolrd #\n *  ---\n *\n *  Description:\n *  ---\n *  .\n *\n *  Info:\n *  ---\n *   \"data-real-number\" , .\n *\n *  Usage:\n *  ---\n *  setNum(,  || jQuery )\n *  , .\n *\n */\n\nmodule.exports = setNum;\n\nfunction setNum (newNumber, element) {\n    \"use strict\";\n\n    // Error Handler.\n    if (Object.prototype.toString.call(newNumber) !== \"[object String]\" && Object.prototype.toString.call(newNumber) !== \"[object Number]\") {\n        throw new Error('Function \"setNum\" Error:  setNum() .');\n    }\n\n    var currentNum = parseInt(_getHTML(element), 10);  // Definition: .\n    var newNum = parseInt(newNumber, 10);  // Definition: .\n\n    //  currentNum  newNum .\n    if (isNaN(currentNum) || isNaN(newNum)) {\n        (function () {\n            var consoleText = 'Function \"setNum\" Error: , .';\n            console.error ? console.error(consoleText) : console.log(consoleText);\n            consoleText = null;\n        })();\n        return;\n    }\n\n    //  currentNum  newNum .\n    if (!isFinite(currentNum) || !isFinite(newNum)) {\n        (function () {\n            var consoleText = 'Function \"setNum\" Error: , .';\n            console.error ? console.error(consoleText) : console.log(consoleText);\n            consoleText = null;\n        })();\n        return;\n    }\n\n    (function setRealNumber () {\n        if (Object.prototype.toString.call(element).indexOf(\"Element\") > -1) {\n            // .\n            element.setAttribute(\"data-real-number\", newNum);\n        } else if (Object.prototype.toString.call(element) === \"[object Object]\") {\n            //  jQuery .\n            //  IE 8 .\n            if (window.navigator.userAgent.indexOf(\"MSIE 8.0\") > -1 && window.navigator.userAgent.indexOf(\"Trident/4.0\") > -1) {\n                element.setAttribute(\"data-real-number\", newNum);\n            } else {\n                element.attr(\"data-real-number\", newNum);\n            }\n        } else {\n            //  dom.\n            throw new Error('Function \"setRealNumber\" in \"setNum\" Error: .');\n        }\n    })();\n\n    var _deltaNum = (newNum - currentNum);  // Definition: .\n\n    // Action:  deltaNum .\n    if (Math.abs(_deltaNum) <= 10) {\n        _setHTML(element, newNum);\n        return;\n    }\n\n    var _execTimes = Math.abs(Math.floor(_deltaNum / 5));  // Definition: .\n    if (_execTimes > 100) { _execTimes = 100; }  // _execTimes  100.\n\n    var _deltaPerTime = _deltaNum / _execTimes,  // .\n        _addCount = 0;  // .\n\n    // , .\n    //  element.timer .\n    element.numTimer && _clearNumTimer();\n\n    // : element.timer.\n    element.numTimer = setInterval(function () {\n        if (_addCount++ >= _execTimes) {\n            _setHTML(element, newNum);  // , .\n            element.numTimer ? _clearNumTimer() : void(0);  // .\n            return newNum;  // . ()\n        }\n        _setHTML(element, parseInt(currentNum + _deltaPerTime * _addCount, 10));\n    }, 10);\n\n    /* Internal Function goes below. */\n\n    // Definition:  innerHTML ,  jQuery .\n    function _setHTML(dom, content) {\n        if (Object.prototype.toString.call(dom).indexOf(\"Element\") > -1) {\n            // .\n            dom.innerHTML = content;\n        } else if (Object.prototype.toString.call(dom) === \"[object Object]\") {\n            //  jQuery .\n            //  IE 8 .\n            if (window.navigator.userAgent.indexOf(\"MSIE 8.0\") > -1 && window.navigator.userAgent.indexOf(\"Trident/4.0\") > -1) {\n                dom.innerHTML = content;\n            } else {\n                dom.html(content);\n            }\n        } else {\n            //  dom.\n            throw new Error('Function \"_setHTML\" in \"setNum\" Error: .');\n        }\n    }\n\n    // Definition:  innterHTML .\n    function _getHTML (dom) {\n        if (Object.prototype.toString.call(dom).indexOf(\"Element\") > -1) {\n            // .\n            return dom.innerHTML;\n        } else if (Object.prototype.toString.call(dom) === \"[object Object]\") {\n            //  jQuery .\n            //  IE 8 .\n            if (window.navigator.userAgent.indexOf(\"MSIE 8.0\") > -1 && window.navigator.userAgent.indexOf(\"Trident/4.0\") > -1) {\n                return dom.innerHTML;\n            } else {\n                return dom.html();\n            }\n        } else {\n            //  dom.\n            throw new Error('Function \"_getHTML\" in \"setNum\" Error: .');\n        }\n    }\n\n    // Definition: .\n    function _clearNumTimer () {\n        clearInterval(element.numTimer);\n        element.numTimer = null;\n    }\n\n}", "/*\n *  Timestamp Shorter By LancerComet at 12:17, 2016/1/7.\n *  # Carry Your World #\n *  ---\n *  Bilibili .\n */\n\nmodule.exports = timestampShorter;\n\nfunction timestampShorter (timestamp) {\n    var newTimeStamp = null;\n    newTimeStamp = timestamp.toString();\n    newTimeStamp = newTimeStamp.slice(0, newTimeStamp.length - 3);\n    newTimeStamp = parseInt(newTimeStamp, 10);\n    return newTimeStamp;\n};\n", "/*\n *  Variable Type Adjustment By LancerComet at 13:22, 2015/11/30.\n *  # Carry Your World #\n *  ---\n *  .\n *\n */\n\nmodule.exports = function (variable) {\n\n    var type = Object.prototype.toString.call(variable);\n    var htmlReg = /HTML.*.Element/;\n\n    if (type ===\"[object Object]\" && variable.jquery) {\n        return \"jQuery Object\";\n    } else if (type === \"[object Object]\") {\n        return \"Object\";\n    } else if (type === \"[object Number]\") {\n        return \"Number\";\n    } else if (type === \"[object String]\") {\n        return \"String\";\n    } else if (type === \"[object Array]\") {\n        return \"Array\";\n    } else if (type === \"[object Boolean]\") {\n        return \"Boolean\";\n    } else if (type === \"[object Function]\") {\n        return \"Function\";\n    } else if (type === \"[object Null]\") {\n        return \"null\";\n    } else if (type === \"[object Undefined]\") {\n        return \"undefined\";\n    } else if (type.match(htmlReg)) {\n        return \"HTML Element\";\n    } else if (type === \"[object HTMLCollection]\") {\n        return \"HTML Elements Collection\";\n    } else {\n        return null;\n    }\n\n};\n", "/*\n *  Live Public Service By LancerComet at 16:03, 2015/12/18.\n *  # Carry Your World #\n *  ---\n *  .\n */\n\nmodule.exports = liveService;\n\nfunction liveService () {\n\n    // Definition: .\n    var liveService = avalon.define({\n        $id: \"liveService\"\n    });\n\n\n    // Definition: .\n    // .\n    require(\"./live-service-update-currency\")(liveService);\n    require(\"./live-service-get-bp\")(liveService);\n\n}", "/*\n *  Get BP By LancerComet at 17:52, 2016/1/7.\n *  # Carry Your World #\n *  ---\n *   BP .\n *\n *  :\n *  ---\n *  , .\n *   variable ,  $watch .\n */\n\nmodule.exports = function (liveService, undefined) {\n    \"use strict\";\n\n\n};", "/*\n *  Live Currency Updating Event By LancerComet at 16:06, 2015/12/18.\n *  # Carry Your World #\n *  ---\n *  .\n */\nvar appConfig = require('../app-config/app-config');\nvar randomEmoji = require(\"../functions/func-random-emoji/random-emoji\");\n\nmodule.exports = function (liveService, undefined) {\n    \"use strict\";\n\n    // Definition: .\n    liveService.$watch(\"updateCurrency\", function (value) {\n\n        //  value ,  value .\n        if (value) {\n\n            if (value.gold !== null && value.gold !== undefined && !isNaN(value.gold)) { value.gold = parseInt(value.gold, 10); }\n            if (value.silver !== null && value.silver !== undefined && !isNaN(value.silver)) { value.silver = parseInt(value.silver, 10); }\n            if ((value.gold !== null && value.gold !== undefined && isNaN(value.gold)) || (value.silver !== null && value.silver !== undefined && isNaN(value.silver))) {\n                throw new Error(appConfig.consoleText.error + \"updateCurrency .\");\n            }\n            liveService.$fire(\"all!fillCurrency\", value);\n            return;\n        }\n\n\n        // ,  XHR .\n        $.ajax({\n            url: \"/user/getuserinfo\",\n            type: \"GET\",\n            data: {\n                ts: Date.now()\n            },\n            dataType: \"JSON\",\n            success: function (result) {\n                if (result.code != \"REPONSE_OK\") {\n                    console.log(appConfig.consoleText.error + \": \" + result.msg.toString());\n                    console.log(\",  \" + randomEmoji.sad());\n                    return;\n                }\n\n                result.data.silver = parseInt(result.data.silver, 10);\n                result.data.gold = parseInt(result.data.gold, 10);\n\n                if (isNaN(result.data.silver) || isNaN(result.data.gold)) {\n                    console.log(appConfig.consoleText.caution + \"!\");\n                    return;\n                }\n\n                liveService.$fire(\"all!fillCurrency\", {\n                    silver: result.data.silver,\n                    gold: result.data.gold,\n                    biliCoin: result.data.billCoin\n                });\n            },\n            error: function (result) {\n                throw new Error(appConfig.consoleText.error + \": .\")\n            }\n        });\n\n    });\n\n\n};\n\n\n", "/*\n *  Live On Stream on Hint Panel By LancerComet at 10:54, 2016/1/13.\n *  # Carry Your World #\n *  ---\n *  .\n */\n\nvar livePopup = require('../../../../common/components/live-widget/live-popup/live-popup');\nvar randomEmoji = require('../../../../common/functions/func-random-emoji/random-emoji');\n\nmodule.exports = function (adminFuncsCtrl) {\n    \"use strict\";\n\n    // Definition:  HTML .\n    var popupHTML = \"\";\n\n    // Definition: .\n    adminFuncsCtrl.$watch(\"showStreamCode\", function () {\n        if (parseInt(ISANCHOR, 10) !== 1) { return; }\n        adminFuncsCtrl.$fire(\"all!showLiveManageDialog\");\n    });\n\n};", "/*\n *  Live Admin Functions By LancerComet at 10:55, 2016.01.13.\n *  # Carry Your World #\n *  ---\n *  .\n *  , .\n */\n\nmodule.exports = function () {\n\n    var adminFuncsCtrl = avalon.define({\n        $id: \"adminFuncsCtrl\"\n    });\n\n    require(\"./functions/live-on-rtmp\")(adminFuncsCtrl);  //  RTMP .\n\n};", "/**\n * Created by fanfan on 2016/1/11.\n */\n\nvar view = avalon.define({\n    $id: \"adminManage\",\n    urls: {\n        list: \"/liveact/ajaxGetAdminList\",\n        manage: \"/liveact/admin\"\n    },\n    roomid: window.ROOMID,\n    iptName: \"\",                // \n    iptFlag: false,\n    listData: [],               // \n    tipMsg: \"\",\n    doms: {},\n    csses: {\n        iptName: \".ipt-name\"\n    },\n    init: function() {\n        this.$el = $(\"[data-content='adminManage']\");\n        this.getList();\n    },\n    setDoms: function() {\n        var $el = this.$el,\n            csses = this.csses;\n\n        this.doms = {\n            $iptName: $(csses.iptName, $el)\n        };\n    },\n    clickAddAdmin: function(e) {\n        if (view.clickAddAdmin.ing) {\n            return;\n        }\n        view.clickAddAdmin.ing = true;\n\n        if (!view.iptName) {\n            view.tipMsg = \"\";\n            view.iptFlag = false;\n            view.clickAddAdmin.ing = false;\n        } else {\n            view.iptFlag = true;\n            view.tipMsg = \"\";\n\n            view.add(function() {\n                view.clickAddAdmin.ing = false;\n            });\n        }\n    },\n    clickDel: function(e) {\n        if (view.clickDel.ing) {\n            return;\n        }\n        view.clickDel.ing = true;\n\n        var $e = $(e.target),\n            index = $e.parents(\"tr\").index();\n\n        view.del(index, function() {\n            view.clickDel.ing = false;\n        });\n    },\n    getList: function(cb) {\n        var self = this,\n            url = this.urls.list,\n            param = {\n                roomid: view.roomid\n            };\n\n        $.ajax({\n            type: \"post\",\n            url: url,\n            data: param,\n            dataType: \"json\",\n            success: function(data) {\n                view.listData = data.data;\n\n                cb && cb();\n            }\n        })\n    },\n    manage: function(uname, type, successCb, failCb) {\n        var self = this,\n            url = this.urls.manage,\n            param = {\n                uname: uname,\n                roomid: self.roomid,\n                type: type\n            };\n\n        $.ajax({\n            type: \"post\",\n            url: url,\n            data: param,\n            dataType: \"json\",\n            success: function(data) {\n\n                if (data.code === 0) {\n                    successCb && successCb(data.data);\n                } else {\n                    failCb && failCb(data);\n                }\n            },\n            error: function(data) {\n                failCb && failCb(data);\n            }\n        });\n    },\n    add: function(cb) {\n        var uname = view.iptName;\n\n        this.manage(uname, \"add\", function(data) {\n            view.listData.unshift(data);\n            view.iptName = \"\";\n            view.tipMst = \"\";\n            liveToast(view.$el.find(\".btn-add\")[0], \"\", \"success\", true);\n            cb && cb();\n        }, function(data) {\n            view.tipMsg = data.msg || \"\";\n            cb && cb();\n        })\n    },\n    del: function(index, cb) {\n        var uname = view.listData[index].userinfo.uname;\n\n        this.manage(uname, \"del\", function() {\n            liveToast(view.$el.find(\".item\").eq(index)[0], \"\", \"success\", true);\n            view.listData.splice(index, 1);\n            cb && cb();\n        }, function(data) {\n            view.tipMsg = data.msg;\n            db && cb();\n        });\n    }\n});\n\nview.init();\n\nmodule.exports = view;", "/**\n * Created by fanfan on 2016/1/11.\n */\n\nrequire('perfect-scrollbar/jquery')($);\nvar view = avalon.define({\n    $id: \"blackManage\",\n    $el: [],\n    urls: {\n        list: \"/liveact/ajaxGetBlockList\",\n        add: \"/liveact/room_block_user\",\n        del: \"/liveact/del_room_block_user\"\n    },\n    roomid: window.ROOMID,\n    iptName: \"\",                // \n    iptTime: \"\",                // \n    listData: [],               // \n    tipName: \"\",\n    tipTime: \"\",\n    nowPage: 0,\n    iptNameFlag: true,\n    iptTimeFlag: true,\n    getListIng: false,\n    doms: {},\n    init: function(opt) {\n        this.$el = opt.$el;\n        //this.getList();\n        avalon.scan( this.$el[0], view);\n        this.bindScrollPage();\n\n    },\n    setDoms: function() {\n        var $el = this.$el,\n            csses = this.csses;\n\n        this.doms = {\n            $iptName: $(csses.iptName, $el)\n        };\n    },\n    refresh: function() {\n        this.nowPage = 0;\n        this.listData = [];\n        this.bindScrollPage();\n        this.getList();\n\n    },\n    clickAdd: function() {\n        if (view.clickAdd.ing) {\n            return;\n        }\n\n        view.clickAdd.ing = true;\n\n        var uname = view.iptName,\n            time = view.iptTime,\n            flag =  true;\n\n        if (!uname) {\n            view.tipName = \"\";\n            flag = false;\n            view.iptNameFlag = false;\n        } else {\n            view.tipName = \"\";\n            view.iptNameFlag = true;\n        }\n\n        if (!time) {\n            view.tipTime = \"\";\n            flag = false;\n            view.iptTimeFlag = false;\n        } else {\n            if (/[^0-9]/.test(time) || time > 72 || time < 1) {\n                view.tipTime = \"(1-72)\"\n                flag = false;\n                view.iptTimeFlag = false;\n            } else {\n                view.tipTime = \"\"\n                view.iptTimeFlag = true;\n            }\n        }\n\n        if (flag) {\n            view.add(function() {\n                view.clickAdd.ing = false;\n            });\n        } else {\n            view.clickAdd.ing = false;\n        }\n\n\n    },\n    clickDel: function(e) {\n        if (view.clickDel.ing) {\n            return;\n        }\n        view.clickDel.ing = true;\n\n        var index = $(e.target).parents(\"tr\").index();\n\n        view.del(index, function() {\n            view.clickDel.ing = false;\n        });\n    },\n    getList: function(successCb, failCb) {\n        if (this.getListIng) {\n            return;\n        }\n\n        this.getListIng = true;\n\n        var self = this,\n            url = this.urls.list,\n            param = {\n                roomid: view.roomid,\n                page: view.nowPage + 1\n            };\n\n        $.ajax({\n            type: \"post\",\n            url: url,\n            data: param,\n            dataType: \"json\",\n            success: function(data) {\n                self.getListIng = false;\n                if (data.code === 0) {\n                    if (data.data.length > 0) {\n                        view.nowPage  = view.nowPage + 1;\n                        view.listData = view.listData.concat(data.data);\n                    }\n                    successCb && successCb(data.data);\n                } else {\n                    failCb && failCb();\n                }\n\n\n            },\n            error: function() {\n                self.getListIng = false;\n                failCb && failCb();\n            }\n        })\n    },\n    add: function(cb) {\n        var url = view.urls.add,\n            param = {\n                roomid: view.roomid,\n                uname: view.iptName,\n                type: 1,\n                hour: view.iptTime\n            };\n\n        $.ajax({\n            type: \"post\",\n            url: url,\n            data: param,\n            dataType: \"json\",\n            success: function(data) {\n                if (data.code === 0) {\n                    view.listData.unshift(data.data);\n                    view.tipName = \"\";\n                    view.iptName = \"\";\n                    view.iptTime = \"\";\n\n                    liveToast(view.$el.find(\".btn-add\")[0], \"\", \"success\", true);\n                } else {\n                    view.tipName = data.msg;\n                }\n\n                cb && cb();\n            },\n            error: function() {\n                cb && cb();\n            }\n        });\n    },\n    clickHide: function() {\n        view.$el.parents(\"[panel-type='roomManage']\").removeClass(\"open\")\n    },\n    del: function(index, cb) {\n        var id = this.listData[index].id,\n            url = view.urls.del,\n            param = {\n                roomid: view.roomid,\n                id: id\n            };\n\n        $.ajax({\n            type: \"post\",\n            url: url,\n            data: param,\n            dataType: \"json\",\n            success: function(data) {\n                if (data.code === 0) {\n                    liveToast(view.$el.find(\".item\").eq(index)[0], \"\", \"success\", true);\n                    view.listData.splice(index, 1);\n                } else {\n                    view.tipName = data.msg;\n                }\n                cb && cb();\n            },\n            error: function() {\n                cb && cb();\n            }\n        });\n    },\n    bindScrollPage: function() {\n        this.unbindScrollPage();\n\n        var tid = 0,\n            $list = view.$el.find(\".manage-list\");\n\n\n            $list.bind(\"scroll\", function() {\n                if (tid) {\n                    clearTimeout(tid)\n                }\n\n                tid = setTimeout(function() {\n                    if ($list[0].scrollHeight - $list[0].scrollTop - $list[0].clientHeight  <= 0 ) {\n\n                        if (view.getListIng) {\n                            return;\n                        }\n\n                        view.getList(function(data) {\n                            if (data.length === 0) {\n                                view.unbindScrollPage();\n                            }\n                        });\n                    }\n\n                }, 50);\n            });\n\n    },\n    unbindScrollPage: function() {\n        view.$el.find(\".manage-list\").unbind(\"scroll\");\n    }\n});\n\n\n\n$(function() {\n    $(\".black-manage .manage-list\").perfectScrollbar()\n});\n\n\nmodule.exports = function(opt) {\n    $(function() {\n        view.init(opt);\n    });\n    return view;\n}", "(function (global){\n/**\n * Created by fanfan on 2016/1/11.\n */\n\nvar liveManageView = require(\"./live-manage.js\");\nvar blackManageView = require(\"./black-manage.js\")({$el: $(\"[data-content='blackManage']\", $(\"#live-info-manage\"))});\nvar adminManageView = require(\"./admin-manage.js\");\n\nvar manageView = avalon.define({\n    $id: \"liveInfoManage\",\n    curTarget: \"liveManage\",\n    isAdmin: false,\n    isOpen: false,\n    $el: \"#live-info-manage\",\n    $dialog: \".live-info-manage-dialog\",\n    coverNum: 0,\n    coverListData: [],\n    allowUploadCoverTime: 0,\n    init: function() {\n        var self = this;\n        this.$el = $(this.$el);\n        this.$dialog = this.$el.find(this.$dialog);\n        this.bindEvt();\n        avalon.scan(this.$el[0], manageView);\n        this.setWatch();\n\n    },\n\n    /**\n     * \n     * */\n    setWatch: function() {\n        var self = this;\n\n        this.$watch(\"showLiveManageDialog\", function(opt) {\n            opt = opt || {};\n            if (opt.blackName) {\n                blackManageView.iptName = opt.blackName;\n            }\n            self.curTarget = opt.curTarget || \"liveManage\";\n            self.show();\n        });\n    },\n    clickTab: function(e) {\n        var $tab = $(e.target),\n            target = $tab.data(\"target\");\n\n        if (target !== manageView.curTarget) {\n            manageView.curTarget = target;\n\n            if (target === \"blackManage\") {\n                blackManageView.refresh();\n            }\n        }\n    },\n    show: function() {\n        var self = this;\n        // \n        self.getCoverList(function (result) {\n            if (result.code == 0) {\n                self.$el.addClass(\"open\");\n                self.setPosition();\n            }\n        });\n    },\n    hide: function(e) {\n        this.$el.removeClass(\"open\")\n    },\n    clickHide: function() {\n        manageView.hide();\n    },\n    setPosition: function() {\n        var allWidth = document.documentElement.clientWidth,\n            allHeight = document.documentElement.clientHeight,\n            dialogWidth = this.$dialog.width(),\n            dialogHeight = this.$dialog.height(),\n            top,\n            left,\n            cssData;\n\n\n        top = allHeight / 2 -  dialogHeight / 2;\n        left = allWidth / 2 - dialogWidth / 2;\n\n        if (top < 0) {\n            top = top * 2\n\n        }\n\n        cssData = {\n            position: \"fixed\",\n            zIndex: 99,\n            left: left,\n            top: top\n        }\n\n        this.$dialog.css(cssData)\n    },\n    bindEvt: function() {\n        var resizeTid = 0,\n            self = this;\n\n        $(window).resize(function() {\n            if (resizeTid) {\n                clearTimeout(resizeTid);\n            }\n\n            resizeTid = setTimeout(function() {\n                if (self.$el.hasClass(\"open\")) {\n                    self.setPosition();\n                }\n            }, 50);\n        });\n    },\n\n    /**\n     * \n     */\n\n    // \n    getCoverList: function (callback) {\n        this.$el = $(this.$el);\n        $.ajax({\n            type: \"GET\",\n            data: {\n                roomid: global.ROOMID\n            },\n            url: \"/live/getMasterInfo\",\n            dataType: \"JSON\",\n            cache: false,\n            success: function (result) {\n                if (result.code == 0) {\n                    manageView.coverNum = result.data.coverNum;\n                    manageView.allowUploadCoverTime = result.data.allowUploadCoverTime;\n                    manageView.coverListData = result.data.coverList;  // \n                    avalon.scan(manageView.$el.find(\".cover-list\")[0], manageView);  // Scan \n                }\n                callback && callback(result);\n            }\n        });\n    },\n\n    // \n    setCover: function (event ,picId, callback) {\n        $.ajax({\n            type: \"POST\",\n            data: {\n                roomid: global.ROOMID,\n                type: \"cover\",\n                pic_id: picId\n            },\n            url: \"/liveact/changePic\",\n            dataType: \"JSON\",\n            success: function (result) {\n                if (result.code == 0) {\n                    liveToast($(event.target), \"\", \"success\", true);\n                    manageView.getCoverList();\n                } else {\n                    liveToast($(event.target), result.msg, \"info\", true);\n                }\n            }\n        });\n    },\n\n    // \n    delCover: function (event, picId, callback) {\n        livePopup({\n            title: \"~\",\n            html: '<p></p>',\n            type: \"action\",\n            width: \"350\",\n            button: {\n                confirm: \"\",\n                cancel: \"\"\n            },\n            onConfirm: function () {\n                var self = this;\n                $.ajax({\n                    type: \"POST\",\n                    data: {\n                        roomid: global.ROOMID,\n                        type: \"cover\",\n                        pic_id: picId\n                    },\n                    url: \"/liveact/deletePic\",\n                    dataType: \"JSON\",\n                    success: function (result) {\n                        if (result.code == 0) {\n                            manageView.getCoverList();\n                            self.done();\n                        } else {\n                            liveToast($(event.target), result.msg, \"info\", true);\n                        }\n                    }\n                });\n            }\n        });\n\n    },\n\n    // \n    uploadClick: function (event, coverNum) {\n        if (manageView.allowUploadCoverTime != 0) {\n            liveToast($(event.target), \"()\" + manageView.allowUploadCoverTime, \"info\", true);\n            return;\n        } else if (coverNum <= 0) {\n            liveToast($(event.target), \"\", \"info\", true);\n        } else {\n            $(\"#cover-img-input\").click();\n        }\n    },\n\n    // \n    uploadCoverImg: function () {\n        var $bgImgInput = $(\"#cover-img-input\");\n        if($bgImgInput[0].files[0].size > 409600) {\n            liveToast($(\"#cover-upload-icon\"), \"50K\", \"info\", true);\n            return;\n        }\n        $(\"#coverFormFile\").submit();\n    },\n\n    /**\n     * \n     */\n\n    getMasterInfo: function (callback) {\n        $.ajax({\n            type: \"GET\",\n            data: {\n                roomid: global.ROOMID\n            },\n            url: \"/live/getMasterInfo\",\n            dataType: \"JSON\",\n            cache: false,\n            success: function (result) {\n                if (result.code == 0) {\n                    manageView.coverNum = result.data.coverNum;\n                    manageView.allowUploadCoverTime = result.data.allowUploadCoverTime;\n                    manageView.coverListData = result.data.coverList;  // \n                    avalon.scan(manageView.$el.find(\".cover-list\")[0], manageView);  // Scan \n                }\n                callback && callback(result);\n            }\n        });\n    }\n\n});\n\n$(function() {\n    manageView.init();\n\n    // Upload Success\n    window.roomCoverUploadSuccess = function(data) {\n        var data = JSON.parse(data);\n        if (data.code == 0) { // Success\n            manageView.getCoverList();\n        } else { // Error\n            liveToast($(\"#cover-upload-icon\"), data.msg, \"info\", true);\n        }\n    };\n\n});\n\n\n\nmodule.exports = function() {\n    return manageView\n}\n}).call(this,typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})", "/**\n * Created by fanfan on 2016/1/11.\n */\n\nvar randomEmoji = require('../../../../common/functions/func-random-emoji/random-emoji');\nvar view = avalon.define({\n    $id: \"liveManage\",\n    urls: {\n        liveInfo: \"/liveact/getrtmp\"\n    },\n    $el: [],\n    rtmpUrl: \"\",\n    liveCode: \"\",\n    init: function() {\n        view.$el = $(\"[data-content='liveManage']\");\n        this.$watch(\"showLiveManageDialog\", function() {\n            if (!view.rtmpUrl) {\n                view.getData(function(data) {\n                    view.successCallback(data);\n                });\n            }\n        });\n\n        this.bindEvt();\n    },\n    successCallback: function(data) {\n        view.rtmpUrl = data.data.addr;\n        view.liveCode = data.data.code;\n    },\n\n\n    getData: function(cb) {\n        var url = this.urls.liveInfo;\n\n        $.ajax({\n            type: \"post\",\n            url: url,\n            data: { roomid: window.ROOMID },\n            dataType: \"json\",\n            success: function(data) {\n                cb && cb(data)\n            }\n        });\n    },\n    bindEvt: function() {\n        if (typeof ZeroClipboard === \"undefined\") {\n            $.getScript(\"http://static.hdslb.com/live-static/libs/zero-clipboard/ZeroClipboard.min.js\", function() {\n                $(\".btn-copy\", view.$el).each(function() {\n                    var btnDom = $(this)[0],\n                        zero = new ZeroClipboard(btnDom);\n\n                    zero.on(\"ready\", function (readyEvent) {\n                        zero.on(\"aftercopy\", function (event) { liveToast(btnDom, \"\" + randomEmoji.happy(), \"success\", false); });\n                    });\n\n\n                });\n            });\n        }\n\n    }\n});\n\n\n$(function() {\n    view.init();\n});\n\nmodule.exports = view;", "/**\n * Created by fanfan on 2016/1/13.\n */\n\n\n\nvar view = avalon.define({\n    $id: \"roomAdmin\",\n    isAdmin: true,\n    $el: [],\n    init: function () {\n        var self = this;\n\n        this.$el = $(\"#room-adminer\");\n        this.$dialog = this.$el.find(\".live-info-manage-dialog\");\n\n        this.bindEvt();\n\n        avalon.scan(this.$el[0]);\n        this.$watch(\"showBlackDialog\", function(opt) {\n            opt = opt || {};\n            if (opt.blackName) {\n                blackManageView.iptName = opt.blackName\n            }\n            self.show();\n        })\n    },\n    show: function () {\n        this.$el.addClass(\"open\");\n        this.setPosition();\n    },\n    clickHide: function() {\n        view.$el.removeClass(\"open\")\n    },\n    hide: function(e) {\n        this.$el.removeClass(\"open\")\n    },\n    setPosition: function() {\n        var allWidth = document.documentElement.clientWidth,\n            allHeight = document.documentElement.clientHeight,\n            dialogWidth = this.$dialog.width(),\n            dialogHeight = this.$dialog.height(),\n            top,\n            left,\n            cssData;\n\n\n        top = allHeight / 2 -  dialogHeight / 2;\n        left = allWidth / 2 - dialogWidth / 2;\n\n        if (top < 0) {\n            top = top * 2\n\n        }\n\n        cssData = {\n            position: \"fixed\",\n            zIndex: 1100,\n            left: left,\n            top: top\n        }\n\n        this.$dialog.css(cssData)\n    },\n    bindEvt: function() {\n        var resizeTid = 0,\n            self = this;\n\n        $(window).resize(function() {\n            if (resizeTid) {\n                clearTimeout(resizeTid);\n            }\n\n            resizeTid = setTimeout(function() {\n                if (self.$el.hasClass(\"open\")) {\n                    self.setPosition();\n                }\n            }, 50);\n        });\n    }\n\n});\n\n\nview.init();\n\nvar blackManageView = require(\"./black-manage.js\")({\n    $el: $(\"[data-content='blackManage']\", $(\"#room-adminer\"))\n});\n\nmodule.exports = function() {\n    return view;\n}", "/**\n * Created by fanfan on 2016/1/11.\n */\n\n\nvar view = avalon.define({\n    $id: \"roomInfoEdit\",\n    $el:\"#room-info-edit\",\n    $dialog: \".room-info-edit-dialog\",\n    $mask: [],\n    defData: {},                // \n    nowData: {},\n    curBgTarget: \"default\",     //  Tab: default custom\n    bgListData: [],             // \n    bgNum: 0,                   // \n    allowUploadBgTime: 0,       // \n    allowUpdateAreaTime: 0,     // \n    maxNameCount: 20,\n    nameCount: 0,\n    tipMsg:\"\",                  // \n    nowArea: \"\",                // \n    nowAreaID: \"\",              // id\n    maxTag: 6,                  // \n    tag: [],                    // \n    recTag: [],                 // \n    addTagName: \"\",             // \n    area: \"\",\n    des: \"\",\n    roomName: \"\",               // \n    defTagAddTip: \"\",\n    partListShow: false,        // \n    init: function() {\n        var self = this;\n\n        this.$el = $(this.$el);\n        this.$dialog = this.$el.find(this.$dialog);\n\n        this.defData = this.getDefData();\n\n        this.roomName = this.defData.roomName;\n        this.des = this.defData.des;\n        this.nowArea = this.defData.nowArea;\n        this.nowAreaID = this.defData.nowAreaID;\n        this.tag = this.defData.tag;\n        this.recTag = this.defData.recTag;\n        this.nameCount = this.getNameCount(this.roomName);\n\n        avalon.scan(view.$el[0], view);\n\n        this.bindEvt();\n        this.setWatch();\n\n    },\n    setWatch: function() {\n        var self = this;\n\n        this.$watch(\"showRoomEditDialog\", function(e) {\n            self.show();\n        });\n    },\n    getDefData: function() {\n        var defData,\n            tags = $(\".tag-box\").attr(\"tags\"),\n            recTag = $(\"[recommendTags]\").attr(\"recommendTags\");\n\n\n        defData = {\n            roomName: $(\".ipt-room-name\").val(),\n            des: $(\"#dis-redactor-contenet\").val(),\n            nowArea: $(\".part-name\").text(),\n            nowAreaID: $(\".part-name\").data(\"value\"),\n            tag: tags ? tags.split(\",\") :  [],\n            recTag: recTag ? recTag.split(\",\") :  []\n        };\n\n        return defData;\n    },\n    setText: function() {\n        $('#dis-redactor-contenet').redactor({\n            lang: 'zh_cn',\n            minHeight: 125,\n            autoresize: false,\n            buttons: ['html', 'formatting', 'bold', 'italic', 'deleted',\n                'unorderedlist', 'orderedlist', 'outdent', 'indent',\n                'file', 'table', 'link', 'fontcolor', 'backcolor', 'alignment', 'horizontalrule'\n            ]\n        });\n    },\n    keyupRoomName: function(e) {\n        var  $text = $(e.target),\n            len = view.getNameCount($text.val()),\n            newText = \"\";\n\n\n        if (len > view.maxNameCount) {\n            len = 20;\n            view.roomName = newText = view.subStringC(view.roomName, view.maxNameCount * 2);\n            $text.val(newText);\n            e.preventDefault();\n        }\n\n        view.nameCount = len;\n    },\n    getNameCount: function(text) {\n        var len =  Math.ceil(text.replace(/[^\\x00-\\xff]/g, '__').length / 2);\n\n        return len;\n    },\n    subStringC: function(text, subLen) {\n        var subIrr = 0,\n            subIndex,\n            i = 0;\n\n        for (i; i < text.length; i++) {\n            if (/[^\\x00-\\xff]/.test(text[i])) {\n                subIrr = subIrr + 2\n            } else {\n                subIrr = subIrr + 1\n            }\n\n            if (subIrr > subLen) {\n                subIndex = i - 1;\n                break;\n            } else if (subIrr === subLen) {\n                subIndex = i;\n            }\n        }\n\n        return text.substring(0, subIndex + 1);\n    },\n    show: function() {\n        var self = this;\n        // \n        self.getMasterInfo(function (result) {\n            if (result.code == 0) {\n                self.$el.addClass(\"open\");\n                self.setPosition();\n            }\n        });\n    },\n    checkTag: function(tagName) {\n        if (view.tag.length >= view.maxTag) {\n            view.tipMsg = \" \" + view.maxTag + \" \"\n            return false;\n        }\n\n        if ($.inArray(tagName, view.tag) > -1) {\n            view.tipMsg = \"\"\n            return false;\n        }\n\n        if (!tagName) {\n            view.tipMsg = \"\"\n            return false;\n        }\n\n        return true;\n    },\n    keyupInput: function(e) {\n        var tag;\n\n        if (e.keyCode === 13) {\n            tag = $.trim(view.addTagName);\n\n            if (view.checkTag(tag)) {\n                view.tag.push(view.addTagName);\n                view.addTagName= \"\";\n            }\n\n        }\n    },\n\n\n    /**\n     * \n     * */\n    clickRecTag: function(e) {\n        var $tag = $(e.target),\n            tagName = $.trim($tag.text()),\n            index = $tag.index();\n\n        if (view.checkTag(tagName)) {\n            view.tag.push(tagName);\n            view.recTag.splice(index, 1)\n        }\n    },\n    clickDelTag: function(e) {\n        var $tag = $(e.target),\n            index = $tag.index();\n\n        view.tag.splice(index, 1);\n        view.tipMsg = \"\"\n\n    },\n    clickHide: function() {\n        view.hide();\n    },\n    clickCancel: function() {\n        view.hide();\n    },\n    hide: function() {\n        var self = this;\n\n        this.$el.removeClass(\"open\");\n    },\n    setPosition: function() {\n        var allWidth = document.documentElement.clientWidth,\n            allHeight = document.documentElement.clientHeight,\n            dialogWidth = this.$dialog.width(),\n            dialogHeight = this.$dialog.height(),\n            top,\n            left,\n            cssData;\n\n\n        top = allHeight / 2 -  dialogHeight / 2;\n        left = allWidth / 2 - dialogWidth / 2;\n\n        if (top < 0) {\n            top = top * 2\n\n        }\n\n        cssData = {\n            position: \"fixed\",\n            zIndex: 99,\n            left: left,\n            top: top\n        }\n\n        this.$dialog.css(cssData)\n    },\n    bindEvt: function() {\n        var resizeTid = 0,\n            self = this;\n\n        $(window).resize(function() {\n            if (resizeTid) {\n                clearTimeout(resizeTid);\n            }\n\n            resizeTid = setTimeout(function() {\n                if (self.$el.hasClass(\"open\")) {\n                    self.setPosition();\n                }\n            }, 50);\n        });\n    },\n    clickPartHandle: function(e) {\n        if (view.allowUpdateAreaTime != 0) {\n            liveToast($(e.target), \"\" + view.allowUpdateAreaTime + \" \", \"info\", true);\n        } else {\n            view.partListShow = !view.partListShow;\n        }\n    },\n\n    /**\n     * tag\n     * */\n    getRecTag: function(areaID) {\n        var url = \"/liveact/ajaxGetAreaTags\";\n\n        $.ajax({\n            type: \"get\",\n            data: {\n                area: areaID\n            },\n            url: url,\n            dataType: \"json\",\n            success: function(data) {\n                view.recTag = data.data;\n            }\n        });\n    },\n    clickPartItem: function(e) {\n        var $e = $(e.target),\n            id = $e.data(\"value\"),\n            text = $e.text();\n\n        view.nowArea = text;\n        view.nowAreaID = id;\n\n        view.getRecTag(id);\n\n        view.partListShow = false;\n    },\n    setData: function(param) {\n        $.ajax({\n            type: \"post\",\n            url: \"/liveact/edit_room\",\n            data: param,\n            dataType: \"json\",\n            success: function(data) {\n\n                if (data.code === 0) {\n                    liveToast(view.$el.find(\".btn-ok\")[0], \"\", \"success\", true);\n\n                    location.reload();\n                } else {\n                    view.tipMsg = data.msg;\n                }\n            }\n\n        });\n    },\n\n    /**\n     * \n     */\n\n    // \n    getBgList: function (callback) {\n        this.$el = $(this.$el);\n        $.ajax({\n            type: \"GET\",\n            data: {\n                roomid: window.ROOMID\n            },\n            url: \"/live/getMasterInfo\",\n            dataType: \"JSON\",\n            cache: false,\n            success: function (result) {\n                if (result.code == 0) {\n                    view.bgNum = result.data.bgNum;\n                    view.allowUploadBgTime = result.data.allowUploadBgTime;\n                    view.bgListData = result.data.bgList;  // \n                    avalon.scan(view.$el.find(\".cover-list\")[0], view);  // Scan \n                }\n                callback && callback(result);\n            }\n        });\n    },\n\n    // \n    setBg: function (event ,picId, callback) {\n        $.ajax({\n            type: \"POST\",\n            data: {\n                roomid: window.ROOMID,\n                type: \"bg\",\n                pic_id: picId\n            },\n            url: \"/liveact/changePic\",\n            dataType: \"JSON\",\n            success: function (result) {\n                if (result.code == 0) {\n                    liveToast($(event.target), \"\", \"success\", true);\n                    view.getBgList();\n                } else {\n                    liveToast($(event.target), result.msg, \"info\", true);\n                }\n            }\n        });\n    },\n\n    // \n    setDefBg: function (event ,bkId, callback) {\n        $.ajax({\n            type: \"POST\",\n            data: {\n                roomid: window.ROOMID,\n                bg_id: bkId\n            },\n            url: \"/liveact/change_bg\",\n            dataType: \"JSON\",\n            success: function (result) {\n                if (result.code == 0) {\n                    liveToast($(event.target), \"\", \"success\", true);\n                    $(\".default-cover-list .cover-item\").removeClass(\"current\").addClass(\"operable\");\n                    $(\".default-cover-list .id-\" + bkId).removeClass(\"operable\").addClass(\"current\");\n                } else {\n                    liveToast($(event.target), result.msg, \"info\", true);\n                }\n            }\n        });\n    },\n\n    // \n    delBg: function (event, picId, callback) {\n        livePopup({\n            title: \"~\",\n            html: '<p></p>',\n            type: \"action\",\n            width: \"350\",\n            button: {\n                confirm: \"\",\n                cancel: \"\"\n            },\n            onConfirm: function () {\n                var self = this;\n                $.ajax({\n                    type: \"POST\",\n                    data: {\n                        roomid: window.ROOMID,\n                        type: \"bg\",\n                        pic_id: picId\n                    },\n                    url: \"/liveact/deletePic\",\n                    dataType: \"JSON\",\n                    success: function (result) {\n                        if (result.code == 0) {\n                            view.getBgList();\n                            self.done();\n                        } else {\n                            liveToast($(event.target), result.msg, \"info\", true);\n                        }\n                    }\n                });\n            }\n        });\n\n    },\n\n    // \n    uploadClick: function (event, bgNum) {\n        if (view.allowUploadBgTime != 0) {\n            liveToast($(event.target), \"()\" + view.allowUploadBgTime, \"info\", true);\n            return;\n        } else if (bgNum <= 0) {\n            liveToast($(event.target), \"\", \"info\", true);\n        } else {\n            $(\"#bg-img-input\").click();\n        }\n    },\n\n    // \n    uploadBgImg: function () {\n        var $bgImgInput = $(\"#bg-img-input\");\n        if($bgImgInput[0].files[0].size > 4096000) {\n            liveToast($(\"#bg-upload-icon\"), \"500K\", \"info\", true);\n            return;\n        }\n        $(\"#bgFormFile\").submit();\n    },\n\n    //  Tab \n    clickTab: function(e) {\n        var $tab = $(e.target),\n            target = $tab.data(\"target\");\n\n        //  Tab \n        if (target == \"custom\") {\n            view.getMasterInfo();\n        }\n\n        if (target !== view.curBgTarget) {\n            view.curBgTarget = target;\n        }\n    },\n\n    /**\n     * \n     */\n\n    getMasterInfo: function (callback) {\n        $.ajax({\n            type: \"GET\",\n            data: {\n                roomid: window.ROOMID\n            },\n            url: \"/live/getMasterInfo\",\n            dataType: \"JSON\",\n            cache: false,\n            success: function (result) {\n                if (result.code == 0) {\n                    view.bgNum = result.data.bgNum;\n                    view.allowUpdateAreaTime = result.data.allowUpdateAreaTime;\n                    view.allowUploadBgTime = result.data.allowUploadBgTime;\n                    view.maxTag = result.data.tagsNum;\n                    view.bgListData = result.data.bgList;  // \n                    avalon.scan(view.$el.find(\".cover-list\")[0], view);  // Scan \n                }\n                callback && callback(result);\n            }\n        });\n    },\n\n    /**\n     * \n     */\n    clickSubmit: function() {\n        if (view.getNameCount(view.roomName) > view.maxNameCount) {\n\n        }\n\n        if (!view.roomName) {\n            view.tipMsg = \"\";\n            return;\n        }\n\n        if (view.nowAreaID == -1) {\n            view.tipMsg = \"\";\n            return;\n        }\n        var param = view.getAllData();\n\n        view.setData(param);\n    },\n    getAllData: function() {\n        var self = this,\n            tagStr;\n\n        tagStr = this.tag.join(\",\");\n\n\n        return {\n            tags: tagStr,\n            title: self.roomName,\n            description: self.des,\n            roomid: window.ROOMID,\n            area: self.nowAreaID\n        }\n    }\n});\n\n// \n(function() {\n    var staticUrl = \"http://static.hdslb.com/live-static\";\n\n    $.getScript(staticUrl + \"/libs/redactor/redactor-8.2.4.js\", function() {\n        $.getScript(staticUrl + \"/libs/redactor/redactor-8.2.4.zh_cn.js\", function() {\n            view.setText();\n        });\n    });\n\n    $(\"body\").append('<link rel=\"stylesheet\" href=\"http://static.hdslb.com/css/redactor-8.2.4.css\">');\n\n    // Upload Success\n    window.roomBgUploadSuccess = function(data) {\n        var data = JSON.parse(data);\n        if (data.code == 0) { // Success\n            view.getBgList();\n        } else { // Error\n            liveToast($(\"#bg-upload-icon\"), data.msg, \"info\", true);\n        }\n    };\n})();\n\n\n\n$(function() {\n    view.init();\n});\n\nmodule.exports = function() {\n    return view;\n};", "/**\n * //\n * @author fanfan\n *\n * */\n\nmodule.exports = function (userInfo) {\n\n    if (userInfo.ISANCHOR) {\n        require(\"./javascripts/live-info-manage.js\");       // \n        require(\"./javascripts/room-info-edit.js\");         // \n    }\n\n    if (userInfo.ISADMIN == 1 && userInfo.ISANCHOR != 1) {\n        require(\"./javascripts/room-admin.js\");             // \n    }\n\n};", "/*\n *  Background Changer by LancerComet at 14:36, 2016/01/18.\n *  # Carry Your World #\n *  ---\n *\n *  :\n *  ---\n *  .\n *   Avalon.\n *\n */\n\nvar liveToast = require('../../../../../common/components/live-widget/live-toast/live-toast');\nvar randomEmoji = require('../../../../../common/functions/func-random-emoji/random-emoji');\n\nmodule.exports = function (window) {\n\n    if (!window.ISANCHOR) {\n        $(\"#bk-changers\").remove();\n        return;\n    }\n\n    $(function () {\n        // Action: .\n        $(\"#bk-changers\").show().on(\"click\", \".changer\", function (event) {\n            var $this = $(this);\n            var bkId = $this.attr(\"data-bk-id\");\n\n            // .\n            $.ajax({\n                url: \"/liveact/change_bg\",\n                type: \"POST\",\n                data: {\n                    roomid: window.ROOMID,\n                    bg_id: bkId\n                },\n                dataType: \"JSON\",\n                success: function (result) {\n                    if (result.code != 0) {\n                        liveToast($this, result.msg + randomEmoji.sad(), \"caution\");\n                        return;\n                    }\n                    liveToast($this, \"\" + randomEmoji.happy(), \"success\");\n                    $this.addClass(\"active\").siblings(\".changer\").removeClass(\"active\");\n                    $this = bkId = null;\n                },\n                error: function (xhrObj) {\n                    liveToast($this, \",  \" + randomEmoji.sad(), \"caution\");\n                }\n            });\n\n        });\n    });\n\n\n};", "/*\n *  Chat Controller Panel By LancerComet at 11:11, 2015/12/25.\n *  # Carry Your World #\n *  ---\n *  .\n */\n\nvar lazyInit = require('../../../../../common/functions/func-avalon-lazy-init/lazy-init');\nvar liveQuickLogin = require('../../../../../common/functions/func-live-quick-login/live-quick-login');\nvar liveToast = require('../../../../../common/components/live-widget/live-toast/live-toast');\nvar randomEmoji = require('../../../../../common/functions/func-random-emoji/random-emoji');\n\nmodule.exports = function () {\n    \"use strict\";\n\n    // Definition: .  Flash .\n    var danmuColor = 0xffffff;\n\n    avalon.ready(function () {\n\n        // Definition: .\n        var chatCtrlPanelCtrl = avalon.define({\n            $id: \"chatCtrlPanelCtrl\",\n\n            // .\n            chatScrollLocked: false,\n\n            // .\n            danmuSend: {\n                data: \"\",\n                maxLength: 20,\n                send: function (event) {\n                    if (event.type && event.type === \"keyup\" && event.keyCode !== 13) {\n                        return;\n                    }\n                    chatCtrlPanelCtrl.$fire(\"sendDanmu\", event.target || event.srcElement);\n                }\n            },\n\n            // .\n            doms: {\n                emojiPanel: false,\n                danmuColor: false\n            },\n\n            // .\n            danmuCtrl: {\n                emoji: function () {\n                    chatCtrlPanelCtrl.doms.emojiPanel = true;\n                    setTimeout(function () {\n                        $(window).on(\"click\", closeEmojiPanel);\n                    }, 1)\n                },\n\n                hotWords: function () {\n\n                },\n\n                color: function () {\n                    chatCtrlPanelCtrl.doms.danmuColor = !chatCtrlPanelCtrl.doms.danmuColor;\n                    setTimeout(function () {\n                        $(window).on(\"click\", closeDanmuColorPanel);\n                    }, 1);\n                },\n\n                empty: function (event) {\n                    liveToast(event.target || event.srcElement, \" \" + randomEmoji.helpless(), \"success\");\n                    chatCtrlPanelCtrl.$fire(\"all!chatListEmpty\", event);\n                },\n\n                lock: function () {\n                    chatCtrlPanelCtrl.chatScrollLocked = !chatCtrlPanelCtrl.chatScrollLocked;\n                    chatCtrlPanelCtrl.$fire(\"all!lockChatList\", chatCtrlPanelCtrl.chatScrollLocked);\n                }\n            }\n\n        });\n\n        // Definition: .\n        chatCtrlPanelCtrl.$watch(\"sendDanmu\", function (element) {\n\n            // .\n            liveQuickLogin();\n\n            // Error Handler.\n            if (!chatCtrlPanelCtrl.danmuSend.data) {\n                liveToast(element, \"~ \" + randomEmoji.helpless());\n                return;\n            }\n\n            //  Flash .\n            $(\"#player_object\")[0].sendMsg(chatCtrlPanelCtrl.danmuSend.data, danmuColor);\n\n            // .\n            chatCtrlPanelCtrl.danmuSend.data = \"\";\n\n        });\n\n        // Action: .\n        lazyInit(document.getElementById(\"chat-ctrl-panel\"), chatCtrlPanelCtrl, function () {\n\n            // Action: .\n            $(\".emoji-panel\").on(\"click\", \"a\", function () {\n                var danmuData = chatCtrlPanelCtrl.danmuSend.data + $(this).text();\n                chatCtrlPanelCtrl.danmuSend.data = danmuData.substr(0, chatCtrlPanelCtrl.danmuSend.maxLength);\n                closeEmojiPanel();\n            });\n\n            //  VIP .\n            if (parseInt(VIP, 10) === 1) {\n                var $vipDefault = $(\".danmu-color-block[data-default=true]\");\n                danmuColor = $vipDefault.attr(\"data-color\");\n                setTimeout(function () { $vipDefault.click(); }, 1);\n            }\n\n            // Action: .\n            $(\".danmu-color-panel .danmu-color-block\").on(\"click\", function (event) {\n                liveQuickLogin();\n\n                //  VIP .\n                if ($(this).attr(\"data-vip\").toString() === \"true\" && parseInt(VIP, 10) !== 1) {\n                    liveToast($(this)[0], \"~ \" + randomEmoji.helpless());\n                    return;\n                }\n\n                $(this).addClass(\"active\").siblings(\".danmu-color-block\").removeClass(\"active\");\n                danmuColor = $(this).attr(\"data-color\");\n                closeDanmuColorPanel(event);\n            });\n\n        });\n\n\n        /* Definition goes below. */\n\n        // Definition: .\n        function closeEmojiPanel (event) {\n            var target = event && (event.target || event.srcElement);\n            if (target && target.className.indexOf(\"emoji-panel\") > -1) { return; }\n            $(\".emoji-panel\").fadeOut(200, function () {\n                chatCtrlPanelCtrl.doms.emojiPanel = false;\n                $(window).off(\"click\", closeEmojiPanel);\n            });\n        }\n\n        // Definition: .\n        function closeDanmuColorPanel (event) {\n            if (event) {\n                var target = event.target || event.srcElement;\n                if (target.className.indexOf(\"danmu-color-panel\") > -1 || target.className.indexOf(\".danmu-color-block\") > -1) { return; }\n            }\n            $(\".danmu-color-panel\").fadeOut(200, function () {\n                chatCtrlPanelCtrl.doms.danmuColor = false;\n                $(window).off(\"click\", closeDanmuColorPanel);\n            });\n        }\n\n        // Definition: Flash  By LancerComet at 13:59, 2015.11.16.\n        //  Flash .\n        window.getDanmuColor = function () {\n            return danmuColor;\n        };\n\n    });\n\n};", "/*\n *   at 18:22, 2015/12/24.\n *  ---\n *\n *  :\n *  ---\n *  :   \n *\n */\n\nmodule.exports = function () {\n    require('./javascripts/profile-ctrl.js')();  // .\n};", "/*\n *  Fans Medal at 14:39, 2015/12/28.\n *  ---\n *  \n */\nvar liveQuickLogin = require('../../../../../../../common/functions/func-live-quick-login/live-quick-login')\n\nmodule.exports = function (profileCtrlVM) {\n    \"use strict\";\n\n    var fansMedal = {\n        // :  true \n        locked: false,\n        // \n        ajaxGetMyWearMedal: function () {\n            $.ajax({\n                url: \"/i/ajaxGetMyWearMedal\",\n                type: \"get\",\n                dataType: \"json\",\n                cache: false,\n                success: function(result) {\n                    if (result.code == 0) { // \n                        profileCtrlVM.fansMedal.isWear = result.data.isWear;\n                        profileCtrlVM.fansMedal.myWearMedal = result.data;\n                        var width = (result.data.intimacy / result.data.next_intimacy * 100) + \"%\";\n                        $(\".medal-intimacy-progress .medal-progerss-bar\").width(width);\n                        profileCtrlVM.fansMedal.dataReady = true;\n                    }\n                }\n            });\n        },\n\n        //  list\n        ajaxGetMyMedalList: function (callback) {\n            $.ajax({\n                url: \"/i/ajaxGetMyMedalList\",\n                type: \"get\",\n                dataType: \"json\",\n                cache: false,\n                success: function(result) {\n                    if (result.code == 0) { //  list\n                        profileCtrlVM.fansMedal.myMedalList = result.data;\n                    }\n                    callback && callback();\n                }\n            });\n        },\n\n        // \n        wearFansMedal: function(medalId, callback) {\n            // \n            if (fansMedal.locked) {\n                return;\n            }\n            fansMedal.locked = true;\n            $.ajax({\n                url: \"/i/ajaxWearFansMedal\",\n                type: \"post\",\n                data: {\n                    medal_id: medalId\n                },\n                dataType: \"json\",\n                success: function(result) {\n                    fansMedal.locked = false;\n                    if (result.code == 0) {\n                        profileCtrlVM.fansMedal.isWear = 1;\n                        //  \n                        MEDAL.level = result.data.level;\n                        MEDAL.medal_name = result.data.medal_name;\n                        MEDAL.anchorName = result.data.anchorName;\n                        MEDAL.roomid = result.data.roomid;\n                    }\n                    callback && callback();\n                }\n            });\n        },\n\n        // \n        cancelFansMedal: function() {\n            $.ajax({\n                url: \"/i/ajaxCancelWear\",\n                type: \"get\",\n                dataType: \"json\",\n                success: function(result) {\n                    if (result.code == 0) {\n                        profileCtrlVM.fansMedal.isWear = 0;\n                    }\n                }\n            });\n        }\n\n\n    };\n\n    // \n    profileCtrlVM.fansMedal.wearFansMedal = function (medalId) {\n        fansMedal.wearFansMedal(medalId, function () {\n            fansMedal.ajaxGetMyWearMedal();\n        });\n    };\n\n    // \n    profileCtrlVM.fansMedal.cancelFansMedal = function () {\n        fansMedal.cancelFansMedal();\n        profileCtrlVM.fansMedal.myWearMedal.medal_id = -1;\n    };\n\n    //  Tip box \n    profileCtrlVM.fansMedal.toggleTipbox = function () {\n        liveQuickLogin();\n        profileCtrlVM.fansMedal.visible = !profileCtrlVM.fansMedal.visible;\n        if (profileCtrlVM.fansMedal.visible) {\n            fansMedal.ajaxGetMyWearMedal();\n            setTimeout(function () {\n                $(document).on(\"click\", closeMedalPanel);\n            }, 1);\n        }\n    };\n\n    // \n    profileCtrlVM.fansMedal.choosePanelToggle = function () {\n        if (!profileCtrlVM.fansMedal.choosePanelVisible) {\n            fansMedal.ajaxGetMyMedalList(function () {\n                profileCtrlVM.fansMedal.choosePanelVisible = true;\n            });\n        } else {\n            profileCtrlVM.fansMedal.choosePanelVisible = false;\n        }\n    };\n\n    // \n    profileCtrlVM.$watch(\"newFansMedalNotice\", function (medalData) {\n\n        /*\n         *  @ medalData: {\n         *    medalId: Number,\n         *    medalName: String,\n         *    medalLevel: String\n         *  }\n         */\n\n        profileCtrlVM.fansMedal.newFansMedal.medalId = medalData.medalId;\n        profileCtrlVM.fansMedal.newFansMedal.medalName = medalData.medalName;\n        profileCtrlVM.fansMedal.newFansMedal.medalLevel = medalData.medalLevel;\n        profileCtrlVM.fansMedal.newFansMedal.show = true;\n\n    });\n\n    profileCtrlVM.fansMedal.closeNewFansMedalNotice = function () {\n        profileCtrlVM.fansMedal.newFansMedal.show = false;\n    };\n\n    profileCtrlVM.fansMedal.newFansMedalWearNow = function (medalId) {\n        fansMedal.wearFansMedal(medalId, function () {\n            profileCtrlVM.fansMedal.newFansMedal.show = false;\n        });\n    };\n\n    // \n    function closeMedalPanel () {\n        $(\".fans-medal-tips-box\").fadeOut(200, function () {\n            profileCtrlVM.fansMedal.visible = false;\n            profileCtrlVM.fansMedal.choosePanelVisible = false;\n            $(document).off(\"click\", closeMedalPanel);\n        });\n    }\n\n};", "/*\n *  Profile Ctrl at 14:26, 2015/12/28.\n *  ---\n *   Profile .\n */\n\nvar lazyInit = require(\"../../../../../../../common/functions/func-avalon-lazy-init/lazy-init\");\nvar liveQuickLogin = require('../../../../../../../common/functions/func-live-quick-login/live-quick-login');\nmodule.exports = function () {\n    \"use strict\";\n\n    avalon.ready(function () {\n        var profileCtrlVM = avalon.define({\n            $id: \"profileCtrl\",\n            fansMedal: {\n                visible: false,\n                choosePanelVisible: false,\n                dataReady: false,\n                isWear: 0,\n                myWearMedal: {\n                    progressWidth: \"0%\"\n                },\n                newFansMedal: {\n                    show: false,\n                    medalId: 0,\n                    medalName: \"\",\n                    medalLevel: \"\"\n                },\n                myMedalList: []\n            },\n            title: {\n                visible: false,\n                choosePanelVisible: false,\n                dataReady: false,\n                isWear: 0,\n                myWearTitle:{\n                    titleName: \"\"\n                },\n                newTitle: {\n                    show: false,\n                    titleName: \"\"\n                },\n                myTitleList: []\n            },\n            vip: {\n                toVip: function () {\n                    liveQuickLogin();\n                    window.open('http://live.bilibili.com/i#to-vip', '_blank');\n                }\n            },\n            stopPropagation: function (event) {\n                event.stopPropagation();\n            }\n        });\n\n\n\n        lazyInit(document.getElementById(\"profile-ctrl\"), profileCtrlVM, function () {\n            // \n            require(\"./fans-medal\")(profileCtrlVM);\n\n            // \n            require(\"./title\")(profileCtrlVM);\n        });\n\n    });\n\n};", "/*\n *  Title at 17:10, 2016/01/12.\n *  ---\n *  \n */\nvar liveQuickLogin = require('../../../../../../../common/functions/func-live-quick-login/live-quick-login');\n\nmodule.exports = function (profileCtrlVM) {\n    \"use strict\";\n\n    var title = {\n        // :  true \n        locked: false,\n\n        // \n        ajaxGetMyWearTitle: function () {\n            $.ajax({\n                url: \"/i/ajaxGetMyWearTitle\",\n                type: \"get\",\n                dataType: \"json\",\n                success: function(result) {\n                    if (result.code == 0) { // \n                        if (result.data.title) {  // \n                            profileCtrlVM.title.isWear = 1;\n                        } else {  // \n                            profileCtrlVM.title.isWear = 0;\n                        }\n                        profileCtrlVM.title.myWearTitle = result.data;\n                        profileCtrlVM.title.dataReady = true;\n                    }\n                }\n            });\n        },\n\n        //  List\n        ajaxGetMyTitleList: function (callback) {\n            $.ajax({\n                url: \"/i/ajaxGetMyTitleList\",\n                type: \"get\",\n                dataType: \"json\",\n                success: function(result) {\n                    if (result.code == 0) { //  list\n                        profileCtrlVM.title.myTitleList = result.data;\n                    }\n                    callback && callback();\n                }\n            });\n        },\n\n        // \n        ajaxWearTitle: function (titleName, callback) {\n            // \n            if (title.locked) {\n                return;\n            }\n            title.locked = true;\n            $.ajax({\n                url: \"/i/ajaxWearTitle\",\n                type: \"post\",\n                data: {\n                    title: titleName\n                },\n                dataType: \"json\",\n                success: function(result) {\n                    title.locked = false;\n                    if (result.code == 0) {\n                        profileCtrlVM.title.isWear = 1;\n                        //  \n                        TITLE.title = titleName;\n                    }\n                    callback && callback();\n                }\n            });\n        },\n\n        // \n        ajaxCancelWearTitle: function (callback) {\n            $.ajax({\n                url: \"/i/ajaxCancelWearTitle\",\n                type: \"post\",\n                dataType: \"json\",\n                success: function(result) {\n                    if (result.code == 0) {\n                        profileCtrlVM.title.isWear = 0;\n                    }\n                    callback && callback(result);\n                }\n            });\n        }\n    };\n\n    // \n    profileCtrlVM.title.wearTitle = function (titleName) {\n        title.ajaxWearTitle(titleName, function () {\n            title.ajaxGetMyWearTitle();\n        });\n    };\n\n    // \n    profileCtrlVM.title.cancelTitle = function () {\n        title.ajaxCancelWearTitle();\n    };\n\n    //  Tip box \n    profileCtrlVM.title.toggleTipbox = function () {\n        liveQuickLogin();\n        profileCtrlVM.title.visible = !profileCtrlVM.title.visible;\n        if (profileCtrlVM.title.visible) {\n            title.ajaxGetMyWearTitle();\n            setTimeout(function () {\n                $(document).on(\"click\", closeTitlePanel);\n            }, 1);\n        }\n    };\n\n    // \n    profileCtrlVM.title.choosePanelToggle = function () {\n        if (!profileCtrlVM.title.choosePanelVisible) {\n            title.ajaxGetMyTitleList(function () {\n                profileCtrlVM.title.choosePanelVisible = true;\n            });\n        } else {\n            profileCtrlVM.title.choosePanelVisible = false;\n        }\n    };\n\n    // \n    profileCtrlVM.$watch(\"newTitleNotice\", function (titleName) {\n        console.log(titleName);\n        profileCtrlVM.title.newTitle.titleName = titleName;\n        profileCtrlVM.title.newTitle.show = true;\n    });\n\n    profileCtrlVM.title.closeNewTitleNotice = function () {\n        profileCtrlVM.title.newTitle.show = false;\n    };\n\n    profileCtrlVM.title.newTitleWearNow = function (titleName) {\n        title.ajaxWearTitle(titleName, function () {\n            profileCtrlVM.title.newTitle.show = false;\n        });\n    };\n\n    // \n    function closeTitlePanel () {\n        $(\".title-tips-box\").fadeOut(200, function () {\n            profileCtrlVM.title.visible = false;\n            profileCtrlVM.title.choosePanelVisible = false;\n            $(document).off(\"click\", closeTitlePanel);\n        });\n    }\n\n};", "/*\n *  Chat Controller Panel By LancerComet at 17:40, 2016/01/01.\n *  # Carry Your World #\n *  ---\n *  .\n */\nvar getAbsPosition = require('../../../../../common/functions/func-get-abs-position/get-abs-position');\nvar liveQuickLogin = require('../../../../../common/functions/func-live-quick-login/live-quick-login');\nvar liveToast = require('../../../../../common/components/live-widget/live-toast/live-toast');\nvar lazyInit = require('../../../../../common/functions/func-avalon-lazy-init/lazy-init');\nvar randomEmoji = require('../../../../../common/functions/func-random-emoji/random-emoji');\n\nmodule.exports = function () {\n    \"use strict\";\n\n    avalon.ready(function () {\n\n        // Definition: \n        var chatListCtrl = avalon.define({\n            $id: \"chatListCtrl\",\n\n            // .\n            data: {\n                chatList: [],  // .\n                clickedDanmu: {\n                    uid: null,\n                    msg: null,\n                    reason: null\n                }\n            },\n\n            // .\n            events: {\n\n                // .\n                chatList: {\n                    // .\n                    lockToggle: function (value) {\n                        chatListCtrl.doms.chatArea.locked = value;\n                        chatListCtrl.doms.chatArea.noAppending = chatListCtrl.doms.chatArea.locked;\n                    }\n                },\n\n                // .\n                showDanmuPopup: showDanmuPopup,\n\n                // .\n                hideDanmuPopup: hideDanmuPopup,\n\n                // .\n                forbidDanmu: forbidDanmu,\n\n                // .\n                reportDanmu: {\n                    setup: reportDanmu,\n                    confirm: reportDanmuConfirm,\n                    cancel: reportDanmuCancel\n                },\n\n                // .\n                blockUser: function () {\n                    if (ISADMIN != 1) { return; }\n\n                    ISANCHOR == 1 ? chatListCtrl.$fire(\"all!showLiveManageDialog\", {\n                        curTarget: \"blackManage\",\n                        blackName: chatListCtrl.doms.danmuPopup.uname\n                    }) : chatListCtrl.$fire(\"all!showBlackDialog\", {\n                        blackName: chatListCtrl.doms.danmuPopup.uname\n                    });\n\n                    chatListCtrl.events.hideDanmuPopup();\n                }\n            },\n\n            // .\n            doms: {\n\n                // .\n                chatArea: {\n                    locked: false,\n                    noAppending: false\n                },\n\n                // .\n                danmuPopup: {\n                    show: false,\n                    left: 0,\n                    top: 0,\n                    targetUID: null,\n                    uname: \"\"\n                },\n\n                // .\n                danmuReportPanel: {\n                    show: false,\n                    out: false,\n                    focus: false\n                }\n            }\n        });\n\n        // Definition: .\n        (function eventsDefinition () {\n\n            // Definition: .\n            var $chatList = $(\"#chat-msg-list\");\n\n            // Definition: .  Avalon , ms-repeat .\n            chatListCtrl.$watch(\"addDanmu\", function (json) {\n\n                console.log(\"Event: addDanmu\");\n                console.log(json);\n\n                // .\n                if (chatListCtrl.doms.chatArea.locked && json.info[2][0] != UID) { return; }\n\n                // .\n                if (json.info[2][0] == UID && json.info[0][5] == DANMU_RND) { return; }\n\n                // Action:  100 .\n                $chatList.children().length > 100 && $chatList.children().eq(0).remove();\n\n                // Definition: .\n                var msgHTML = '<div class=\"chat-msg\" data-uname=\"' + json.info[2][1] + '\" data-uid=\"' + json.info[2][0] + '\" data-msg=\"' + json.info[1] + '\">';\n\n                // Action:  VIP .\n                if (json.info[2][3] == 1 || (json.info[2][0] == UID && VIP == 1)){\n                    msgHTML += '<a href=\"/i#to-vip\" target=\"_blank\"><span class=\"vip-icon\"><i class=\"live-icon vip-color v-middle\"></i></span></a>';\n                }\n\n                // Action: .\n                if ((json.info[2][2] == 1 && json.info[2][0] == MASTERID) || (json.info[2][0] == UID && ISADMIN == 1 && UID == MASTERID)) {\n                    msgHTML += '<span class=\"square-icon master\"></span>'\n                }\n\n                // Action: .\n                if ((json.info[2][2] == 1 || (json.info[2][0] == UID && ISADMIN == 1)) && json.info[2][0] != MASTERID) {\n                    msgHTML += '<span class=\"square-icon admin\"></span>';\n                }\n\n                // Action: .\n                if ((json.info[2][0] == UID && !$.isEmptyObject(MEDAL)) || (json.info[3] && json.info[3].length)) {\n                    (json.info[3] && json.info[3].length) ? medalHTML({\n                        level: json.info[3][0],\n                        name: json.info[3][1],\n                        roomid: json.info[3][3],\n                        anchor: json.info[3][2]\n                    }) : medalHTML({\n                        level: MEDAL.level,\n                        name: MEDAL.medal_name,\n                        roomid: MEDAL.roomid,\n                        anchor: MEDAL.anchorName\n                    });\n                }\n\n                function medalHTML (data) {\n                    msgHTML += '<span class=\"medal-icon medal-icon-lv' + data.level + '\" data-medal=\"' + data.name +'\" data-level=\"' + data.level + '\"><div class=\"medal-info\"><span class=\"content\"><a href=\"/' + data.roomid + '\" target=\"_blank\">' + data.anchor + '</a></span></div></span>';\n                }\n\n                // Action: .,  TITLE . , TITLE .\n                if (json.info[2][0] == UID && !$.isEmptyObject(TITLE)) {\n                    msgHTML += '<span class=\"live-title-icon '+ TITLE.title +'\"></span>';\n                }\n\n                // Action: .\n                if (msgHTML.indexOf(\"live-title-icon\") < 0 && json.info[5] && json.info[5].length) { msgHTML += '<span class=\"live-title-icon '+ json.info[5][0] +'\"></span>'; }\n\n\n                // Switch: .\n                if (json.info[2][0] == UID) {\n\n                    // .\n                    if (!$.isEmptyObject(USER_LEVEL) && USER_LEVEL.level > 0) {\n                        msgHTML += '<span class=\"user-level-icon lv-' + USER_LEVEL.level + '\"><div class=\"user-level-info\"><div class=\"content\"><p>' + USER_LEVEL.level + '</p><p>' + USER_LEVEL.rank + '</p></div></div></span>'\n                    }\n\n                    // .\n                    msgHTML += '<span class=\"user-name\">[] : </span>';\n\n                    // .\n                    msgHTML = msgHTML.replace('<div class=\"chat-msg\"', '<div class=\"chat-msg mine\"');\n\n                } else {\n                    // Switch: .\n\n                    // .\n                    if ($.isArray(json.info[4]) && json.info[4].length > 0 && json.info[4][0] > 0) {\n                        msgHTML += '<span class=\"user-level-icon lv-' + json.info[4][0] + '\"><div class=\"user-level-info\"><div class=\"content\"><p>' + json.info[4][0] + '</p><p>' + json.info[4][1] + '</p></div></div></span>'\n                    }\n\n                    // .\n                    msgHTML += '<span class=\"user-name color\">' + json.info[2][1] + ' : </span>';\n                }\n\n                // .\n                msgHTML += '<span class=\"msg-content\">' + json.info[1] + '</span></div>';\n                $chatList.append(msgHTML);\n\n                // .\n                $chatList.scrollTop($chatList[0].scrollHeight);\n            });\n\n            // Definition: .\n            chatListCtrl.$watch(\"addGift\", function (json) {\n\n                console.log(\"Event: addGift\");\n                console.log(json);\n\n                // .\n                if (chatListCtrl.doms.chatArea.locked && json.data.uid != UID) {\n                    json.data[\"super\"] > 0 && chatListCtrl.$fire(\"superGift\", json.data);\n                    return;\n                }\n\n                // .\n                chatListCtrl.$fire(\"all!giftReceived\", json.data.rcost);\n\n                // .\n                $.isArray(json.data.top_list) && json.data.top_list.length > 0 && chatListCtrl.$fire(\"all!updateGiftTop\", json.data.top_list);\n\n                // .\n                json.data.starRank && chatListCtrl.$fire(\"all!shiningStarCount\", json.data.starRank);\n\n                // , .\n                if (window.giftTsHistory.indexOf(parseInt(json.data.timestamp, 10)) > -1 && json.data.uid == window.UID) {\n                    return;\n                }\n\n                // .\n                json.data[\"super\"] > 0 && chatListCtrl.$fire(\"superGift\", json.data);\n\n                // .\n                chatListCtrl.$fire(\"addGiftHistory\", json);\n\n            });\n\n            // Definition:  HTML .\n            //  HTML .\n            chatListCtrl.$watch(\"addGiftHistory\", function (json) {\n                console.log(\"addGiftHistory\");\n                console.log(json);\n                var giftHTML = '<div class=\"gift-msg\" role=\"listitem\">'\n                    + '<span class=\"user-name\">' + json.data.uname + '</span>'\n                    + '<span class=\"action\">'+ json.data.action + json.data.giftName + '</span>'\n                    + '<div class=\"gift-img gift-' + json.data.giftId + '\" role=\"img\"></div>'\n                    + '<span class=\"gift-count\">X ' + json.data.num + '</span>'\n                    + '</div>';\n                $(\"#chat-msg-list\").append(giftHTML);\n\n                // .\n                $chatList.scrollTop($chatList[0].scrollHeight);\n\n                // Manual GC.\n                giftHTML = null;\n            });\n\n            // Definition: .\n            chatListCtrl.$watch(\"lockChatList\", function (value) {\n                chatListCtrl.events.chatList.lockToggle(value);\n            });\n\n            // Definition: .\n            chatListCtrl.$watch(\"chatListEmpty\", function () {\n                $(\"#chat-msg-list\").empty();\n            });\n\n            // Definition: .\n            //  data  json.data  result.data.data .\n            chatListCtrl.$watch(\"superGift\", function (data) {\n                require(\"../super-gift/super-gift\").exec(data);\n            });\n\n            // Definition: Welcome .\n            chatListCtrl.$watch(\"addWelcomeMsg\", function (json) {\n                if (json.data.uid == UID) { return; }\n                var msgHTML = '<div class=\"system-msg\">';\n\n                msgHTML += '<a target=\"_blank\" href=\"/i#to-vip\"><i class=\"live-icon vip-color v-middle\"></i></a>';\n\n                if (json.data.isadmin == 1) {\n                    if (json.data.uid == window.MASTERID) {\n                        msgHTML += '<span class=\"square-icon master\"></span>';\n                    } else {\n                        msgHTML += '<span class=\"square-icon admin\"></span>';\n                    }\n                }\n\n                msgHTML += '<span class=\"welcome v-middle\" style=\"color: #f25d8e\">' + json.data.uname + ' </span><span class=\"v-middle\"></span></div>';\n\n                $chatList.append(msgHTML);\n\n                // .\n                $chatList.scrollTop($chatList[0].scrollHeight);\n            });\n\n            // Definition: Welcome .\n            chatListCtrl.$watch(\"addSelfWelcomeMsg\", function () {\n                var msgHTML = '<div class=\"system-msg\"><i class=\"live-icon vip-color v-middle\"></i><span class=\"welcome v-middle\" style=\"color: #f25d8e\">' + UNAME + ' </span><span class=\"v-middle\"></span><span id=\"close-vip-tip-link\" class=\"bili-link v-middle\" style=\"color: #4fc1e9; cursor: pointer;\"></span></div>';\n                $chatList.append(msgHTML);\n\n                // .\n                $(\"#close-vip-tip-link\").on(\"click\", function () {\n                    var popup = livePopup({\n                        title: \"\",\n                        content: \" (`)~\",\n                        width: 300,\n                        onConfirm: function () {\n                            $.ajax({\n                                url: \"/i/ajaxSetVipViewStatus\",\n                                type: \"POST\",\n                                data: {\n                                    status: 0\n                                },\n                                timeout: 5000,\n                                dataType: \"JSON\",\n                                success: function (result) {},\n                                error: function (result) {}\n                            });\n                            popup.remove();\n                            popup = null;\n                        },\n                        onCancel: function () {\n                            popup.remove();\n                            popup = null;\n                        }\n                    });\n                });\n            });\n\n            // Definition: .\n            chatListCtrl.$watch(\"addSysMsg\", function (json) {\n                console.log(\"Event: addSysMsg\");\n\n                // Definition:  By LancerComet at XX:XX, 2015.11.19 and continued at 15:02, 2015.11.20.\n                var contentNode = null;\n                var title = json.msg.substr(0, json.msg.indexOf(\"\") + 1);\n                var content = json.msg.substr(json.msg.indexOf(\"\") + 1, json.msg.length);\n\n                if (json.url.length < 1) {\n                    contentNode = content;\n                } else {\n                    contentNode = '<a href=\"' + json.url + '\" target=\"_blank\">' + content + '</a>'\n                }\n\n                var systemMsg = '<div class=\"announcement-container\">' +\n                    '<i class=\"live-icon announcement\"></i>' +\n                    '<div class=\"announcement-content\">' +\n                    '<p><span>' + title + \"</span>\" + contentNode + '</p>' +\n                    '</div>' +\n                    '</div>';\n                $chatList.append(systemMsg);\n                $chatList.scrollTop($chatList[0].scrollHeight);\n                contentNode = content = title = systemMsg = null;\n\n            });\n\n            // Definition: .\n            chatListCtrl.$watch(\"addKickoutMsg\", function (json) {\n                $chatList.append('<div class=\"system-msg\"> <span style=\"color: #aaa\">' + json.uname + '</span> </div>');\n            });\n\n\n        })();\n\n        // Action: Lazy Init.\n        lazyInit(document.getElementById(\"chat-list-ctnr\"), chatListCtrl, function () {\n            lazyInit($(\"#chat-panels\")[0], chatListCtrl);\n            //fanMedalHover();\n            //userLevelHover();\n        });\n\n        // Definition: .\n        function showDanmuPopup (event) {\n            var target = event.target || event.srcElement;\n\n            // Return when cilicking other elements.\n            if (!$(target).hasClass(\"msg-content\") && !$(target).hasClass(\"user-name\")) {\n                chatListCtrl.doms.danmuPopup.show = false;\n                return;\n            }\n\n            var $parent = $(target).parent();\n\n            // .\n            chatListCtrl.doms.danmuPopup.show = true;\n\n            // .\n            var absPosition = getAbsPosition($parent[0]);\n            chatListCtrl.doms.danmuPopup.left = absPosition.left + 150;\n            chatListCtrl.doms.danmuPopup.top = $($parent[0]).position().top + 170;\n\n            // .\n            chatListCtrl.doms.danmuPopup.targetUID = chatListCtrl.data.clickedDanmu.uid = $parent.attr(\"data-uid\");\n            chatListCtrl.doms.danmuPopup.uname = $parent.attr(\"data-uname\");\n            chatListCtrl.data.clickedDanmu.msg = $parent.attr(\"data-msg\");\n            $parent = null;\n        }\n\n        // Definition: .\n        function hideDanmuPopup () {\n            $(\".chat-msg-ctrl-panel\").fadeOut(200, function () {\n                chatListCtrl.doms.danmuPopup.show = false;\n            });\n        }\n\n        // Definition: .\n        function forbidDanmu (event) {\n            liveQuickLogin();\n            var target = event.target || event.srcElement;\n            $.ajax({\n                url: \"http://live.bilibili.com/liveact/shield_user\",\n                type: 'POST',\n                data: {\n                    roomid: ROOMID,\n                    uid: chatListCtrl.data.clickedDanmu.uid,\n                    type: 1\n                },\n                dataType: \"json\",\n                success: function (result) {\n                    if (result.code != 0) {\n                        liveToast(target, result.msg, \"caution\");\n                        return;\n                    }\n                    liveToast(target, \" TA ~ \" + randomEmoji.helpless(), \"success\");\n                    $(\"#player_object\")[0].addShieldUser(result.data.uid, result.data.uname);\n                },\n                error: function() {\n                    liveToast(target, \"~ \" + randomEmoji.sad(), \"error\");\n                }\n            });\n        }\n\n        // Definition: .\n        function reportDanmu () {\n            liveQuickLogin();\n            chatListCtrl.doms.danmuReportPanel.show = true;\n        }\n\n        // Definition: .\n        function reportDanmuConfirm (event) {\n            var target = event.target || event.srcElement;\n            if (!chatListCtrl.data.clickedDanmu.reason) { liveToast(target, \"~\", true); target = null; return; }\n            $.ajax({\n                url: \"/liveact/dmreport\",\n                type: \"POST\",\n                data: {\n                    roomid: window.ROOMID,\n                    uid: chatListCtrl.data.clickedDanmu.uid,\n                    msg: chatListCtrl.data.clickedDanmu.msg,\n                    reason: chatListCtrl.data.clickedDanmu.reason\n                },\n                dataType: \"JSON\",\n                success: function (result) {\n                    if (result.code != 0) {\n                        liveToast(target, result.msg, \"caution\");\n                        return;\n                    }\n                    liveToast(target, \"\" + randomEmoji.happy(), \"success\");\n                    reportDanmuCancel();\n                },\n                error: function (result) {\n                    liveToast(target, \" \" + randomEmoji.sad(), \"error\");\n                }\n            });\n        }\n\n        // Definition: .\n        function reportDanmuCancel () {\n            chatListCtrl.doms.danmuReportPanel.out = true;\n            setTimeout(function () {\n                chatListCtrl.doms.danmuReportPanel.show = false;\n                chatListCtrl.doms.danmuReportPanel.out = false;\n                chatListCtrl.doms.danmuReportPanel.focus = false;\n                chatListCtrl.data.clickedDanmu.reason = \"\";\n            }, 380);\n        }\n\n        // hover\n        function fanMedalHover () {\n            $(\"#chat-list-ctnr\").on(\"mouseenter\", \".medal-icon\", function(event) {\n                event.preventDefault();\n                var parentOffset = $(this).offset();\n                var roomMainCtnrOffset = $(\".room-main-ctnr\").offset();\n                var scrollLeft = $(document).scrollLeft();\n                var $nowMedalInfo = $(this).find(\".medal-info\");\n                $nowMedalInfo.css({\n                    top: parentOffset.top - 30,\n                    left: parentOffset.left - scrollLeft - roomMainCtnrOffset.left\n                });\n            });\n        }\n\n        // hover\n        function userLevelHover () {\n            $(\"#chat-list-ctnr\").on(\"mouseenter\", \".user-level-icon\", function(event) {\n                event.preventDefault();\n                var parentOffset = $(this).offset();\n                var roomMainCtnrOffset = $(\".room-main-ctnr\").offset();\n                var scrollLeft = $(document).scrollLeft();\n                var $nowUserLevelInfo = $(this).find(\".user-level-info\");\n                console.log(roomMainCtnrOffset.top);\n                $nowUserLevelInfo.css({\n                    top: parentOffset.top - 45,\n                    left: parentOffset.left - scrollLeft - roomMainCtnrOffset.left\n                });\n            });\n        }\n\n    });\n\n};\n\n", "/*\n *  Chat Area Controller By LancerComet at 16:27, 2015/12/24.\n *  # Carry Your World #\n *  ---\n *   Avalon .\n */\n\nvar appConfig = require('../../../../../../common/app-config/app-config');\nvar lazyInit = require('../../../../../../common/functions/func-avalon-lazy-init/lazy-init');\n\n// Definition: .\nvar checkAllow = {\n    giftTop: true,\n    fansRank: true,\n    admin: true,\n    shiningStar: true,\n    riceCake: true\n};\n\nmodule.exports = function (result, window) {\n    \"use strict\";\n\n    avalon.ready(function () {\n\n        // Definition: Rank List .\n        var rankListCtrl = avalon.define({\n            $id: \"rankListCtrl\",\n            chatSilent: false,  // .\n\n            // .\n            ranklist: {\n                showRanklist: \"sevenRank\",  // .\n                height: 100,\n                switchList: function (event) {\n                    var target = event.target || event.srcElement;\n                    rankListCtrl.ranklist.showRanklist = target.attributes[\"data-target\"].value;\n                },\n                allowCheck: function (panel) {\n                    rankListCtrl.ranklist.height = 100;  // .\n                    //checkAllow[panel] = true;\n                }\n            },\n\n            // .\n            giftTop: {\n                // .\n                dataList: result.data.GIFT_TOP || [],\n\n                // .\n                check: function () {\n                    if (!checkAllow.giftTop) {\n                        expandList(\"giftTop\");\n                        return;\n                    }\n                    checkAllow.giftTop = false;\n                    rankListCtrl.giftTop.request();\n                    expandList(\"giftTop\");\n                },\n\n                // .\n                restore: function () {\n                    rankListCtrl.ranklist.allowCheck(\"giftTop\");\n                },\n\n                // .\n                request: function (callback) {\n                    $.ajax({\n                        url: \"/gift/getTop?roomid=\" + window.ROOMID,\n                        type: \"GET\",\n                        dataType: \"JSON\",\n                        success: function (result) {\n                            if (result.code != 0) { return; }\n                            rankListCtrl.giftTop.dataList = result.data;\n                            callback && typeof callback === \"function\" && callback();\n                        },\n                        error: function (result) {\n                            typeof callback === \"function\" && callback();\n                        }\n                    })\n                }\n            },\n\n            // .\n            fansRank: {\n                dataList: [],\n\n                check: function () {\n                    if (!checkAllow.fansRank) {\n                        expandList(\"fansRank\");\n                        return;\n                    }\n                    checkAllow.fansRank = false;\n                    rankListCtrl.fansRank.request();\n                    expandList(\"fansRank\");\n                },\n\n                restore: function () {\n                    rankListCtrl.ranklist.allowCheck(\"fansRank\");\n                },\n\n                request: function (callback) {\n                    $.ajax({\n                        url: \"/liveact/ajaxGetMedalRankList\",\n                        type: \"POST\",\n                        dataType: \"JSON\",\n                        data: {\n                            roomid: window.ROOMID\n                        },\n                        success: function (result) {\n                            if (result.code != 0) { return; }\n                            if (result.msg != 0 && result.msg !== \"\") {\n                                // .\n                                $(\".rank-list.fans-rank\").attr(\"data-hinter\", \" B  ====()\");\n                            }\n                            rankListCtrl.fansRank.dataList =  result.data;\n                            callback && typeof callback === \"function\" && callback();\n                        },\n                        error: function (result) {\n                            typeof callback === \"function\" && callback();\n                        }\n                    })\n                }\n            },\n\n            // .\n            shiningStar: {\n                dataList: [],\n\n                check: function () {\n                    if (!checkAllow.shiningStar) {\n                        expandList(\"shiningStar\");\n                        return;\n                    }\n                    checkAllow.shiningStar = false;\n                    rankListCtrl.shiningStar.request();\n                    expandList(\"shiningStar\");\n                },\n\n                restore: function () {\n                    rankListCtrl.ranklist.allowCheck(\"shiningStar\");\n                },\n\n                request: function (callback) {\n                    $.ajax({\n                        url: \"/gift/star\",\n                        type: \"GET\",\n                        data: {\n                            uid: window.MASTERID,\n                            ts: Date.now()\n                        },\n                        dataType: \"JSON\",\n                        success: function (result) {\n                            if (result.code == 0) {\n                                rankListCtrl.shiningStar.dataList = result.data;\n                                callback && typeof callback === \"function\" && callback();\n                            }\n\n                        },\n                        error: function (result) {\n\n                        }\n                    })\n                }\n\n            },\n\n            //\n            riceCake: {\n                dataList: [],\n\n                request: function () {\n                    $.ajax({\n                        url: \"/gift/cake\",\n                        type: \"GET\",\n                        data: {\n                            uid: window.MASTERID,\n                            ts: Date.now()\n                        },\n                        dataType: \"JSON\",\n                        success: function (result) {\n                            if (result.code == 0) {\n                                rankListCtrl.riceCake.dataList = result.data;\n                            }\n                        },\n                        error: function (result) {\n                            // ...\n                        }\n                    })\n                },\n\n                check: function () {\n                    rankListCtrl.ranklist.height = rankListCtrl.riceCake.dataList.length * 33;  // .\n                },\n\n                restore : function () {\n                    rankListCtrl.ranklist.allowCheck(\"riceCake\");\n                }\n            },\n\n            // .\n            admin: {\n                dataList: [],\n\n                check: function () {\n                    rankListCtrl.ranklist.height = rankListCtrl.admin.dataList.length * 33;  // .\n                },\n\n                request: function () {\n                    $.ajax({\n                        url: \"/liveact/ajaxGetAdminList\",\n                        type: \"POST\",\n                        data: {\n                            roomid: ROOMID\n                        },\n                        dataType: \"JSON\",\n                        success: function (result) {\n                            if (result.code == 0) {\n                                rankListCtrl.admin.dataList = result.data;\n                            }\n                        },\n                        error: function (result) {\n                            // ...\n                        }\n                    })\n                },\n\n                restore: function () {\n                    rankListCtrl.ranklist.allowCheck(\"admin\");\n                }\n            }\n\n        });\n\n        // Definition: .\n        rankListCtrl.$watch(\"updateGiftTop\", function (data) {\n            console.log(\"Event: updateGiftTop\");\n            if (Object.prototype.toString.call(data) !== \"[object Array]\") {\n                consoleText.log(appConfig.consoleText.error + \".\");\n                return;\n            }\n            data.length > 0 ? rankListCtrl.giftTop.dataList = data : void(0);\n            data.length <= 3 ? checkAllow.giftTop = true : void(0);\n        });\n\n        // Definition: .\n        rankListCtrl.$watch(\"updateShiningStar\", function (data) {\n            console.log(\"Event: updateShiningSTAR\");\n            if (Object.prototype.toString.call(data) !== \"[object Array]\") {\n                consoleText.log(appConfig.consoleText.error + \".\");\n                return;\n            }\n            data.length > 0 ? rankListCtrl.shiningStar.dataList = [] : void(0);\n        });\n\n        //Definition: \n        //rankListCtrl.$watch(\"updateRiceCake\", function (data) {\n        //    console.log(\"Event: updateRiceCake\");\n        //    if (Object.prototype.toString.call(data) !== \"[object Array]\") {\n        //        consoleText.log(appConfig.consoleText.error + \".\");\n        //        return;\n        //    }\n        //    data.length > 0 ? rankListCtrl.riceCake.dataList = data : void(0);\n        //    data.length <= 3 ? checkAllow.riceCake = true : void(0);\n        //});\n\n        lazyInit(document.getElementById(\"rank-list-ctnr\"), rankListCtrl);\n\n        // Definition: .\n        function expandList (listName) {\n            rankListCtrl.ranklist.height = rankListCtrl[listName].dataList.length * 32;\n        }\n\n    });\n};", "/*\n *  Super Gift By LancerComet at 11:52, 2016/1/11.\n *  # Carry Your World #\n *  ---\n *  .\n *  , .\n *   chat-list-ctnr  Avalon .\n */\n\n\n// Definition: .\nvar superGift = {};\n\n// Definition: .\nvar $appendTarget = $(\".super-gift-ctnr\");\n\n// Definition: .\nsuperGift.settings = {\n    showTime: 10000  // .\n};\n\n// Definition: .\nsuperGift.newGift = function (superGiftInfo, hitNum) {\n    var giftDom = document.createElement(\"div\");\n    giftDom.className = 'supergift supergift-' + superGiftInfo.giftId + ' gift-step-2 animated';\n    giftDom.setAttribute(\"data-gift-id\", superGiftInfo.id);\n    giftDom.innerHTML = '<img class=\"supergift-img gift-step-1 animated\" src=\"http://static.hdslb.com/live-static/images/gifts/gift-' + superGiftInfo.giftId +'.gif\">' +\n        '<div class=\"supergift-text\">' +\n        '<p class=\"supergift-text-sec gift-step-3 animated\"><span class=\"supergift-uname\">'+ superGiftInfo.uname +'</span><span class=\"supergift-action\">'+ superGiftInfo.giftName +'</span><span class=\"supergift-num\">'+ superGiftInfo.num +'</span></p></div>' +\n        '<img class=\"supergift-cross gift-step-4 animated\" src=\"http://static.hdslb.com/live-static/images/supergift/cross.png\"><p class=\"supergift-hitnum gift-step-6 animated\">'+ hitNum +'</p><p class=\"combo-text gift-step-5 animated\">combo</p>';\n\n    // .\n    setTimeout(function () {\n        $(giftDom).addClass('fadeOutLeft').one('webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend', function() {\n            $(giftDom).remove();\n        });\n    }, superGift.settings.showTime);\n\n    this.create = giftDom;\n};\n\n// Definition: FFF .\nsuperGift.fffGift = function (superGiftInfo, hitNum) {\n    var giftDom = document.createElement(\"div\");\n    giftDom.className = 'supergift supergift-' + superGiftInfo.giftId + ' gift-step-2 animated';\n    giftDom.setAttribute(\"data-gift-id\", superGiftInfo.id);\n    giftDom.innerHTML = '<div style=\"background-color: #9B5131\" class=\"supergift-img gift-step-1 animated\">' +\n        '<img src=\"http://static.hdslb.com/live-static/images/gifts/gift-13-fireball.png\" style=\"position: absolute; top: -20px; left: -10px;\">' +\n        '</div>' +\n        '<div class=\"supergift-text\">' +\n        '<p class=\"supergift-text-sec gift-step-3 animated\" style=\"color: #fff; margin-left: 10px; top: -3px;\"><span class=\"supergift-uname\" style=\"vertical-align: top; color: rgb(255, 232, 0);\">'+ superGiftInfo.uname +'</span></p></div>' +\n        '<img class=\"supergift-cross gift-step-4 animated\" src=\"http://static.hdslb.com/live-static/images/supergift/cross.png\"><p class=\"supergift-hitnum gift-step-6 animated\">'+ hitNum +'</p><p class=\"combo-text gift-step-5 animated\">combo</p>';\n\n    // .\n    setTimeout(function () {\n        $(giftDom).addClass('fadeOutLeft').one('webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend', function() {\n            giftDom.parentNode.removeChild(giftDom);\n        });\n    }, superGift.settings.showTime);\n\n    this.create = giftDom;\n};\n\n// ,  SEND_GIFT  AJAX .\nsuperGift.exec = function (data) {\n\n    // Action:  0 , .\n    if (data[\"super\"] == 0) {\n        return false;\n    }\n\n    // Definition: .\n    var id = data.uid + \"_\" + data.giftId + \"_\" + data.num + \"_\" + data[\"super\"],\n        superGiftInfo = {  // .\n            id: id,\n            uname: data.uname,\n            num: data.num,\n            giftName: data.giftName,\n            giftId: data.giftId\n        };\n\n    // .\n    if($appendTarget.children().length >= 3){\n        $('.supergift:first-child', $appendTarget).remove();\n        $('.supergift', $appendTarget).addClass('moveUp').one('webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend', function() {\n            $(this).removeClass(\"moveUp\");\n        });\n    }\n\n    // Action: .\n    //  FFF , , .\n    var newGift = null;\n    if (data.giftName === \"FFF\") {\n        newGift = new superGift.fffGift(superGiftInfo, data.super).create;\n    } else {\n        newGift = new superGift.newGift(superGiftInfo, data.super).create;\n    }\n    $('.supergift', $appendTarget).removeClass('gift-step-2 animated');\n    $appendTarget.append(newGift);\n\n};\n\nmodule.exports = superGift;", "/*\n *  Chat Area Intro File by LancerComet at 11:22, 2015/12/17.\n *  # Carry Your World #\n *  ---\n *\n *  :\n *  ---\n *  . (Browserify)\n *  , ****.\n *   Browserify  JavaScript .\n *  Browserify  Common.JS .\n *\n */\n\nmodule.exports = function (roomInfo) {\n\n    // :  roomInfo .\n\n    // .\n    // ===================\n    require('./components/rank-list/javascripts/rank-list')(roomInfo, window);  // .\n    require('./components/chat-msg-list/chat-list-ctnr')();  // .\n    require(\"./components/chat-ctrl-panel/chat-ctrl-panel\")();  // .\n    require('./components/chat-ctrl-panel/profile-ctrl/intro-javascripts')();  // .\n    require(\"./components/bk-changer/bk-changer\")(window);  // .\n\n};", "/*\n *  Live Room Gift Section Script Entry By LancerComet at 14:09, 2016.01.05.\n *  # Carry Your World #\n *  ---\n *  .\n */\n\nmodule.exports = function () {\n    require(\"./javascripts/gift-section-ctrl\")(window);\n    require(\"./javascripts/gift-package-ctrl\")();\n};", "/*\n *  Gift Package at 18:08, 2016.01.06.\n *  ---\n *  \n */\n\n//var lazyInit = require(\"lazyInit\");\nvar lazyInit = require('../../../../common/functions/func-avalon-lazy-init/lazy-init');\n//var liveToast = require(\"liveToast\");\nvar liveToast = require(\"../../../../common/components/live-widget/live-toast/live-toast\");\n//var randomEmoji = require(\"randomEmoji\");\nvar randomEmoji = require(\"../../../../common/functions/func-random-emoji/random-emoji\");\n\nvar liveQuickLogin = require('../../../../common/functions/func-live-quick-login/live-quick-login');\n\nmodule.exports = function () {\n    \"use strict\";\n    avalon.ready(function () {\n        var giftPackagelVM = avalon.define({\n            $id: \"giftPackageCtrl\",\n            giftPackageStatus: 0,  // 0:  1:  2:\n            panelStatus: false,\n            giftPackageData: [],\n\n            // Toggle \n            toggleGiftPackage: function (event) {\n                event.stopPropagation();\n                liveQuickLogin();\n                if (!giftPackagelVM.panelStatus) {\n                    if (giftPackagelVM.giftPackageStatus == 1) {  // \n                        openGiftPackageNewPanel();\n                    } else {\n                        openGiftPackagePanel();  // \n                    }\n                } else {\n                    closeGiftPackagePanel();\n                }\n            },\n\n            // \n            giftSendPanel: {\n                giftData: {\n                    giftId: \"\",\n                    giftName: \"\",\n                    giftNum: 0,\n                    type: \"silver\",\n                    count: 1,\n                    bagId: 0\n                },\n                show: false,\n                out: false,\n                outTimeout: null,\n                open: openGiftSendPanel,\n                close: closeGiftSendPanel,\n                sendGift: sendGift\n            },\n\n            // \n            giftPackageNewPanel: {\n                data: [],\n                show: false,\n                out: false,\n                outTimeout: null,\n                open: openGiftPackageNewPanel,\n                close: closeGiftPackageNewPanel\n            },\n\n            // \n            stopPropagation: function (event) {\n                event.stopPropagation();\n            }\n        });\n\n        //  avalon \n        lazyInit($(\"#gift-package-send-panel\")[0], giftPackagelVM, function () {\n            // \n            getGiftPackageStatus(function (result) {\n                giftPackagelVM.giftPackageStatus = result.data.result;\n            });\n        });\n\n        lazyInit($(\"#gift-package-new-panel\")[0], giftPackagelVM);\n\n        // \n        function closeGiftPackagePanel () {\n            $(\".gifts-package-panel\").fadeOut(200, function () {\n                giftPackagelVM.panelStatus = false;\n                $(document).off(\"click\", closeGiftPackagePanel);\n            });\n        }\n\n        // \n        function openGiftPackagePanel () {\n            getGiftPackage(function (result) {\n                giftPackagelVM.giftPackageData = result.data;\n                giftPackagelVM.panelStatus = true;\n            });\n            setTimeout(function () {\n                $(document).on(\"click\", closeGiftPackagePanel);\n            }, 1);\n        }\n\n        // \n        function openGiftSendPanel (giftId, giftName, giftNum, bigId) {\n            var sendPanel = giftPackagelVM.giftSendPanel;\n\n            sendPanel.giftData.giftId = giftId;\n            sendPanel.giftData.giftName = giftName;\n            sendPanel.giftData.giftNum = giftNum;\n            sendPanel.giftData.count = 1;\n            sendPanel.giftData.bagId = bigId;\n\n            giftPackagelVM.panelStatus = false;\n            sendPanel.show = true;\n        }\n\n        // \n        function closeGiftSendPanel () {\n            var sendPanel = giftPackagelVM.giftSendPanel;\n            sendPanel.out = true;\n            sendPanel.outTimeout = setTimeout(function () {\n                sendPanel.out = false;\n                sendPanel.show = false;\n                sendPanel = null;\n            }, 380);\n        }\n\n        // \n        function openGiftPackageNewPanel () {\n            var giftPackageNewPanel = giftPackagelVM.giftPackageNewPanel;\n            // \n            getSendGift(function (result) {\n                if (result.code == 0) {\n                    giftPackageNewPanel.data = result.data;\n                    giftPackageNewPanel.show = true;\n                }\n            });\n        }\n\n        // \n        function closeGiftPackageNewPanel () {\n            var giftPackageNewPanel = giftPackagelVM.giftPackageNewPanel;\n            giftPackageNewPanel.out = true;\n            giftPackageNewPanel.outTimeout = setTimeout(function () {\n                giftPackageNewPanel.out = false;\n                giftPackageNewPanel.show = false;\n                giftPackageNewPanel = null;\n                giftPackagelVM.giftPackageStatus = 2;\n                openGiftPackagePanel();  // \n            }, 380);\n        }\n\n        // \n        function sendGift (event) {\n            if (event.type === \"keyup\" && event.keyCode !== 13) { return; }\n\n            var element = event.target || event.srcElement;\n            var giftData = giftPackagelVM.giftSendPanel.giftData;\n            var num = parseInt(giftData.count, 10);\n\n            // .\n            if (isNaN(num)) {\n                giftData.count = \"\";\n                liveToast(element, \" \" + randomEmoji.helpless(), true);\n                return;\n            }\n\n            giftPackagelVM.$fire(\"all!sendGift\", {\n                element: element,\n                type: \"package\",\n                data: {\n                    giftId: giftData.giftId,\n                    num: num,\n                    coinType: giftData.type,\n                    bagId: giftData.bagId\n                },\n                callback: function (result) {\n                    if (result.code == 0) {\n                        giftData.giftNum = result.data.remain;\n                        //  remain  0 \n                        if (result.data.remain == 0) {\n                            getGiftPackageStatus(function (result) {\n                                giftPackagelVM.giftPackageStatus = result.data.result;\n                            });\n                        }\n                    }\n                }\n            });\n        }\n    });\n\n    /*\n     * \n     */\n\n    // \n    function getGiftPackageStatus (callback) {\n        $.ajax({\n            url: \"/giftBag/sendDaily\",\n            type: 'GET',\n            dataType: \"json\",\n            success: function (result) {\n                // \n                callback && callback(result);\n            }\n        });\n    };\n\n    // \n    function getSendGift (callback) {\n        $.ajax({\n            url: \"/giftBag/getSendGift\",\n            type: 'GET',\n            dataType: \"json\",\n            success: function (result) {\n                // \n                callback && callback(result);\n            }\n        });\n    };\n\n    // \n    function getGiftPackage (callback) {\n        $.ajax({\n            url: \"/gift/playerBag\",\n            type: 'GET',\n            dataType: \"json\",\n            success: function (result) {\n                // \n                callback && callback(result);\n            }\n        });\n    };\n\n};\n\n", "/*\n *  Gift Section Controller By LancerComet at 14:08, 2016.01.05.\n *  # Carry Your World #\n *  ---\n *  .\n */\n\nvar lazyInit = require('../../../../common/functions/func-avalon-lazy-init/lazy-init');\nvar avalonSetNum = require('../../../../common/functions/func-setnum-avalon/avalon-set-num');\nvar timestampShorter = require('../../../../common/functions/func-timestamp-shorter/timestamp-shorter');\nvar randomEmoji = require('../../../../common/functions/func-random-emoji/random-emoji');\nvar liveToast = require('../../../../common/components/live-widget/live-toast/live-toast');\nvar livePopup = require('../../../../common/components/live-widget/live-popup/live-popup');\nvar liveQuickLogin = require('../../../../common/functions/func-live-quick-login/live-quick-login');\n\nmodule.exports = function (window) {\n    \"use strict\";\n\n    avalon.ready(function () {\n\n        // Definition: .\n        var giftCtrl = avalon.define({\n            $id: \"giftCtrl\",\n\n            // .\n            currency: {\n                silver: 0,\n                gold: 0\n            },\n\n            // .\n            giftInfoPanel: {\n                show: false,\n                out: false,\n                outTimeout: null,\n                mouseTimeout: null,\n\n                left: 0,\n                top: 0,\n                type: \"\",  // .\n\n                info: {\n                    giftId: \"\",\n                    title: \"\",\n                    content: \"\",\n                    effects: \"\",\n                    cost: \"\"\n                },\n\n                events: {\n                    in: function () {\n                        clearTimeout(giftCtrl.giftInfoPanel.outTimeout);\n                        clearTimeout(giftCtrl.giftInfoPanel.mouseTimeout);\n                    },\n                    out: hideGiftPanel\n                }\n            },\n\n            // .\n            giftSendPanel: {\n                show: false,\n                out: false,\n                outTimeout: null,\n                cost: \"\",\n                allowGold: false,\n                allowSilver: false,\n                disableInput: false,\n                close: closeGiftSendPanel\n            },\n\n            // .\n            chooseGift: {\n                normal: normalGiftChoice,\n                flash: flashGiftChoice,\n                activity: activityGiftChoice\n            },\n\n            // .\n            sendGift: {\n                countSet: [10, 99, 188, 450, 520, 1314],\n\n                data: {\n                    giftId: \"\",\n                    giftName: \"\",\n                    type: \"silver\",\n                    count: 1\n                },\n\n                events: {\n                    setCount: setGiftCount,\n                    send: sendGift\n                }\n            },\n\n            // .\n            exchange: function (panel) {\n                liveQuickLogin();  // \n                giftCtrl.$fire(\"all!showExchange\", panel);\n            }\n\n        });\n\n        // Definition: .\n        giftCtrl.$watch(\"fillCurrency\", function (seeds) {\n            (seeds.gold !== null && seeds.gold !== undefined) && avalonSetNum(seeds.gold, giftCtrl.currency.gold, \"giftCtrl.currency.gold\");\n            (seeds.silver !== null && seeds.silver !== undefined) && avalonSetNum(seeds.silver, giftCtrl.currency.silver, \"giftCtrl.currency.silver\");\n        });\n\n        // Definition: .\n        giftCtrl.$watch(\"sendGift\", function (param) {\n\n            /*\n             *  @ param: {\n             *    element: Object,  // ,  liveToast .\n             *    type: \"normal\" || \"package\",  //  || \n             *    data: {\n             *        giftId: Number || String,\n             *        num: Number,  // .\n             *        coinType: \"silver\" || \"gold\",\n             *        bagId: Number,\n             *        callback: Function\n             *    }\n             *  }\n             */\n\n            // Definition: .\n            var timestamp = timestampShorter(Date.now());\n            window.giftTsHistory.length > 200 && window.giftTsHistory.splice(0, 1);  //  200 .\n            window.giftTsHistory.indexOf(parseInt(timestamp, 10) < 0) && window.giftTsHistory.push(parseInt(timestamp, 10));  // .\n\n            //  &  \n            var sendGiftUrl = \"\";\n            if (param.type == \"normal\") {\n                sendGiftUrl = \"/gift/send\";\n            } else if (param.type == \"package\") {\n                sendGiftUrl = \"/giftBag/send\";\n            }\n\n            // .\n            $.ajax({\n                url: sendGiftUrl,\n                type: \"POST\",\n                data: {\n                    giftId: param.data.giftId,\n                    roomid: ROOMID,\n                    ruid: MASTERID,\n                    num: param.data.num,\n                    coinType: param.data.coinType,\n                    Bag_id: param.data.bagId,\n                    timestamp: timestamp,\n                    rnd: DANMU_RND,\n                    token: $.cookie(\"LIVE_LOGIN_DATA\") || \"\"\n                },\n                dataType: \"JSON\",\n                success: function (result) {\n\n                    if (result.code == 0) {\n\n                        console.log(\"Send gifts successfully.\");\n\n                        // .\n                        giftCtrl.$fire(\"all!updateCurrency\", {\n                            gold: result.data.gold,\n                            silver: result.data.silver\n                        });\n\n                        //  Flash.\n                        result.data.data.giftType == 1 && $(\"#player_object\")[0].sendGift(result.data.data.giftId, result.data.data.num);\n\n                        // .\n                        if (result.data.data.newMedal == 1) {\n                            giftCtrl.$fire(\"all!newFansMedalNotice\", {\n                                medalId: result.data.data.medal.medalId,\n                                medalName: result.data.data.medal.medalName,\n                                medalLevel: result.data.data.medal.level\n                            });\n                        }\n\n                        console.log(result);\n                        // \n                        if (result.data.data.newTitle == 1) {\n                            giftCtrl.$fire(\"all!newTitleNotice\", result.data.data.title);\n                        }\n\n                        // .\n                        giftCtrl.$fire(\"all!addGiftHistory\", result.data);\n\n                        // .\n                        giftCtrl.$fire(\"all!superGift\", result.data.data);\n\n                        // .\n                        giftCtrl.$fire(\"all!updateGiftTop\", result.data.data.top_list);\n\n                    }\n\n                    // .\n                    else if (result.code == -400 && result.msg == \"\") {\n                        giftCtrl.$fire(\"all!noSeed\");\n                        closeGiftSendPanel();\n                    }\n\n                    // Error Handler.\n                    else {\n                        liveToast(param.element, result.msg + \" \" + randomEmoji.sad(), \"caution\", true);\n                    }\n\n                    // Callback\n                    param.callback && param.callback(result);\n                },\n                error: function (result) {\n                    liveToast(param.element, randomEmoji.sad() + \" \" + result.statusText + \" \" + randomEmoji.sad(), \"error\");\n                }\n            });\n\n        });\n\n        // Aciton: .\n        lazyInit($(\"#gift-panel\")[0], giftCtrl, function () {\n\n            var giftPanel = giftCtrl.giftInfoPanel;\n\n            // Definition:  Hover .\n            $(\"#gift-panel\").find(\".gifts-ctnr\")\n                .on(\"mouseenter\", \".gift-item\", function (event) {\n                    event.stopPropagation();\n                    clearTimeout(giftPanel.outTimeout);\n                    clearTimeout(giftPanel.mouseTimeout);\n\n                    var element = event.target || event.srcElement;\n\n                    //  Hover .\n                    if (!$(element).hasClass(\"gift-item\")) { return; }\n\n                    var giftId = $(element).attr(\"data-gift-id\"),\n                        title = $(element).attr(\"data-title\"),\n                        content = $(element).attr(\"data-desc\"),\n                        effects = $(element).attr(\"data-effect\"),\n                        type = $(element).parent().attr(\"data-type\"),\n                        position = $(element).position();\n\n                    giftPanel.show = true;\n                    giftPanel.left = position.left;\n                    giftPanel.top = position.top;\n                    giftPanel.type = type;\n\n                    giftPanel.info.giftId = giftId;\n                    giftPanel.info.title = title;\n                    giftPanel.info.content = content;\n                    giftPanel.info.effects = effects;\n\n                    var costs = {\n                        gold: parseInt($(element).attr(\"data-gold\"), 10),\n                        silver: parseInt($(element).attr(\"data-silver\"), 10)\n                    };\n\n                    var costHTML = \"\";\n                    if (costs.gold > 0) { costHTML += '<span class=\"cost-hint\"><i class=\"live-icon gold-seed vertical-top\"></i><span class=\"vertical-top\">' + costs.gold + '</span></span>' }\n                    if (costs.silver > 0) { costHTML += '<span class=\"cost-hint\"><i class=\"live-icon silver-seed vertical-top\"></i><span class=\"vertical-top\">' + costs.silver + '</span></span>' }\n                    giftPanel.info.cost = costHTML;\n\n                })\n                .on(\"mouseleave\", \".gift-item\", hideGiftPanel);\n\n            lazyInit($(\"#gift-send-panel\")[0], giftCtrl);\n\n        });\n\n        // Definition: .\n        function hideGiftPanel (event) {\n            event.stopPropagation();\n            var giftPanel = giftCtrl.giftInfoPanel;\n            giftPanel.mouseTimeout = setTimeout(function () {\n                giftPanel.out = true;\n                giftPanel.outTimeout = setTimeout(function () {\n                    giftPanel.out = false;\n                    giftPanel.show = false;\n                    giftPanel = null;\n                }, 380);\n            }, 1);  // , . Hover.\n        }\n\n        // Definition: .\n        function normalGiftChoice (event) {\n            chooseGiftCommonExec(event);\n        }\n\n        // Definition: .\n        function flashGiftChoice (event) {\n            chooseGiftCommonExec(event);\n        }\n\n        // Definition: .\n        function activityGiftChoice (event) {\n            // \n            if(event.target.className.indexOf(\"gift-18\") > 0) {\n                chooseGiftCommonExec(event);\n            }\n        }\n\n        // Definition: .\n        function chooseGiftCommonExec (event) {\n            var target = event.target || event.srcElement;\n\n            if (!$(target).hasClass(\"gift-item\")) {\n                target = null;\n                return;\n            }\n\n            var giftData = giftCtrl.sendGift.data;\n\n            // .\n            giftData.count = 1;\n            giftData.type = \"silver\";\n            giftCtrl.giftSendPanel.allowGold = false;\n            giftCtrl.giftSendPanel.allowSilver = false;\n            giftCtrl.giftSendPanel.disableInput = false;\n\n            // .\n            giftCtrl.giftSendPanel.show = true;\n\n            // .\n            giftData.giftId = $(target).attr(\"data-gift-id\");\n            giftData.giftName = $(target).attr(\"data-title\");\n\n            // .\n            if ($(target).attr(\"data-custom_input\") == \"0\") {\n                giftCtrl.giftSendPanel.disableInput = true;\n            }\n\n            // .\n            var costs = {\n                gold: parseInt($(target).attr(\"data-gold\"), 10),\n                silver: parseInt($(target).attr(\"data-silver\"), 10)\n            };\n            var costHTML = \"\";\n            if (costs.gold > 0) {\n                giftCtrl.giftSendPanel.allowGold = true;\n                costHTML += '<span class=\"cost-hint\"><i class=\"live-icon gold-seed vertical-top\"></i><span class=\"vertical-top\">' + costs.gold + '</span></span>'\n            }\n            if (costs.silver > 0) {\n                giftCtrl.giftSendPanel.allowSilver = true;\n                costHTML += '<span class=\"cost-hint\"><i class=\"live-icon silver-seed vertical-top\"></i><span class=\"vertical-top\">' + costs.silver + '</span></span>'\n            }\n\n            // .\n            giftData.type = giftCtrl.giftSendPanel.allowGold && !giftCtrl.giftSendPanel.allowSilver ? \"gold\" : \"silver\";\n\n            giftCtrl.giftSendPanel.cost = costHTML;\n\n            // .\n            giftCtrl.sendGift.countSet = $(target).attr(\"data-count_set\").split(\",\");\n        }\n\n        // Definition: .\n        function setGiftCount (event) {\n            var target = event.target || event.srcElement;\n            giftCtrl.sendGift.data.count = $(target).attr(\"data-count\");\n        }\n\n        // Definition: .\n        function closeGiftSendPanel () {\n            var sendPanel = giftCtrl.giftSendPanel;\n            sendPanel.out = true;\n            sendPanel.outTimeout = setTimeout(function () {\n                sendPanel.out = false;\n                sendPanel.show = false;\n                sendPanel = null;\n            }, 380);\n        }\n\n        // Definition: .\n        function sendGift (event) {\n            liveQuickLogin();\n            if (event.type === \"keyup\" && event.keyCode !== 13) { return; }\n\n            var element = event.target || event.srcElement;\n            var giftData = giftCtrl.sendGift.data;\n            var num = parseInt(giftData.count, 10);\n\n            // .\n            if (isNaN(num)) {\n                giftData.count = \"\";\n                liveToast(element, \" \" + randomEmoji.helpless(), true);\n                return;\n            }\n\n            giftCtrl.$fire(\"sendGift\", {\n                element: element,\n                type: \"normal\",\n                data: {\n                    giftId: giftData.giftId,\n                    num: num,\n                    coinType: giftData.type,\n                    bagId: 0\n                }\n            });\n\n        }\n\n    });\n\n};\n", "/*\n *  Header Section By LancerComet at 17:31, 2015/12/21.\n *  # Carry Your World #\n *  ---\n *  .\n */\n\nvar appConfig = require('../../../common/app-config/app-config');\nvar lazyInit = require(\"../../../common/functions/func-avalon-lazy-init/lazy-init\");\nvar livePopup = require('../../../common/components/live-widget/live-popup/live-popup');\nvar liveToast = require('../../../common/components/live-widget/live-toast/live-toast');\nvar liveQuickLogin = require('../../../common/functions/func-live-quick-login/live-quick-login');\nvar avalonSetNum = require('../../../common/functions/func-setnum-avalon/avalon-set-num');\nvar randomEmoji = require('../../../common/functions/func-random-emoji/random-emoji');\n\nmodule.exports = function (result, window) {\n\n    var headInfoCtrl = null;\n\n    // Definition: .\n    avalon.ready(function () {\n\n        window.ISATTENTION = parseInt(window.ISATTENTION, 10);\n\n        headInfoCtrl = avalon.define({\n            $id: \"headInfoCtrl\",\n\n            // .\n            anchorInfo: {\n                UID: result.data.MASTERID,\n                nickname: result.data.ANCHOR_NICK_NAME,\n                level: result.data.USER_LEVEL.level,\n                rank: result.data.USER_LEVEL.rank,\n                nextScore: 0,\n                levelProgress: \"0%\"\n            },\n\n            // .\n            roomInfo: {\n                title: result.data.ROOMTITLE,\n                area: result.data.AREAID,\n                liveStatus: result.data._status,\n                viewerCount: 0,\n                favourite: 0,\n                giftReceived: 0,\n                starRank: 0\n            },\n\n            // .\n            anchorInfoPanel: {\n                allowRequest: true,\n                show: false,\n                out: false,\n                outTimeout: null,\n                outTimeout2: null,\n                loaded: false,\n                showFunc: function (event) {\n                    event.stopPropagation();\n                    var panel = headInfoCtrl.anchorInfoPanel;\n                    var element = event.target || event.srcElement;\n\n                    clearTimeout(panel.outTimeout);\n                    clearTimeout(panel.outTimeout2);\n                    panel.out = false;\n                    panel.show = true;\n\n                    if (panel.allowRequest) {\n                        $.ajax({\n                            url: \"/user/getMasterInfo\",\n                            type: \"POST\",\n                            data: {\n                                uid: window.MASTERID\n                            },\n                            dataType: \"JSON\",\n                            success: function (result) {\n                                panel.loaded = true;  // .\n\n                                if (result.code != \"REPONSE_OK\") {\n                                    liveToast(element, \"\" + result.msg, \"caution\");\n                                    return;\n                                }\n\n                                headInfoCtrl.anchorInfo.level = result.data.master_level;\n                                headInfoCtrl.anchorInfo.rank = result.data.sort;\n                                headInfoCtrl.anchorInfo.nextScore = parseInt(result.data.upgrade_score, 10);\n\n                                var upLevelScore = parseInt(result.data.next_score, 10);\n\n                                panel.allowRequest = false;\n                                setTimeout(function () {\n                                    headInfoCtrl.anchorInfo.levelProgress = Math.floor((upLevelScore - headInfoCtrl.anchorInfo.nextScore) / upLevelScore * 100) + \"%\";\n                                    upLevelScore = null;\n                                }, 350);\n                            },\n                            error: function (result) {\n                                liveToast(element, \"\" + result.statusText, \"error\");\n                                panel.loaded = true;  // .\n                            }\n                        });\n                    } else {\n                        panel.loaded = true;\n                    }\n\n                },\n                hideFunc: function () {\n                    var panel = headInfoCtrl.anchorInfoPanel;\n                    panel.outTimeout = setTimeout(function () {\n                        panel.out = true;\n                        panel.outTimeout2 = setTimeout(function () {\n                            panel.show = false;\n                            panel.out = false;\n                            panel.loaded = false;\n                            panel = null;\n                        }, 250);\n                    }, 300);\n                }\n            },\n\n            // .\n            report: {\n                show: false,\n                out: false,\n                outTimeout: null,\n                reason: null,\n                imageLink: null,\n                permission: true,\n                statusText: \".\",\n                submitBtn: $(\"#report-upload-image-btn\")[0],\n\n                // .\n                openPanel: function () {\n                    liveQuickLogin();\n                    if (!headInfoCtrl.report.permission) { return; }\n                    headInfoCtrl.report.show = true;\n                    headInfoCtrl.report.permission = false;\n                },\n\n                // .\n                confirm: function (event) {\n                    if (event.type === \"keyup\" && event.keyCode !== 13) { return; }\n                    if (!headInfoCtrl.report.imageLink || !headInfoCtrl.report.reason) {\n                        liveToast(headInfoCtrl.report.submitBtn, \"! \" + randomEmoji.happy());\n                        return;\n                    }\n\n                    $.ajax({\n                        url: \"/liveact/report_room\",\n                        type: \"POST\",\n                        data: {\n                            room_id: window.ROOMID,\n                            picUrl: headInfoCtrl.report.imageLink,\n                            reason: headInfoCtrl.report.reason\n                        },\n                        dataType: \"JSON\",\n                        success: function (result) {\n                            if (result.code != 0) {\n                                resultToast(result.msg);\n                                return;\n                            }\n                            liveToast(headInfoCtrl.report.submitBtn, \", \" + randomEmoji.happy(), \"success\");\n                            headInfoCtrl.report.cancel();\n                        },\n                        error: function (result) {\n                            resultToast(result.statusText);\n                        }\n                    });\n\n                    function resultToast (msg) {\n                        liveToast(headInfoCtrl.report.submitBtn, \"\" + msg + \" > <\", \"caution\");\n                    }\n                },\n\n                // .\n                cancel: function () {\n                    headInfoCtrl.report.out = true;\n                    setTimeout(function () {\n                        headInfoCtrl.report.reason = null;\n                        headInfoCtrl.report.imageLink = null;\n                        headInfoCtrl.report.statusText = \".\";\n                        headInfoCtrl.report.permission = true;\n                        headInfoCtrl.report.out = false;\n                        headInfoCtrl.report.show = false;\n                    }, 380);\n                },\n\n                // .\n                selectImage: function () {\n                    $(\"#report-image\").click();\n                },\n\n                // .\n                uploadImage: function () {\n                    var fileObject = $(\"#report-image\")[0].files[0];\n                    if (!fileObject) { return; }\n                    if (fileObject.type !== \"image/jpeg\" && fileObject.type !== \"image/jpg\" && fileObject.type !== \"image/png\") {\n                        liveToast(headInfoCtrl.report.submitBtn, \" PNG  JPG ~ \" + randomEmoji.helpless());\n                        return;\n                    }\n                    if (fileObject && fileObject.size > 1048576) {\n                        liveToast(headInfoCtrl.report.submitBtn, \" 1MB ! \" + randomEmoji.sad());\n                        return;\n                    }\n                    headInfoCtrl.report.statusText = \", ...\";\n                    var formData = new FormData();\n                    formData.append(\"fileUp\", fileObject);\n                    $.ajax({\n                        xhr: function () {\n                            var xhr = new window.XMLHttpRequest();\n                            xhr.upload.addEventListener(\"progress\", function (event) {\n                                headInfoCtrl.report.statusText = event.lengthComputable && \"\" + (event.loaded / event.total * 100) + \"%\";\n                                headInfoCtrl.report.statusText = event.lengthComputable && event.loaded / event.total === 1 && \", ! \" + randomEmoji.happy();\n                            }, false);\n                            return xhr;\n                        },\n                        url: \"/pic/upload\",\n                        type: \"POST\",\n                        data: formData,\n                        processData: false,\n                        contentType: false,\n                        success: function (result) {\n                            // result: <script>window.parent.uploadSuccess('http://x-img.hdslb.net/group1/M00/2A/11/oYYBAFaDPnaAIGzsAAFpWFacBJs468.jpg|http://x-img.hdslb.net/group1/M00/2A/11/oYYBAFaDPnaAIGzsAAFpWFacBJs468.jpg');</script>\n                            var imgLink = result.toString().match(/http:\\/\\/.*\\|/);\n                            if (imgLink) {\n                                headInfoCtrl.report.imageLink = imgLink[0].slice(0, imgLink[0].length - 1);\n                            } else {\n                                var str = \" PNG  JPG.\";\n                                liveToast($(\"#report-upload-image-btn\"), str, \"caution\");\n                                headInfoCtrl.report.statusText = str;\n                                headInfoCtrl.report.imageLink = null;\n                            }\n                        },\n                        error: function (result) {\n                            consoleText.log(appConfig.consoleText.error + \":\");\n                            consoleText.log(result.statusText);\n                            liveToast(headInfoCtrl.report.submitBtn, \", : \" + result.statusText, \"caution\");\n                            headInfoCtrl.report.imageLink = null;\n                        }\n                    });\n                }\n            },\n\n            // .\n            share: showSharePanel,\n\n            // .\n            liveStatusSwitch: function () {\n                if (parseInt(ISANCHOR, 10) !== 1) { return; }\n\n                // .\n                if (window._status === \"on\") {\n                    headInfoCtrl.liveOffPanel.text = \"\";\n                    headInfoCtrl.liveOffPanel.show = true;\n                } else {\n                    // .\n                    headInfoCtrl.$fire(\"liveStatus\", \"on\");\n                }\n            },\n\n            // .\n            liveOffPanel: {\n                show: false,\n                out: false,\n                outTimeout: null,\n                text: \"\",\n                hide: function () {\n                    headInfoCtrl.liveOffPanel.out = true;\n                    clearTimeout(headInfoCtrl.liveOffPanel.outTimeout);\n                    headInfoCtrl.liveOffPanel.outTimeout = setTimeout(function () {\n                        headInfoCtrl.liveOffPanel.out = false;\n                        headInfoCtrl.liveOffPanel.show = false;\n                    }, 380);\n                }\n            },\n\n            // .\n            offLive: function () {\n                if (quizSystem.betStatus) {\n                    var popup = livePopup({\n                        title: \"\",\n                        html: '<div class=\"popup-content-container\" style=\"margin: 30px; padding: 15px; border-radius: 10px; border: 1px dashed #F54178; color: #F54178; text-align: center; background-color: #FFE2E2;\"><h3 style=\"margin-bottom: 10px; font-weight: 400;\"></h3><p> 5 </p></div>',\n                        button: {\n                            confirm: \"\",\n                            cancel: \"\"\n                        },\n                        onConfirm: function () {\n                            headInfoCtrl.$fire(\"liveStatus\", \"off\");\n                            popup.remove();\n                            popup = null;\n                        }\n                    })\n                } else {\n                    headInfoCtrl.$fire(\"liveStatus\", \"off\");\n                }\n            },\n\n            // .\n            attention: {\n                isAttend: window.ISATTENTION,  // .\n                statusText: (window.ISATTENTION === 1 ? \"\" : \"\"),\n                fansCount: result.data.FANS_COUNT || 0,\n                attend: function (event) {\n                    event.stopPropagation();\n                    liveQuickLogin();\n\n                    var element = event.target || event.srcElement;\n                    var type = window.ISATTENTION === 1 ? 0 : 1;\n\n                    $.ajax({\n                        url: \"/liveact/attention\",\n                        type: \"POST\",\n                        data: {\n                            uid: result.data.MASTERID,\n                            type: type\n                        },\n                        dataType: \"JSON\",\n                        success: function (result) {\n                            if (result.code != 0) {\n                                liveToast(element, result.msg + \" \" + randomEmoji.helpless());\n                                return;\n                            }\n                            window.ISATTENTION = type;\n                            headInfoCtrl.attention.isAttend = type;\n\n                            //  Flash .\n                            try {\n                                $(\"#player_object\")[0].attendStatus(type);\n                            } catch (tryErr) {\n                                // ...\n                            }\n\n                            changeStatusText();\n                            toast();\n                        },\n                        error: function (result) {\n                            liveToast(element, \",  \" + randomEmoji.sad(), \"caution\");\n                        },\n                        timeout: appConfig.appConfig.xhrTimeout\n                    });\n\n                    function changeStatusText () {\n                        if (parseInt(window.ISATTENTION, 10) === 1) {\n                            headInfoCtrl.attention.fansCount += 1;\n                            headInfoCtrl.attention.statusText = \"\";\n                        } else {\n                            headInfoCtrl.attention.fansCount > 0 && headInfoCtrl.attention.fansCount--;\n                            headInfoCtrl.attention.statusText = \"\";\n                        }\n                    }\n\n                    function toast () {\n                        parseInt(window.ISATTENTION, 10) === 1 ? liveToast(element, \" \" + randomEmoji.happy(), \"success\") : liveToast(element, \"~ \" + randomEmoji.helpless(), \"info\");\n                    }\n                },\n                mouseover: false,\n                mouseenter: function () {\n                    headInfoCtrl.attention.mouseover = true;\n                },\n                mouseleave: function () {\n                    headInfoCtrl.attention.mouseover = false;\n                }\n            },\n            roomEdit: function() {\n                headInfoCtrl.$fire(\"all!showRoomEditDialog\");\n            },\n            liveManage: function() {\n                headInfoCtrl.$fire(\"all!showLiveManageDialog\", { curTarget: \"liveManage\"});\n            },\n            blackManage: function() {\n                headInfoCtrl.$fire(\"all!showBlackDialog\");\n            }\n        });\n\n        // Definition: .\n        // Usage: $fire(\"liveStatus\", \"on\" || \"off\")\n        headInfoCtrl.$watch(\"liveStatus\", function (status) {\n            // .\n            if (status === \"on\" || status === true) {\n                changeStatus(1, function () {\n                    headInfoCtrl.roomInfo.liveStatus = \"on\";\n                    headInfoCtrl.$fire(\"all!showStreamCode\");  // .\n                });\n                console.log(\"liveStatus: on\");\n            } else {\n                // .\n                changeStatus(0, function () {\n                    headInfoCtrl.roomInfo.liveStatus = \"off\";\n                    headInfoCtrl.liveOffPanel.hide();\n                });\n                console.log(\"liveStatus: off\");\n            }\n        });\n\n        // Definition: .\n        headInfoCtrl.$watch(\"liveStatusButton\", function (status) {\n            if (status === \"on\" || status === true) {\n                headInfoCtrl.roomInfo.liveStatus = \"on\";\n                console.log(\"liveStatus: on\");\n            } else {\n                headInfoCtrl.roomInfo.liveStatus = \"off\";\n            }\n        });\n\n        // Definition: .\n        headInfoCtrl.$watch(\"liveCutOff\", function () {\n            if (UID != MASTERID) { return; }\n            changeStatus(0)\n        });\n\n        // Definition: .\n        headInfoCtrl.$watch(\"setViewerCount\", function (value) {\n            if (isNaN(parseInt(value, 10))) {\n                throw new Error(appConfig.consoleText.error + \", .\");\n            }\n            avalonSetNum(value, headInfoCtrl.roomInfo.viewerCount, \"headInfoCtrl.roomInfo.viewerCount\");\n        });\n\n        // Definition: .\n        headInfoCtrl.$watch(\"giftReceived\", function (value) {\n            if (isNaN(parseInt(value, 10))) {\n                throw new Error(appConfig.consoleText.error + \", .\");\n            }\n            avalonSetNum(value, headInfoCtrl.roomInfo.giftReceived, \"headInfoCtrl.roomInfo.giftReceived\");\n        });\n\n        // Definition: .\n        headInfoCtrl.$watch(\"shiningStarCount\", function (value) {\n            avalonSetNum(value, headInfoCtrl.roomInfo.starRank, \"headInfoCtrl.roomInfo.starRank\");\n        });\n\n        lazyInit(document.getElementById(\"head-info-panel\"), headInfoCtrl, function () {\n            lazyInit(document.getElementById(\"report-panel\"), headInfoCtrl);\n\n            // .\n            headInfoCtrl.$fire(\"giftReceived\", result.data.RCOST);\n        });\n\n    });\n\n    /* Definition goes below. */\n\n    // Definition: .\n    function changeStatus (type, callback) {\n        if (window.ISANCHOR !== 1) {\n            callback && callback();\n        } else {\n            // type: 0:  || 1: \n            if (type === 0) { headInfoCtrl.liveOffPanel.text = \"\"; }\n            request();\n        }\n\n        function request () {\n            $.ajax({\n                url: \"/liveact/live_status_mng\",\n                type: \"POST\",\n                data: {\n                    status: type,\n                    roomid: ROOMID\n                },\n                dataType: \"JSON\",\n                timeout: appConfig.appConfig.xhrTimeout,\n                success: function (result) {\n                    if (result.code != 0) {\n                        livePopup({\n                            title: \"\",\n                            html: \"<p> > <</p><p>Detail: \" + result.msg + \"</p>\",\n                            type: \"info\"\n                        });\n                        return;\n                    }\n                    window._status = type === 1 ? \"on\" : \"off\";  // .\n                    callback && callback();\n                },\n                error: function (result) {\n                    livePopup({\n                        title: \"\",\n                        html: \"<p> > <</p><p>Detail: \" + result.statusText + \"</p>\",\n                        type: \"info\"\n                    });\n                }\n            });\n        }\n\n    }\n\n    // Definition: .\n    var sharePanel = null;\n    var qrCode = null;\n    function showSharePanel () {\n        var URL = \"http://static.hdslb.com/live-static/libs/\";\n\n        if (!window.QRCode || !window.ZeroClipboard) {\n            $.when(\n                !window.QRCode && $.getScript(URL + \"qr-code/qrcode.min.js\"),\n                !window.ZeroClipboard && $.getScript(URL + \"zero-clipboard/ZeroClipboard.min.js\")\n            ).done(shareExec);\n        } else {\n            shareExec();\n        }\n\n        function shareExec () {\n\n            if (sharePanel) {\n                sharePanel.open();\n            } else {\n\n                // Definition: Copy Data.\n                var roomCopyData = 'http://live.bilibili.com/' + window.ROOMURL;\n                var flashCopyData = 'http://static.hdslb.com/live-static/swf/LivePlayerEx_1.swf?room_id=' + window.ROOMID + '&cid=' + window.ROOMID + '&state=LIVE';\n\n                // Definition: .\n                var panelHTML = '<div class=\"share-panel clear-float\" style=\"padding-top: 10px; height: 80px\">' +\n                    '<div class=\"left-part float-left\">' +\n                    '<div class=\"room-link\">' +\n                    '<span class=\"dp-inline-block\" style=\"width: 75px\"></span><input type=\"text\" id=\"share-room-link\" class=\"live-input\" readonly aria-readonly=\"true\" value=\"' + roomCopyData + '\"><button id=\"share-room-copy\" class=\"live-btn default\" data-clipboard-text=\"' + roomCopyData + '\"></button>' +\n                    '</div>' +\n                    '<div class=\"flash-link\" style=\"margin-top: 16px\">' +\n                    '<span class=\"dp-inline-block\" style=\"width: 75px\">Flash </span><input type=\"text\" id=\"share-flash-link\" class=\"live-input\" readonly aria-readonly=\"true\" value=\"' + flashCopyData + '\"><button id=\"share-flash-copy\" class=\"live-btn default\" data-clipboard-text=\"' + flashCopyData + '\"></button>' +\n                    '</div>' +\n                    '</div>' +\n                    '<div class=\"right-part p-relative float-right\" style=\"top: -25px;\">' +\n                    '<p class=\"text-center\" style=\"margin: 5px\"></p>' +\n                    '<div id=\"share-qr-code\" style=\"width: 70px; height: 70px; padding: 3px; border: 1px solid #4fc1e9; border-radius: 5px\"></div>' +\n                    '</div>' +\n                    '<div class=\"external-link\">' +\n                    '<div id=\"share-qzone\" class=\"link share-btn qzone\"></div>' +\n                    '<div id=\"share-weibo\" class=\"link share-btn weibo\"></div>' +\n                    '</div>' +\n                    '</div>';\n\n                sharePanel = livePopup({\n                    title: \"\",\n                    html: panelHTML,\n                    type: \"info\",\n                    button: false,\n                    width: 450,\n                    initFunc: function () {\n\n                        // Action:  QR .\n                        !qrCode ? qrCode = new QRCode($(\"#share-qr-code\")[0], {\n                            text: roomCopyData,\n                            width: 70,\n                            height: 70\n                        }) : void(0);\n\n\n                        var roomCopy = new ZeroClipboard($(\"#share-room-copy\")[0]);\n                        roomCopy.on(\"ready\", function (readyEvent) {\n                             //alert( \"ZeroClipboard SWF is ready!\" );\n                            roomCopy.on(\"aftercopy\", function (event) { liveToast($(\"#share-room-copy\")[0], \"\" + randomEmoji.happy(), \"success\", true); });\n                        });\n\n                        var flashCopy = new ZeroClipboard($(\"#share-flash-copy\")[0]);\n                        flashCopy.on(\"ready\", function (readyEvent) {\n                            //alert( \"ZeroClipboard SWF is ready!\" );\n                            flashCopy.on(\"aftercopy\", function (event) { liveToast($(\"#share-flash-copy\")[0], \"\" + randomEmoji.happy(), \"success\", true); });\n                        });\n\n                    }\n                });\n\n                // Action: .\n                var shareData = {\n                    url: window.location.href,\n                    title: ROOMTITLE + '',\n                    pic: '',\n                    nickname: ANCHOR_NICK_NAME,\n                    desc: ROOMTITLE + '',\n                    summary: ' ',\n                    shortTitle: document.title,\n                    searchPic: false\n                };\n\n                // QZone .\n                $(\"#share-qzone\").off(\"click\").on(\"click\", function () {\n                    openShareWindow('http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?', {\n                        url: shareData.url || \"\",\n                        showcount: 1,\n                        desc: shareData.desc || \"\",\n                        summary: shareData.summary || \"\",\n                        title: '##' + (shareData.weiboTag || \"\") + (shareData.title || \"\") + '' + (shareData.nickname || \"\") + '',\n                        site: '',\n                        pics: shareData.pic || \"\",\n                        style: '203',\n                        width: 98,\n                        height: 22\n                    });\n                });\n\n                // .\n                $(\"#share-weibo\").off(\"click\").on(\"click\", function () {\n                    openShareWindow('http://service.weibo.com/share/share.php?', {\n                        url: shareData.url,\n                        type: '3',\n                        count: '1',\n                        /**1()*/\n                        appkey: shareData.appkey && shareData.appkey.weibo ? shareData.appkey.weibo : '2841902482',\n                        /**appkey,()*/\n                        title: '##' + (shareData.weiboTag || \"\") + (shareData.title || \"\") + '' + (shareData.nickname || \"\") + '',\n                        /**(title)*/\n                        pic: shareData.pic || \"\",\n                        /**()*/\n                        searchPic: shareData.searchPic === false ? false : true,\n                        ralateUid: '',\n                        /**UID@()*/\n                        language: 'zh_cn',\n                        /**zh_cn|zh_tw()*/\n                        rnd: new Date().valueOf()\n                    });\n                });\n\n            }\n        }\n    }\n\n    // Definition: .\n    function openShareWindow (base, param) {\n        var temp = [];\n        for (var p in param) {\n            temp.push(p + '=' + encodeURIComponent(param[p] || ''));\n        }\n        var _u = base + temp.join('&');\n        window.open(_u, '', 'width=700, height=680, top=0, left=0, toolbar=no, menubar=no, scrollbars=no, location=yes, resizable=no, status=no');\n        return false;\n    }\n\n};\n", "/*\n *  Bilibili Room Sidebar Left Intro at 12:18, 2015.12.21.\n *  ---\n *\n *  \n *  ---\n *   Sidebar Left JS .\n *  , .\n *\n *  \n *  ---\n *  \n *  VM.$fire(\"all!toggleRoomSidebarLeft\");\n *\n *  \n *  VM.$fire(\"all!toggleRoomSidebarLeft\", true);\n *\n *  \n *  VM.$fire(\"all!toggleRoomSidebarLeft\", false);\n *\n */\n\nmodule.exports = function () {\n    var roomSidebarLeftVM = require(\"./javascripts/sidebar-ctrl\")();\n};", "/*\n *  Sidebar Avalon Controller transferred By LancerComet at LancerComet at 10:48, 2015/12/22.\n *  Originally By Felix.\n *  # Carry Your World #\n *  ---\n *  .\n */\n\nvar wish = require(\"../../wish/intro.js\")();\nrequire('perfect-scrollbar/jquery')(window.jQuery);\n\n\n// Definition: . .\nvar roomSidebarLeftVM = null;\n\nmodule.exports = function () {\n    \"use strict\";\n\n    // Definition: .\n    roomSidebarLeftVM = avalon.define({\n        $id: \"roomSidebarLeftCtrl\",\n        newTask: false,  // ,  true ,  .splashing .\n        roomSidebarLeftStatus: true,  // .\n\n        //  Sidebar Left\n        toggleSidebarLeft: function () {\n            // \n            roomSidebarLeftVM.roomSidebarLeftStatus = !roomSidebarLeftVM.roomSidebarLeftStatus;\n        },\n\n        // .\n        clickWish: function() {\n            wish.show();\n        }\n\n    });\n\n    // \n    roomSidebarLeftVM.$watch(\"roomSidebarLeftStatus\", function (status) {\n        status ? sideBarOpen() : sideBarClose();\n    });\n\n    //  toggleRoomSidebarLeft fire ..\n    roomSidebarLeftVM.$watch(\"toggleRoomSidebarLeft\", function (status) {\n        //  status , , \n        roomSidebarLeftVM.roomSidebarLeftStatus = typeof status === \"boolean\" ? status : !roomSidebarLeftVM.roomSidebarLeftStatus;\n    });\n\n\n    return roomSidebarLeftVM;\n};\n\n$(function() {\n    $(\".room-left-sidebar\").find(\".main-ctnr\").perfectScrollbar();  // \n    setTimeout(leftSidebarStatus, 500);\n});\n\n\n/* Definition goes below. */\n\n// Definition: .\n//  localStorage .\nfunction leftSidebarStatus () {\n\n    // Error Handler.\n    if (!localStorage) { return; }\n\n    // Definition: .\n    var visitTime = Date.now();\n\n    // Definition: .\n    var lastVisitTime = localStorage.getItem(\"lastVisitTime\");\n\n    // , .\n    //  24 , .\n    if (!lastVisitTime || visitTime - lastVisitTime >= 86400000) {\n        setVisitTime(visitTime);\n        sideBarOpen();\n        return;\n    }\n\n    // .\n    var sidebarStatus = localStorage.getItem(\"sidebarStatus\");\n    if (sidebarStatus === \"open\") { sideBarOpen() } else { sideBarClose() }\n\n    visitTime = null;\n    sidebarStatus = null;\n\n}\n\n// Definition: .\nfunction setVisitTime (visitTime) {\n    localStorage.setItem(\"lastVisitTime\", visitTime);\n}\n\n// Definition: .\nfunction sideBarOpen () {\n    $(\".body-container\").addClass(\"sidebar-left-open\");\n    localStorage.setItem(\"sidebarStatus\", \"open\");\n    roomSidebarLeftVM.roomSidebarLeftStatus = true;\n}\n\n// Definition: .\nfunction sideBarClose () {\n    $(\".body-container\").removeClass(\"sidebar-left-open\");\n    localStorage.setItem(\"sidebarStatus\", \"closed\");\n    roomSidebarLeftVM.roomSidebarLeftStatus = false;\n}\n", "/*\n *  Bilibili Live Room My Attention at 12:04, 2015.12.23.\n *  ---\n *\n *  \n *  ---\n *   JS .\n *  , .\n */\n\nmodule.exports = function () {\n    require(\"./javascripts/my-attention.js\")();  // \n};", "/*\n *  Bilibili Live Room My Attention at 12:11, 2015.12.23.\n *  ---\n *\n *  \n *  ---\n *  \n *\n */\n\nrequire('perfect-scrollbar/jquery')($);\nvar liveQuickLogin = require('../../../../common/functions/func-live-quick-login/live-quick-login');\n\n// \nmodule.exports = function () {\n    var heartBeatTimer = null,\n        FEED_HEARTBEAT = 0,\n        FEED_LIST_PAGER = 1;\n\n    //  VM\n    var attentionVM = avalon.define({\n        $id: \"myAttentionCtrl\",\n        open: false,\n        list: [],\n        hasMore: false,\n        feedMode: 1,\n        count: 0,\n\n        // \n        setFeedMode: function () {\n            attentionVM.feedMode = (attentionVM.feedMode == 1)  ? 0 : 1;\n            $.ajax({\n                url: \"/feed/on/\",\n                data: {\n                    open: attentionVM.feedMode\n                },\n                type: \"POST\",\n                dataType: \"JSON\",\n                success: function (result) {\n                    attentionVM.feedMode = result.data.open;\n                }\n            });\n        },\n\n        // \n        listItemsReady: function () {\n            var $panel = $(this).parent(\".my-attention-body\");\n            // \n            $panel.perfectScrollbar(\"update\");\n        },\n\n        // \n        readMore: function () {\n            liveQuickLogin();\n            window.open('/i/following', '_blank');\n        }\n    });\n\n    //  Cookie\n    var setAttentionCookie = function(data) {\n        var now = new Date(),\n            expiresDate = new Date(now.getTime() + 60 * 1000),\n            dataString = JSON.stringify(data);\n\n        $.cookie(\"attentionData\", dataString, {\n            expires: expiresDate\n        });\n\n    };\n\n    // \n    var changeData = function (result) {\n\n        FEED_HEARTBEAT = result.data.hb;\n        attentionVM.feedMode = result.data.open;\n\n        if (result.code == 0) {\n            attentionVM.count = result.data.count;\n            if (result.data.open && result.data.has_new) {  //  && \n                FEED_LIST_PAGER = 1;\n                attentionVM.open = true;\n                attentionVM.$fire(\"all!toggleRoomSidebarLeft\", true);\n                getFeedList();\n            }\n        } else {\n            clearInterval(heartBeatTimer);\n        }\n    };\n\n    // \n    var heartBeat = function () {\n        $.ajax({\n            url: \"/feed/heartBeat/heartBeat\",\n            data: {\n                hb: FEED_HEARTBEAT\n            },\n            type: \"POST\",\n            dataType: \"JSON\",\n            cache: false,\n            success: function (result) {\n                changeData(result);\n                setAttentionCookie(result);\n            }\n        });\n\n    };\n\n    //  &  60 \n    heartBeat();\n    //  WebSocket window.WebSocket\n    if (false){\n        var client = new MyClient({\n            notify: function() {\n                heartBeat();\n            }\n        });\n    } else {\n        // 60\n        heartBeatTimer = setInterval(function () {\n            var attentionData = $.cookie(\"attentionData\"),\n                attentionDataJSON;\n\n            if (attentionData) {\n                attentionDataJSON = $.parseJSON(attentionData);\n                changeData(attentionDataJSON);\n            } else {\n                heartBeat();\n            }\n        }, 1000 * 60);\n    }\n\n    // \n    var getFeedList = function () {\n        $.ajax({\n            url: \"/feed/getList/\" + FEED_LIST_PAGER,\n            type: \"POST\",\n            dataType: \"JSON\",\n            cache: false,\n            success: function (result) {\n                var $panel = $(\"#room-my-attention .my-attention-body\");\n                //  list  list \n                if (FEED_LIST_PAGER == 1) {\n                    $panel.scrollTop(0);\n                    attentionVM.list = result.data.list;\n                } else {\n                    attentionVM.list = attentionVM.list.concat(result.data.list);\n                }\n\n                //  10,  hasMore  false\n                if (result.data.list.length < 10) {\n                    attentionVM.hasMore = false;\n                } else {\n                    attentionVM.hasMore = true;\n                }\n            }\n        });\n    };\n\n    getFeedList();\n\n    $(function() {\n        // \n        var $panel = $(\"#room-my-attention .my-attention-body\");\n        $panel.perfectScrollbar();\n\n        // Feed\n        $panel.on('ps-y-reach-end', function () {\n            if (attentionVM.hasMore) {\n                FEED_LIST_PAGER++;\n                getFeedList();\n            }\n        });\n    });\n}\n\n", "/*\n *  Quiz System Intro File By LancerComet at 10:40, 2015/12/17.\n *  # Carry Your World #\n *  ---\n *  .\n *\n */\n\nmodule.exports = function () {\n    require(\"./javascripts/quiz-protocol\")(window);  // .\n    require(\"./javascripts/quiz-avalon-ctrl\")(window, window.avalon);  // .\n};\n", "/*\n *  Quiz Avalon Controller By LancerComet at 14:06, 2015/12/18.\n *  # Carry Your World #\n *  ---\n *   Avalon .\n *\n */\n\nvar appConfig = require('../../../../common/app-config/app-config');\nvar avalonSetNum = require('../../../../common/functions/func-setnum-avalon/avalon-set-num');\nvar lazyInit = require(\"../../../../common/functions/func-avalon-lazy-init/lazy-init\");\nvar liveToast = require('../../../../common/components/live-widget/live-toast/live-toast');\nvar randomEmoji = require(\"../../../../common/functions/func-random-emoji/random-emoji\");\nvar livePopup = require('../../../../common/components/live-widget/live-popup/live-popup');\n\n// Definition: .\nvar timeouts = {\n    residentCountChk: null\n};\n\nmodule.exports = function (window, avalon, undefined) {\n    \"use strict\";\n\n    // Definition: .\n    // .\n    window.quizSystem = {\n        betStatus: false  // ,  false.\n    };\n\n    //  Avalon .\n    avalon.ready(quizCtrlInit);\n\n    // Definition: .\n    function quizCtrlInit () {\n\n        // Definition: .\n        var quizCtrl = avalon.define({\n            $id: \"quizCtrl\",\n\n            // .\n            quiz: {\n                betId: -1,  //  ID.\n                betStatus: false,  // .\n                disabled: false,  // .\n\n                // .\n                info: {\n                    id: null,  //  ID, .\n                    uid: null,  //  UID.\n                    question: \"--\",  // .\n                    a: \"--\",  //  A.\n                    b: \"--\",  //  B.\n                    answer: null,  // .\n                    status: null,  // .\n                    update_time: null  // .\n                },\n\n                // .\n                answerInfo: {\n                    gold: { a: {}, b: {} },\n                    silver: { a: {}, b: {} }\n                },\n\n                // ..\n                beResidentData: {\n                    answer: \"\",  // \"a\" || \"b\"\n                    currencyType: \"silver\",  // , .\n                    odds: \"\",  // .\n                    oddsChk: function (event) {\n                        var target = event.target || event.srcElement;\n                        var odds = parseFloat(quizCtrl.quiz.beResidentData.odds);\n                        if (isNaN(odds)) {\n                            liveToast(target, \"~ ~ \" + randomEmoji.helpless());\n                            quizCtrl.quiz.beResidentData.odds = \"\";\n                            return;\n                        }\n                        clearTimeout(quizCtrl.quiz.beResidentData.oddsChkTimeout);\n                        quizCtrl.quiz.beResidentData.oddsChkTimeout = setTimeout(function () {\n                            if (odds < 0.1 || odds > 9.9) {\n                                liveToast(target, \" 0.1  9.9 ~ \" + randomEmoji.helpless());\n                                quizCtrl.quiz.beResidentData.odds = \"\";\n                            }\n                        }, 10);\n                    },\n                    oddsChkTimeout: null,\n                    residentCount: \"\"  // .\n                },\n\n                // .\n                betBuyData: {\n                    bankerId:\"\",\n                    buyCount : \"\",\n                    maxBuyCount: 0,  // , .\n                    buyIncome: 0  // , .\n                },\n\n                // .\n                quizCheckoutData: {\n                    choicedAnswer: \"\"\n                },\n\n                permission: false,  // .\n                allowNewQuiz: false,  // .\n                quizJoined: false,  // . , .\n                initFinished: false  // .\n            },\n\n            // .\n            account: {\n                currency: { gold: \"--\", silver: \"--\"},  // .\n                type: false  // , \"anchor\" || \"guest\" || false, .\n            },\n\n            // .\n            doms: {\n\n                //  Title.\n                displayTitle: \"\",\n\n                // .\n                quizSetupPanel: {\n                    show: false,\n                    out: false,\n                    outTimeout: null\n                },\n\n                // .\n                betBuyPanel: {\n                    show: false,\n                    out: false,\n                    outTimeout: null\n                },\n\n                // .\n                beResidentPanel: {\n                    show: false,\n                    out: false,\n                    outTimeout: null\n                },\n\n                // .\n                subscriptionList: {\n                    show: false,\n                    out: false,\n                    outTimeout: null\n                },\n\n                // .\n                adjournPanel: {\n                    show: false,\n                    out: false,\n                    outTimeout: null\n                },\n\n                // .\n                quizCheckoutPanel: {\n                    show: false,\n                    out: false,\n                    outTimeout: null\n                }\n\n            },\n\n            // ,  Dom .\n            events: {\n\n                // .\n                quizSetup: function () {\n                    quizCtrl.quiz.allowNewQuiz && !quizCtrl.quiz.betStatus && quizCtrl.account.type === \"anchor\" && quizCtrl.$fire(\"QuizSetup\");\n                },\n\n                // .\n                quizCancelSetup: function () {\n                    quizCtrl.$fire(\"QuizCancelSetup\");\n                },\n\n                // .\n                quizStart: function (event) {\n                    if (event.keyCode === 13 || !event.keyCode) {\n                        var target = event.target || event.srcElement;\n                        if (quizCtrl.quiz.info.question.length < 1 || quizCtrl.quiz.info.a.length < 1 || quizCtrl.quiz.info.b.length < 1) {\n                            liveToast(target, \"~ \" + randomEmoji.helpless());\n                            return;\n                        }\n                        quizCtrl.$fire(\"QuizStart\", {\n                            toastElement: target\n                        });\n                    }\n                },\n\n                // .\n                quizAdjourn: function () {\n                    quizCtrl.$fire(\"QuizAdjourning\");\n                },\n\n                // .\n                quizAdjournConfirm: function (event) {\n                    quizCtrl.$fire(\"QuizAdjournConfirm\", {\n                        targetElement: event.target || event.srcElement\n                    })\n                },\n\n                // .\n                quizAdjournCancel: function () {\n                    quizCtrl.$fire(\"QuizAdjournCancel\");\n                },\n\n                // .\n                quizOnClose: function () {\n                    quizCtrl.$fire(\"QuizOnClose\");\n                },\n\n                // .\n                quizCheckout: function (event) {\n                    quizCtrl.$fire(\"QuizCheckout\", {\n                        targetElement: event.target || event.srcElement\n                    });\n                },\n\n                // .\n                quizCancelCheckout: function () {\n                    quizCtrl.$fire(\"QuizCancelCheckout\")\n                },\n\n                // .\n                betBuy: function (event) {\n                    var target = event.target || event.srcElement;\n\n                    quizCtrl.$fire(\"BetBuy\", function () {\n                        var answerInfo = quizCtrl.quiz.answerInfo[target.attributes[\"data-type\"].value][target.attributes[\"data-target\"].value];\n                        // , .\n                        // quizCtrl.quiz.answerInfo.silver.a || quizCtrl.quiz.answerInfo.silver.b\n\n                        //  bankerId.\n                        quizCtrl.quiz.betBuyData.bankerId = answerInfo.id;\n\n                        // .\n                        quizCtrl.quiz.betBuyData.maxBuyCount = answerInfo.amount ? answerInfo.amount : 0;\n\n                        // .\n                        quizCtrl.quiz.betBuyData.odds = answerInfo.times ? answerInfo.times : 0.1;\n\n                        // .\n                        quizCtrl.quiz.betBuyData.buyIncome = 0;\n                    });\n                },\n\n                // .\n                buyMax: function () {\n                    quizCtrl.quiz.betBuyData.buyCount = quizCtrl.quiz.betBuyData.maxBuyCount;\n                    quizCtrl.quiz.betBuyData.buyIncome = Math.floor(quizCtrl.quiz.betBuyData.buyCount * (1 + quizCtrl.quiz.betBuyData.odds) * 0.95);\n                },\n\n                // .\n                updateBetBuyIncome: function (event) {\n                    //  betBuyData .\n\n                    quizCtrl.quiz.betBuyData.buyCount = parseInt(quizCtrl.quiz.betBuyData.buyCount, 10);\n\n                    // Error Handler.\n                    if (isNaN(quizCtrl.quiz.betBuyData.buyCount)) {\n                        quizCtrl.quiz.betBuyData.buyCount = null;\n                        liveToast(event.target || event.srcElement, \" \" + randomEmoji.helpless());\n                    }\n\n                    if (parseInt(quizCtrl.quiz.betBuyData.buyCount, 10) > parseInt(quizCtrl.quiz.betBuyData.maxBuyCount, 10)) {\n                        quizCtrl.quiz.betBuyData.buyCount = quizCtrl.quiz.betBuyData.maxBuyCount;\n                        liveToast(event.target || event.srcElement, \" \" + randomEmoji.helpless());\n                    }\n\n                    quizCtrl.quiz.betBuyData.buyIncome = Math.floor(quizCtrl.quiz.betBuyData.buyCount * (1 + quizCtrl.quiz.betBuyData.odds) * 0.95);\n\n                    event.keyCode === 13 && quizCtrl.events.betBuyConfirm(event);\n                },\n\n                // .\n                betBuyConfirm: function (event) {\n                    if (event.type === \"keyup\" && event.keyCode !== 13) { return; }\n                    quizCtrl.$fire(\"BetBuyConfirm\", event);\n                },\n\n                // .\n                betBuyCancel: function () {\n                    quizCtrl.$fire(\"BetBuyCancel\");\n                },\n\n                // .\n                betBeResident: function (event) {\n                    quizCtrl.$fire(\"BetBeResident\");\n                },\n\n                // .\n                betBeResidentConfirm: function (event) {\n                    var target = event.target || event.srcElement;\n                    var residentCount = parseInt(quizCtrl.quiz.beResidentData.residentCount, 10);\n\n                    // Error Handler.\n                    if (isNaN(quizCtrl.quiz.beResidentData.residentCount)) {\n                        liveToast(target, \"~ ~ \" + randomEmoji.helpless());\n                        quizCtrl.quiz.beResidentData.residentCount = \"\";\n                        return;\n                    }\n\n                    clearTimeout(timeouts.residentCountChk);\n                    timeouts.residentCountChk = setTimeout(function () {\n                        residentCount < 10000 && liveToast(target, \" 10000 ~ \" + randomEmoji.helpless());\n                    }, 300);\n\n                    if (event.keyCode && event.keyCode !== 13) { return; }\n\n                    if (residentCount < 10000) {\n                        clearTimeout(timeouts.residentCountChk);\n                        liveToast(target, \" 10000 ~ \" + randomEmoji.helpless());\n                        return;\n                    }\n\n                    quizCtrl.$fire(\"BetBeResidentConfirm\", {\n                        element: target\n                    });\n\n                },\n\n                // .\n                beResidentCancel: function () {\n                    quizCtrl.$fire(\"BetBeResidentCancel\");\n                },\n\n                // .\n                showSubscription: function (event) {\n                    quizCtrl.$fire(\"BetShowSubscriptionList\", event);\n                },\n\n                // .\n                closeSubScription: function () {\n                    quizCtrl.doms.subscriptionList.out = true;\n                    setTimeout(function () {\n                        quizCtrl.doms.subscriptionList.show = false;\n                        quizCtrl.doms.subscriptionList.out = false;\n                    }, 380);\n                }\n\n            },\n\n            // .\n            data: {\n                subscriptionList: []  // .\n            }\n\n        });\n\n\n        // Definition: .\n        (function quizEventsDefinition () {\n\n            // .\n            // ==========================================\n            require(\"./quiz-ctrl-quiz-setup\")(quizCtrl);\n\n\n            // .\n            // ==========================================\n            require(\"./quiz-ctrl-methods\")(quizCtrl);\n\n\n            // .\n            // ==========================================\n            require(\"./quiz-ctrl-user-events\")(quizCtrl);\n\n\n            // .\n            // ==========================================\n            require(\"./quiz-ctrl-status-ctrl\")(quizCtrl);\n\n\n            // .\n            // ==========================================\n            (function publicService () {\n                // Definition: .\n                quizCtrl.$watch(\"fillCurrency\", function (value) {\n                    if (value.gold !== undefined && value.gold !== null) { quizCtrl.account.currency.gold = value.gold; }\n                    if (value.silver !== undefined && value.silver !== null) { quizCtrl.account.currency.silver = value.silver; }\n                });\n            })();\n\n        })();\n\n        // Action: .\n        if ($.cookie(\"DedeUserID\") && parseInt(window.ISANCHOR, 10) === 1) {\n            quizCtrl.account.type = \"anchor\";\n        }\n\n        if ($.cookie(\"DedeUserID\") && parseInt(window.ISANCHOR, 10) === 0) {\n            quizCtrl.account.type = \"guest\";\n        }\n\n        if (!$.cookie(\"DedeUserID\")) {\n            quizCtrl.account.type = false;  // .\n        }\n\n        // .\n        avalon.templateCache[\"quiz-panel.html\"] = \"\";\n        avalon.templateCache[\"quiz-panel-anchor.html\"] = \"\";\n\n        // .\n        lazyInit(document.getElementById(\"quiz-control-panel\"), quizCtrl, secInit);\n\n        // . , .\n        function secInit () {\n            quizCtrl.$fire(\"QuizCheckStatus\");\n            lazyInit(document.getElementById(\"quiz-setting-container\"), quizCtrl);\n            lazyInit($(\"#room-left-sidebar\").find(\".small-btn.quiz\")[0], quizCtrl);\n        }\n    }\n\n};", "(function (global){\n/*\n *  Live Quiz Control Methods By LancerComet at 10:15, 2015/12/23.\n *  # Carry Your World #\n *  ---\n *  .\n */\nvar appConfig = require('../../../../common/app-config/app-config');\nvar liveToast = require('../../../../common/components/live-widget/live-toast/live-toast');\nvar livePopup = require('../../../../common/components/live-widget/live-popup/live-popup');\nvar randomEmoji = require(\"../../../../common/functions/func-random-emoji/random-emoji\");\n\n// .\n// ==========================================\nmodule.exports = function (quizCtrl) {\n\n    // Definition: .\n    quizCtrl.$watch(\"QuizStart\", function (param) {\n        /*\n         *   @ param: {\n         *     targetElement: HTMLElement  // .\n         *   }\n         */\n        $.ajax({\n            url: \"/bet/addBet\",\n            type: \"POST\",\n            dataType: \"JSON\",\n            data: {\n                question: quizCtrl.quiz.info.question,\n                a: quizCtrl.quiz.info.a,\n                b: quizCtrl.quiz.info.b,\n                token: $.cookie(\"LIVE_LOGIN_DATA\") || \"\"\n            },\n            success: function (result) {\n                if (result.code != 0) {\n                    consoleText.log(appConfig.consoleText.error + \",  ()\");\n                    consoleText.log(\"Detail: \" + result.msg.toString());\n                    liveToast(param.toastElement, \"\" + result.msg.toString(), \"error\");\n                    return;\n                }\n\n                quizCtrl.quiz.betId = result.data.betId;  //  betID.\n                quizCtrl.quiz.allowNewQuiz = false;  // .\n                quizCtrl.quiz.quizJoined = true;  // .\n                quizCtrl.events.quizCancelSetup();  // , .\n\n                //  BET_START,  BET_START .\n            },\n            error: function (result) {\n                consoleText.log(appConfig.consoleText.error + \", \");\n                liveToast(param.toastElement, \",  \" + randomEmoji.sad(), \"error\");\n            }\n        });\n    });\n\n    // Definition: .\n    quizCtrl.$watch(\"QuizAdjourning\", function () {\n        if (quizCtrl.account.type !== \"anchor\" || quizCtrl.quiz.allowNewQuiz) { return; }\n        quizCtrl.doms.adjournPanel.show = true;\n        quizCtrl.quiz.allowNewQuiz = false;\n    });\n\n    // Definition: .\n    quizCtrl.$watch(\"QuizAdjourned\", function () {\n        quizCtrl.quiz.disabled = true;\n        quizCtrl.doms.displayTitle = \" \" + randomEmoji.helpless();\n        quizCtrl.quiz.allowNewQuiz = false;\n        setTimeout(function () {\n            ISANCHOR != 1 && liveToast($(\".be-resident-btn\"), \"~ \" + randomEmoji.helpless());\n        }, 1);\n    });\n\n    // Definition: .\n    quizCtrl.$watch(\"QuizAdjournCancel\", function () {\n        quizCtrl.doms.adjournPanel.out = true;\n        setTimeout(function () {\n            quizCtrl.doms.adjournPanel.show = false;\n            quizCtrl.doms.adjournPanel.out = false;\n        }, 380);\n    });\n\n    // Definition: .\n    quizCtrl.$watch(\"QuizAdjournConfirm\", function (param) {\n        /*\n         *   @ param: {\n         *     targetElement: HTMLElement  // .\n         *   }\n         */\n        if (quizCtrl.account.type !== \"anchor\" || quizCtrl.quiz.allowNewQuiz) { return; }\n\n        // .\n        $.ajax({\n            url: \"/bet/seal\",\n            type: \"POST\",\n            data: {\n                betId: quizCtrl.quiz.betId,\n                token: $.cookie(\"LIVE_LOGIN_DATA\") || \"\"\n            },\n            dataType: \"JSON\",\n            success: function (result) {\n                if (result.code != 0) {\n                    var msg = result.msg ? result.msg : \"\";\n                    liveToast(param.targetElement, \"\" + msg + \" \" + randomEmoji.sad(), \"error\");\n                    return;\n                }\n                liveToast(param.targetElement, \"\" + randomEmoji.happy(), \"success\");\n                quizCtrl.$fire(\"QuizAdjournCancel\");\n            },\n            error: function (result) {\n                var msg = result.msg ? result.msg : \"\";\n                liveToast(param.targetElement, \"\" + msg + \" \" + randomEmoji.sad(), \"error\");\n            }\n        });\n    });\n\n    // Definition: ., \n    quizCtrl.$watch(\"QuizOnClose\", function () {\n        if (quizCtrl.account.type !== \"anchor\" || quizCtrl.quiz.allowNewQuiz) { return; }\n        quizCtrl.doms.quizCheckoutPanel.show = true;\n    });\n\n    // Definition: .\n    quizCtrl.$watch(\"QuizCheckout\", function (param) {\n        if (quizCtrl.account.type !== \"anchor\" || quizCtrl.quiz.allowNewQuiz) { return; }\n        if (quizCtrl.quiz.betId === null || quizCtrl.quiz.betId === undefined) {\n            livePopup({\n                title: \"\",\n                html: \"<p> ID, , , , , > <<br/><br/>Detail:  betId.</p>\",\n                type: \"alert\"\n            });\n            return;\n        }\n\n        if (!quizCtrl.quiz.quizCheckoutData.choicedAnswer) {\n            liveToast(param.targetElement, \"~ \" + randomEmoji.helpless());\n            return;\n        }\n\n        $.ajax({\n            url: \"/bet/endBet\",\n            type: \"POST\",\n            dataType: \"JSON\",\n            data: {\n                betId: quizCtrl.quiz.betId,\n                answer: quizCtrl.quiz.quizCheckoutData.choicedAnswer,\n                token: $.cookie(\"LIVE_LOGIN_DATA\") || \"\"\n            },\n            success: function (result) {\n                if (result.code != 0) {\n                    liveToast(param.targetElement, \"\" + result.msg, \"error\");\n                    return;\n                }\n                liveToast(param.targetElement, \"~ \" + randomEmoji.happy() || result.msg, \"success\");\n                quizCtrl.$fire(\"QuizCancelCheckout\");\n            },\n            error: function (result) {\n                livePopup({\n                    title: \" \" + randomEmoji.sad(),\n                    html: \"<p>, , , \" + randomEmoji.sad() + \"<br/><br/>Detail: \" + result.statusText + \"</p>\"\n                });\n            }\n        });\n\n    });\n\n    // Definition: .\n    quizCtrl.$watch(\"QuizCancelCheckout\", function () {\n        quizCtrl.doms.quizCheckoutPanel.out = true;\n        quizCtrl.quiz.quizCheckoutData.choicedAnswer = null;\n        setTimeout(function () {\n            quizCtrl.doms.quizCheckoutPanel.show = false;\n            quizCtrl.doms.quizCheckoutPanel.out = false;\n        }, 380);\n    });\n\n    // Definition: .\n    quizCtrl.$watch(\"QuizOnEnding\", function () {\n        console.log(\"avalon: QuizOnEnding\");\n        quizCtrl.quiz.disabled = true;\n        quizCtrl.doms.displayTitle = \" \" + randomEmoji.helpless();\n        quizCtrl.quiz.info.question += \"\";\n        setTimeout(function () {\n            ISANCHOR != 1 && liveToast($(\".be-resident-btn\"), \"~ \" + randomEmoji.happy(), \"success\");\n        }, 1);\n    });\n\n    // Definition: .\n    quizCtrl.$watch(\"QuizGetResult\", function (callback) {\n        console.log(\"Event: QuizGetResult\");\n        console.log(\"QuizJoined: \" + quizCtrl.quiz.quizJoined);\n\n\n        if (!quizCtrl.quiz.quizJoined) {\n            quizCtrl.$fire(\"QuizRestorePanel\");\n            return;\n        }\n\n        $.ajax({\n            url: \"/bet/getUserProfit\",\n            type: \"POST\",\n            data: {\n                betId: quizCtrl.quiz.betId\n            },\n            dataType: \"JSON\",\n            success: function (result) {\n                if (result.code != 0) {\n                    consoleText.log(appConfig.consoleText.error + \".\");\n                    consoleText.log(\"Detail: \" + result.msg);\n                    return;\n                }\n\n                // Definition: .\n                var summary = {\n                    gold: parseInt(result.data.profit.gold, 10),\n                    silver: parseInt(result.data.profit.silver, 10)\n                };\n\n                // .\n                var summaryPanel = null;\n                var resultText = {\n                    gold: \"\",\n                    silver: \"\"\n                };\n\n                // Action: .\n                // , .\n                parseInt(global.ISANCHOR, 10) === 1 ? anchorResult() : guestResult();\n                \n                function anchorResult () {\n                    //summary.gold >= 0 ? resultText.gold = '<p style=\"color: #4fc1e9; margin:10px 0\"><i class=\"live-icon gold-seed\"></i>  ' + summary.gold + ' </p>' : resultText.gold = '<p style=\"color: #E16C97; margin:10px 0\"><i class=\"live-icon gold-seed\"></i>  ' + (-summary.gold) + ' </p>';\n                    summary.silver >= 0 ? resultText.silver = '<p style=\"color: #4fc1e9\"><i class=\"live-icon silver-seed v-middle\"></i><span class=\"v-middle\" style=\"margin-left: 5px\">  ' + summary.silver + ' </span></p>' : resultText.silver = '<p style=\"color: #E16C97\"><i class=\"live-icon silver-seed\"></i>  ' + (-summary.silver) + ' </p>';\n\n                    summaryPanel = livePopup({\n                        title: \"\",\n                        html: '<p></p>' +\n                        '<p class=\"text-center\">' + resultText.gold + resultText.silver + '</p>' +\n                        '<p style=\"text-align:center; margin: 10px 0;\"><a href=\"/i/bet\" target=\"_blank\" style=\"color: #4fc1e9;\">...</a></p>',\n                        type: \"info\",\n                        width: 300,\n                        onConfirm: function () {\n                            summaryPanel.remove();\n                            summaryPanel = null;\n                        }\n                    });\n                }\n                \n                \n                function guestResult () {\n\n                    //summary.gold >= 0 ? resultText.gold = '<p style=\"color: #4fc1e9; margin:10px 0\"><i class=\"live-icon gold-seed\"></i>  ' + summary.gold + ' </p>' : resultText.gold = '<p style=\"color: #E16C97; margin:10px 0\"><i class=\"live-icon gold-seed\"></i>  ' + (-summary.gold) + ' </p>';\n                    summary.silver >= 0 ? resultText.silver = '<p style=\"color: #4fc1e9\"><i class=\"live-icon silver-seed v-middle\"></i><span class=\"v-middle\" style=\"margin-left: 5px\">  ' + summary.silver + ' </span></p>' : resultText.silver = '<p style=\"color: #E16C97\"><i class=\"live-icon silver-seed\"></i>  ' + (-summary.silver) + ' </p>';\n\n                    summaryPanel = livePopup({\n                        title: \"\",\n                        html: '<p><span style=\"color: pink\" class=\"quiz-summary-guest-answer\">' + result.data.bet.answer + '</span></p>' +\n                        resultText.silver +\n                        '<p style=\"text-align:center; margin: 10px 0;\"><a href=\"/i/bet\" target=\"_blank\" style=\"color: #4fc1e9;\">...</a></p>',\n                        type: \"info\",\n                        width: 300,\n                        onConfirm: function () {\n                            summaryPanel.remove();\n                            summaryPanel = null;\n                        }\n                    });\n                }\n                \n                quizCtrl.$fire(\"all!updateCurrency\", {\n                    gold: result.data.user.gold,\n                    silver: result.data.user.silver\n                });\n\n                quizCtrl.quiz.info = {\n                    id: null,  //  ID, .\n                    uid: null,  //  UID.\n                    question: \"--\",  // .\n                    a: \"--\",  //  A.\n                    b: \"--\",  //  B.\n                    answer: null,  // .\n                    status: null,  // .\n                    update_time: null  // .\n                };\n\n                quizCtrl.quiz.answerInfo =  {\n                    gold: { a: { }, b: {} },\n                    silver: { a: { times: null, progress: 0, c: 0}, b: { times: null, progress: 0, c: 0 } }\n                };\n\n                callback && callback();\n            },\n            error: function (result) {\n\n            }\n        });\n    });\n\n    // Definition: .\n    quizCtrl.$watch(\"QuizRestorePanel\", function (json) {\n        console.log(\"Event: QuizRestorePanel\");\n\n        quizCtrl.quiz.disabled = false;\n\n        quizCtrl.quiz.permission = true;\n        quizCtrl.quiz.allowNewQuiz = true;\n        quizCtrl.quiz.betStatus = false;\n        quizSystem.betStatus = false;\n        quizCtrl.quiz.quizJoined = false;\n\n        quizCtrl.quiz.betId = -1;\n        quizCtrl.quiz.disabled = false;\n\n    });\n\n};\n}).call(this,typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})", "/*\n *  Live Quiz Control Methods By LancerComet at 11:32, 2015/12/23.\n *  # Carry Your World #\n *  ---\n *  .\n */\n\n// .\n// ==========================================\nmodule.exports = function (quizCtrl) {\n    \"use strict\";\n\n    // Definition: .\n    quizCtrl.$watch(\"QuizSetup\", function () {\n        quizCtrl.doms.quizSetupPanel.show = true;\n        quizCtrl.doms.quizSetupPanel.out = false;\n        quizCtrl.quiz.info.question = \"\";\n        quizCtrl.quiz.info.a = \"\";\n        quizCtrl.quiz.info.b = \"\";\n    });\n\n    // Definition: .\n    quizCtrl.$watch(\"QuizCancelSetup\", function () {\n        quizCtrl.doms.quizSetupPanel.out = true;\n        clearTimeout(quizCtrl.doms.quizSetupPanel.outTimeout);\n        quizCtrl.doms.quizSetupPanel.outTimeout = setTimeout(function () {\n            quizCtrl.doms.quizSetupPanel.show = false;\n            quizCtrl.doms.quizSetupPanel.out = false;\n        }, 380);\n    });\n\n};", "/*\n *  Live Quiz Status Control By LancerComet at 11:36, 2015/12/23.\n *  # Carry Your World #\n *  ---\n *  .\n */\n\nvar appConfig = require('../../../../common/app-config/app-config');\n\nvar tplLoaded = {\n    common: false,\n    anchor: false\n};\n\n// .\n// ==========================================\nmodule.exports = function (quizCtrl) {\n    \"use strict\";\n\n    // Definition: .\n    quizCtrl.$watch(\"QuizCheckStatus\", function (param) {\n        /*\n         *  @ param: {\n         *    type: \"normal\" || \"protocol\",\n         *    json: null || {},\n         *    callback: null || Function,\n         *  }\n         */\n\n        param = param || { type: \"normal\" };\n\n        if (param.type !== \"normal\" && param.type !== \"protocol\") {\n            throw new Error(appConfig.consoleText.error + \", .\");\n        }\n\n        // , .\n        if (param.type === \"protocol\" && param.json) {\n            successCallback(param.json);\n            return;\n        }\n\n        // .\n        $.ajax({\n            url: \"/bet/getRoomBet\",\n            type: \"POST\",\n            dataType: \"JSON\",\n            data: {\n                roomid: ROOMID\n            },\n            success: successCallback,\n            error: errorCallback\n        });\n\n        function successCallback (result) {\n            // Error Handler.\n            if (parseInt(result.code, 10) !== 0) {\n                consoleText.log(appConfig.consoleText.error + \",   ()\");\n                consoleText.log(\"Detail: \" + result.msg);\n                quizCtrl.quiz.allowNewQuiz = false;  // , .\n                return;\n            }\n\n            // , , .\n            if (!result.data.isBet) {\n                console.log(appConfig.consoleText.info + \", .\");\n                quizCtrl.quiz.permission = false;\n                quizCtrl.quiz.allowNewQuiz = false;\n                return false;\n            }\n\n\n            // , .\n            quizSystem.betStatus = result.data.betStatus;\n\n            // .\n            // , , .\n\n            // , , .\n            !quizCtrl.quiz.initFinished ? quizCtrl.quiz.quizJoined = result.data.isInBet : void(0);\n\n            // .\n            quizCtrl.quiz.permission = result.data.isBet;\n            quizCtrl.quiz.betStatus = result.data.betStatus;\n\n\n            // .\n            if (result.data.bet !== [] && !$.isEmptyObject(result.data.bet)) {\n                quizCtrl.quiz.betStatus = result.data.betStatus;\n                quizCtrl.quiz.allowNewQuiz = !result.data.isInBet;\n                result.data.bet.id ? quizCtrl.quiz.betId = result.data.bet.id : void(0);\n                quizCtrl.quiz.info = result.data.bet;\n                try {\n\n                    // ,  Avalon .\n                    if (!result.data.silver.a.amount) { result.data.silver.a.amount = 0; }\n                    if (!result.data.silver.b.amount) { result.data.silver.b.amount = 0; }\n                    if (!result.data.silver.a.times) { result.data.silver.a.times = null; }\n                    if (!result.data.silver.b.times) { result.data.silver.b.times = null; }\n\n                    quizCtrl.quiz.answerInfo.gold = result.data.gold;\n                    quizCtrl.quiz.answerInfo.silver = result.data.silver;\n\n                } catch (tryErr) {\n                    // ...\n                    console.log(\"QuizCheckStatus : \" + tryErr);\n                }\n                quizCtrl.doms.displayTitle = \"\";\n            }\n\n            // .\n            !quizCtrl.quiz.initFinished ? quizCtrl.quiz.initFinished = true : void(0);\n\n            // ,  true .\n            if (result.data.betStatus == true) {\n                console.log(\".\");\n                quizCtrl.quiz.allowNewQuiz = false;\n\n            } else {\n                console.log(\".\");\n                quizCtrl.quiz.allowNewQuiz = true;  // .\n            }\n\n            // Execute callback if there it is.\n            if (param.callback) {\n                setTimeout(param.callback, 1);\n            }\n\n            // .\n            if (result.data.isBet) {\n\n                // .\n                if (!tplLoaded.common) {\n                    $.getScript(\"http://static.hdslb.com/live-static/live-room/tpls/tpl-quiz.js\", function (result) {\n                        avalon.templateCache[\"quiz-panel.html\"] = window.liveTpls[\"room-template/quiz-guest.html\"];\n                        tplLoaded.common = true;\n                    });\n                }\n\n                // .\n                if (ISANCHOR == 1 && !tplLoaded.anchor) {\n                    $.getScript(\"http://static.hdslb.com/live-static/live-room/tpls/tpl-quiz-anchor.js\", function (result) {\n                        avalon.templateCache[\"quiz-panel-anchor.html\"] = window.liveTpls[\"room-template/quiz-anchor.html\"];\n                        tplLoaded.anchor = true;\n                    });\n                }\n            }\n\n            // , .\n            if (parseInt(result.data.bet.status, 10) === -2) {\n                console.log(\", \");\n                quizCtrl.$fire(\"QuizAdjourned\");\n                return;\n            }\n\n            // , .\n            if (parseInt(result.data.bet.status, 10) === -3) {\n                console.log(\", \");\n                quizCtrl.$fire(\"QuizOnEnding\");\n            }\n        }\n\n        function errorCallback (result) {\n            consoleText.log(appConfig.consoleText.error + \":\");\n            consoleText.log(result.statusText);\n\n        }\n\n    });\n\n    // Definition: .\n    quizCtrl.$watch(\"QuizUpdateInfo\", function () {\n\n    });\n\n};\n", "/*\n *  Live Quiz User Events By LancerComet at 11:32, 2015/12/23.\n *  # Carry Your World #\n *  ---\n *  .\n */\nvar appConfig = require('../../../../common/app-config/app-config');\nvar randomEmoji = require('../../../../common/functions/func-random-emoji/random-emoji');\nvar livePopup = require('../../../../common/components/live-widget/live-popup/live-popup');\nvar liveToast = require('../../../../common/components/live-widget/live-toast/live-toast');\n\n// .\n// ==========================================\nmodule.exports = function (quizCtrl, undefined) {\n\n    // .\n    // ===========================================\n\n    // Definition: .\n    quizCtrl.$watch(\"BetBeResident\", function () {\n        if (quizCtrl.quiz.allowNewQuiz) {\n            return;\n        }\n        if (quizCtrl.account.type === \"anchor\") {\n            liveToast(event.target || event.srcElement, \"~\" + randomEmoji.helpless());\n            return;\n        }\n        if (quizCtrl.account.type === false) {\n            liveToast(event.target || event.srcElement, \"~\" + randomEmoji.helpless());\n            return;\n        }\n        quizCtrl.doms.beResidentPanel.show = true;\n        quizCtrl.$fire(\"all!updateCurrency\");\n    });\n\n    // Definition: .\n    quizCtrl.$watch(\"BetBeResidentConfirm\", function (param) {\n        // Error Handler.\n        if (quizCtrl.quiz.allowNewQuiz) {\n            consoleText.log(appConfig.consoleText.caution + \"allowNewQuiz = false, .\");\n            return;\n        }\n\n        if (!quizCtrl.quiz.beResidentData.answer || !quizCtrl.quiz.beResidentData.odds || !quizCtrl.quiz.beResidentData.residentCount) {\n            liveToast(param.element, \"~~\" + randomEmoji.shock(), \"caution\");\n            return;\n        }\n\n\n        if (quizCtrl.quiz.betId === null || quizCtrl.quiz.betId === undefined || quizCtrl.quiz.betId === \"\") {\n            var popup = livePopup({\n                title: \" \" + randomEmoji.sad(),\n                content: \"> < ,  <br/><br/>Detail:  betId.\",\n                type: \"alert\",\n                onConfirm: function () {\n                    popup.remove();\n                }\n            });\n            return;\n        }\n\n        $.ajax({\n            url: \"/bet/addBanker\",\n            type: \"POST\",\n            dataType: \"JSON\",\n            data: {\n                answer: quizCtrl.quiz.beResidentData.answer,\n                times: parseFloat(quizCtrl.quiz.beResidentData.odds).toFixed1(),\n                coin: quizCtrl.quiz.beResidentData.residentCount,\n                coinType: quizCtrl.quiz.beResidentData.currencyType,\n                betId: quizCtrl.quiz.betId,\n                token: $.cookie(\"LIVE_LOGIN_DATA\") || \"\"\n            },\n            timeout: appConfig.appConfig.xhrTimeout,\n            success: function (result) {\n                if (result.code != 0) {\n                    consoleText.log(appConfig.consoleText.error + \".\");\n                    consoleText.log(\"Detail: \" + result.msg);\n                    //var popup = livePopup({\n                    //    title: \" \" + randomEmoji.sad(),\n                    //    content: \"> <  ,  <br/><br/>Detail: \" + result.msg + \".\",\n                    //    type: \"alert\",\n                    //    onConfirm: function () {\n                    //        popup.remove();\n                    //    }\n                    //});\n                    liveToast(param.element, \"\" + result.msg + randomEmoji.happy(), \"caution\");\n                    return;\n                }\n\n                liveToast(param.element, \"!~ \" + randomEmoji.happy(), \"success\");\n                quizCtrl.quiz.quizJoined = true;\n                console.log(\"quizJoined: \" + quizCtrl.quiz.quizJoined);\n                quizCtrl.$fire(\"BetBeResidentCancel\");  // .\n\n            },\n            error: function (result) {\n                consoleText.log(appConfig.consoleText.error + \".\");\n                consoleText.log(\"Detail: \" + result.msg);\n                var popup = livePopup({\n                    title: \" \" + randomEmoji.sad(),\n                    content: \"> <  ,  <br/><br/>Status: \" + result.status + \".<br/>Detail: \" + result.statusText + \".\",\n                    type: \"alert\",\n                    onConfirm: function () {\n                        popup.remove();\n                    }\n                });\n            }\n        });\n\n\n\n    });\n\n    // Definition: .\n    quizCtrl.$watch(\"BetBeResidentCancel\", function () {\n        quizCtrl.quiz.beResidentData.answer = \"\";\n        quizCtrl.quiz.beResidentData.odds = \"\";\n        quizCtrl.quiz.beResidentData.residentCount = \"\";\n        quizCtrl.doms.beResidentPanel.out = true;\n        clearTimeout(quizCtrl.doms.beResidentPanel.outTimeout);\n        quizCtrl.doms.beResidentPanel.outTimeout = setTimeout(function () {\n            quizCtrl.doms.beResidentPanel.show = false;\n            quizCtrl.doms.beResidentPanel.out = false;\n        }, 380);\n    });\n\n\n\n    // .\n    // ===========================================\n\n    // Definition: .\n    quizCtrl.$watch(\"BetShowSubscriptionList\", function (event) {\n        var element = event && event.target || event.srcElement;\n        $.ajax({\n            url: \"/bet/getBankers\",\n            type: \"POST\",\n            data: {\n                betId: quizCtrl.quiz.betId\n            },\n            dataType: \"JSON\",\n            success: function (result) {\n                if (result.code != 0) {\n                    console.log(\"Bilibili Live Error: .\");\n                    element && liveToast(element, \"\" + result.msg, \"caution\", true);\n                    return;\n                }\n                quizCtrl.doms.subscriptionList.show = true;\n                quizCtrl.data.subscriptionList = result.data;\n                element = null;\n            },\n            error: function (result) {\n                element && liveToast(element, \"\" + result.statusText, \"error\", true);\n            }\n        });\n    });\n\n    // Definition: .\n    quizCtrl.$watch(\"BetHideSubscriptionList\", function () {\n\n    });\n\n\n\n    // .\n    // ===========================================\n\n    // Definition: .\n    quizCtrl.$watch(\"BetBuy\", function (callback) {\n        if (quizCtrl.quiz.allowNewQuiz) { return; }\n        if (quizCtrl.account.type === \"anchor\") {\n            liveToast(event.target || event.srcElement, \"~\" + randomEmoji.helpless());\n            return;\n        }\n        if (quizCtrl.account.type === false) {\n            liveToast(event.target || event.srcElement, \"~\" + randomEmoji.helpless());\n            return;\n        }\n        quizCtrl.$fire(\"all!updateCurrency\");\n        quizCtrl.$fire(\"QuizCheckStatus\", {\n            type: \"normal\",\n            callback: function () {\n                callback();\n                quizCtrl.doms.betBuyPanel.show = true;\n            }\n        });\n    });\n\n\n    // Definition: .\n    quizCtrl.$watch(\"BetBuyConfirm\", function (event) {\n        var element = event ? event.target || event.srcElement : document.body;\n\n        if (!quizCtrl.quiz.betBuyData.buyCount) {\n            liveToast(element, \"~~ \" + randomEmoji.helpless());\n            return;\n        }\n\n        // .\n        $.ajax({\n            url: \"/bet/addBettor\",\n            type: \"POST\",\n            dataType: \"JSON\",\n            data: {\n                bankerId: quizCtrl.quiz.betBuyData.bankerId,\n                amount: quizCtrl.quiz.betBuyData.buyCount,\n                token: $.cookie(\"LIVE_LOGIN_DATA\") || \"\"\n            },\n            success: function (result) {\n                if (result.code != 0) {\n                    consoleText.log(appConfig.consoleText.error + \".\");\n                    consoleText.log(\"Detail: \" + result.msg);\n                    liveToast(element, \"\" + result.msg, \"caution\");\n                    return;\n                }\n                liveToast(element, \"!~ \" + randomEmoji.happy(), \"success\");\n                quizCtrl.quiz.quizJoined = true;\n                console.log(\"quizJoined: \" + quizCtrl.quiz.quizJoined);\n                quizCtrl.$fire(\"BetBuyCancel\");  // .\n            },\n            error: function (result) {\n                consoleText.log(appConfig.consoleText.error + \".\");\n                consoleText.log(\"Detail: \" + result.msg);\n                var popup = livePopup({\n                    title: \" \" + randomEmoji.sad(),\n                    content: \"> <  ,  <br/><br/>Status: \" + result.status + \".<br/>Detail: \" + result.statusText + \".\",\n                    type: \"alert\",\n                    onConfirm: function () {\n                        popup.remove();\n                    }\n                });\n            }\n        })\n\n    });\n\n\n    // Definition: .\n    quizCtrl.$watch(\"BetBuyCancel\", function () {\n        quizCtrl.quiz.betBuyData.bankerId = \"\";\n        quizCtrl.quiz.betBuyData.buyCount = \"\";\n        quizCtrl.quiz.betBuyData.maxBuyCount = 0;\n        quizCtrl.quiz.betBuyData.buyIncome = 0;\n        quizCtrl.doms.betBuyPanel.out = true;\n        clearTimeout(quizCtrl.doms.betBuyPanel.outTimeout);\n        quizCtrl.doms.betBuyPanel.outTimeout = setTimeout(function () {\n            quizCtrl.doms.betBuyPanel.show = false;\n            quizCtrl.doms.betBuyPanel.out = false;\n        }, 380);\n    });\n\n\n\n};", "/*\n *  Quiz Broadcast Listener By LancerComet at 10:41, 2015/12/17.\n *  # Carry Your World #\n *  ---\n *  .\n *\n */\nvar appConfig = require('../../../../common/app-config/app-config');\n\nmodule.exports = function (window, undefined) {\n    \"use strict\";\n\n    // Error Handler.\n    if (!window.protocol) {\n        //window.protocol = {};\n        throw new Error(appConfig.console.error + \"protocol ,  protocol .\");\n    }\n\n    // Definition:  Flash .\n    var flashProtoCtrl = avalon.vmodels.flashProtoCtrl;\n\n    // , .\n    window.protocol.BET_START = function (json) {\n        console.log(\"BET_START\");\n        console.log(json);\n        // \n        // 1. , ,  \"checkQuizStatus\" .\n        flashProtoCtrl.$fire(\"all!QuizCheckStatus\", {\n            type: \"protocol\",\n            json: json.data\n        });\n\n    };\n\n    // .\n    window.protocol.BET_BANKER = function (json) {\n        console.log(\"BET_BANKER\");\n        console.log(json);\n        flashProtoCtrl.$fire(\"all!QuizCheckStatus\", {\n            type: \"protocol\",\n            json: json.data\n        });\n    };\n\n    // .\n    window.protocol.BET_BETTOR = function (json) {\n        console.log(\"BET_BETTOR\");\n        console.log(json);\n        flashProtoCtrl.$fire(\"all!QuizCheckStatus\", {\n            type: \"protocol\",\n            json: json.data\n        });\n    };\n\n    // .\n    window.protocol.BET_SEAL = function (json) {\n        console.log(\"BET_SEAL\");\n        console.log(json);\n        flashProtoCtrl.$fire(\"all!QuizAdjourned\");\n    };\n\n    // .\n    window.protocol.BET_ENDING = function (json) {\n        console.log(\"BET_ENDING\");\n        console.log(json);\n        flashProtoCtrl.$fire(\"all!QuizCheckStatus\", {\n            type: \"protocol\",\n            json: json.data\n        });\n    };\n\n    // , .\n    window.protocol.BET_END = function (json) {\n        console.log(\"BET_END\");\n        console.log(json);\n        flashProtoCtrl.$fire(\"all!QuizGetResult\", function () {\n            flashProtoCtrl.$fire(\"all!QuizRestorePanel\", json);\n        });\n    };\n\n};", "/*\n *  Recommend Videos Node By LancerComet at 14:16, 2015/12/22.\n *  # Carry Your World #\n *  ---\n *  .\n */\n\nvar appConfig = require('../../../common/app-config/app-config');\nvar lazyInit = require(\"../../../common/functions/func-avalon-lazy-init/lazy-init\");\n\nmodule.exports = function (window) {\n    \"use strict\";\n\n    avalon.ready(function () {\n\n        // Error Handler.\n        if (!window.ROOMID || !window.ANCHOR_NICK_NAME) {\n            throw new Error(appConfig.consoleText.error + \" ROOMID, .\");\n        }\n\n\n        var recommendVideoCtrl = avalon.define({\n            $id: \"recommendVideoCtrl\",\n            title: window.ANCHOR_NICK_NAME + \"\",\n            spaceLink: \"http://space.bilibili.com/\" + window.MASTERID,\n            show: false,\n            videoList: [],\n            mouseEnter: function (event) {\n                var target = event.target || event.srcElement;\n                $(target).find(\".video-props\").addClass(\"hover\");\n                $(target).find(\".video-merge\").addClass(\"hover\");\n            },\n            mouseLeave: function (event) {\n                var target = event.target || event.srcElement;\n                $(target).find(\".video-props\").removeClass(\"hover\");\n                $(target).find(\".video-merge\").removeClass(\"hover\");\n            }\n        });\n\n\n        $.ajax({\n            url: \"/live/getVideoList/\" + window.ROOMID,\n            type: \"GET\",\n            dataType: \"JSON\",\n            success: function (result) {\n                if (result.code != 0) {\n                    consoleText.log(appConfig.consoleText.error + \": \" + result.msg || \"\");\n                    return;\n                }\n                recommendVideoCtrl.videoList = result.data;\n                recommendVideoCtrl.show = true;\n            },\n            error: function (result) {\n                consoleText.log(appConfig.consoleText.error + \": \\n\" + result.statusText);\n            }\n        });\n\n\n        lazyInit(document.getElementById(\"recommend-videos\"), recommendVideoCtrl);\n    });\n\n\n\n};\n", "/*\n *  Charge Panel By LancerComet at 14:29, 2016/1/8.\n *  # Carry Your World #\n *  ---\n *   BP .\n */\n\nvar livePopup = require('../../../common/components/live-widget/live-popup/live-popup');\nvar liveToast = require('../../../common/components/live-widget/live-toast/live-toast');\nvar randomEmoji = require('../../../common/functions/func-random-emoji/random-emoji');\n\n// Definition: .\nvar btnTextInterval = null;\n\nmodule.exports = function (event, seedExchangeCtrl) {\n    \"use strict\";\n\n    var target = event.target || event.srcElement;\n    var buyCount = parseInt(seedExchangeCtrl.data.charge.buyCount, 10);\n\n    // Error Handler.\n    if (buyCount <= 0 || isNaN(buyCount)) {\n        liveToast(target, \" 0  \" + randomEmoji.helpless(), true);\n        return;\n    }\n\n    // .\n    (function setBtnText () {\n        seedExchangeCtrl.doms.charge.btnText = \".\";\n        var dots = 1;\n        btnTextInterval = setInterval(function () {\n            if (dots >= 6) {\n                seedExchangeCtrl.doms.charge.btnText = \"\";\n                dots = 0;\n                return;\n            }\n            seedExchangeCtrl.doms.charge.btnText += \".\";\n            dots++;\n        }, 500);\n\n    })();\n\n    $.ajax({\n        url: \"/payCenter/quickPay\",\n        type: \"GET\",\n        data: {\n            bpNum: buyCount\n        },\n        dataType: \"JSON\",\n        success: function (result) {\n            // .\n            clearInterval(btnTextInterval);\n            seedExchangeCtrl.doms.charge.btnText = \"\";\n\n            if (result.code == 0) {\n\n                // ,  Bp .\n            } else if (result.code == -400) {\n\n                // Definition: .\n                var payData = {\n                    orderNo: result.data.order,\n                    cashierURL: result.data.cashier_url\n                };\n\n                //  BP .\n                seedExchange(payData);\n\n                // .\n            } else {\n                liveToast(target, result.msg);\n            }\n        },\n        error: function (result) {\n            clearInterval(btnTextInterval);\n            seedExchangeCtrl.doms.charge.btnText = \"\";\n            liveToast(target, \" > <\", \"error\");\n        }\n    });\n\n\n\n    function seedExchange (payData) {\n        // Action: .\n        var quickPayPopup = livePopup({\n            title: \"BP \",\n            content: \" B \" + randomEmoji.happy(),\n            button: {\n                confirm: \"\",\n                cancel: \"~\"\n            },\n            width: \"300px\",\n\n            // .\n            onConfirm: function () {\n                window.open(payData.cashierURL);\n                payInProcess();\n            },\n\n            // .\n            onCancel: function () {\n                seedExchangeCtrl.$fire(\"all!updateCurrency\");\n                seedExchangeCtrl.$fire(\"getBp\");\n            }\n        });\n\n\n        // Definition:  Bp .\n        function payInProcess () {\n\n            // Action: .\n            quickPayPopup.remove();\n\n            // Definition: .\n            var payInProcessPanel = livePopup({\n                title: \"\",\n                content: ' \"\" ' + randomEmoji.happy(),\n                width: \"350px\",\n                type: \"info\",\n                button: {\n                    confirm: \"\"\n                },\n                onConfirm: function () {\n\n                    // .\n                    $.ajax({\n                        url: \"/payCenter/orderStatus\",\n                        type: \"GET\",\n                        data: {\n                            order: payData.orderNo\n                        },\n                        dataType: \"JSON\",\n                        success: successCallback,\n                        error: errorCallback\n                    });\n\n                }\n            });\n\n            // .\n            function successCallback (result) {\n                if (result.code == \"0\") {\n\n                    // .\n                    payInProcessPanel.remove();\n\n                    // .\n                    paySucceed(result);\n\n                } else {\n                    liveToast(payInProcessPanel.confirmBtn, result.msg, true);\n                }\n            }\n\n            // .\n            function errorCallback (result) {\n                livePopup({\n                    title: \"\",\n                    html: \"<p>> <<br/><br/>: \" + result.statusText + \"</p>\",\n                    width: \"350px\",\n                    type: \"alert\",\n                    button: {\n                        confirm: \" > <\"\n                    }\n                });\n            }\n\n            // Definition: .\n            function paySucceed (result) {\n                // .\n                livePopup({\n                    title: \"\",\n                    content: \" \" + result.data.orderGold + \" \" + randomEmoji.happy(),\n                    width: \"300px\",\n                    button: {\n                        confirm: \"\"\n                    },\n                    type: \"info\"\n                });\n\n                // .\n                seedExchangeCtrl.$fire(\"all!updateCurrency\", {\n                    gold: result.data.gold\n                });\n\n                //  Bp .\n                seedExchangeCtrl.$fire(\"getBp\");\n            }\n\n        }\n    }\n\n\n\n\n\n\n\n\n\n\n};\n", "/*\n *  Exchange Events By LancerComet at 18:12, 2016/1/8.\n *  # Carry Your World #\n *  ---\n *  .\n */\n\nvar liveToast = require('../../../common/components/live-widget/live-toast/live-toast');\nvar livePopup = require('../../../common/components/live-widget/live-popup/live-popup');\nvar randomEmoji = require('../../../common/functions/func-random-emoji/random-emoji');\nvar liveQuickLogin = require('../../../common/functions/func-live-quick-login/live-quick-login');\n\nmodule.exports = {\n\n    // Definition: .\n    exchangeViaGold: function (event, seedExchangeCtrl) {\n        liveQuickLogin();\n\n        var element = event.target || event.srcElement;\n        var exchangeGold = parseInt(seedExchangeCtrl.data.exchange.count.gold, 10);\n\n        if (isNaN(exchangeGold) || exchangeGold < 1) {\n            liveToast(element, \" \" + randomEmoji.helpless(), true);\n            return;\n        }\n\n        $.ajax({\n            url: \"/gold/goldToSilver\",\n            type: \"GET\",\n            data: {\n                cgold: exchangeGold\n            },\n            dataType: \"JSON\",\n            success: function (result) {\n                if (result.code == 0) {\n\n                    liveToast(element, \" \" + result.data.csilver + \" \" + randomEmoji.happy(), \"success\");\n\n                    seedExchangeCtrl.$fire(\"all!updateCurrency\", {\n                        gold: result.data.gold,\n                        silver: result.data.silver\n                    });\n\n                } else if (result.code == -400) {\n\n                    var popup = livePopup({\n                        title: \"~\",\n                        content: \"\" + randomEmoji.helpless(),\n                        button: {\n                            confirm: \"\",\n                            cancel: \"~\"\n                        },\n                        width: \"320px\",\n                        onConfirm: function () {\n                            seedExchangeCtrl.$fire(\"showExchange\", \"charge\");\n                            popup.remove();\n                            popup = null;\n                        }\n                    })\n\n                } else {\n                    liveToast(element, result.msg || \"\" + randomEmoji.sad(), \"caution\", true);\n                }\n            },\n            error: function (result) {\n                var popup = livePopup({\n                    title: \"~~~\",\n                    html: \"<p> \" + randomEmoji.sad() + \"  \" + randomEmoji.sad() + \"<br>: \" + result.statusText + \"</p>\",\n                    type: \"alert\",\n                    width: 300,\n                    onConfirm: function () {\n                        popup.remove();\n                        popup = null;\n                    }\n                });\n            }\n        })\n\n\n    },\n\n    // Definition: .\n    exchangeViaCoin: function (event, seedExchangeCtrl) {\n        liveQuickLogin();\n        var element = event.target || event.srcElement;\n        var exchangeCoin = parseInt(seedExchangeCtrl.data.exchange.count.coin, 10);\n\n        if (isNaN(exchangeCoin) || exchangeCoin < 0) {\n            liveToast(element, \" \" + randomEmoji.helpless(), true);\n            return;\n        }\n\n        $.ajax({\n            url: \"/exchange/coin2silver\",\n            type: \"POST\",\n            data: {\n                coin: exchangeCoin\n            },\n            dataType: \"JSON\",\n            success: function (result) {\n                if (result.code != 0) {\n                    liveToast(element, result.msg, \"caution\", true);\n                    return;\n                }\n                liveToast(element, \" \" + result.data.silver + \" \" + randomEmoji.happy(), \"success\", true);\n\n                // .\n                seedExchangeCtrl.$fire(\"all!updateCurrency\");\n            },\n            error: function (result) {\n                var popup = livePopup({\n                    title: \"~~~\",\n                    html: \"<p> \" + randomEmoji.sad() + \"  \" + randomEmoji.sad() + \"<br>: \" + result.statusText + \"</p>\",\n                    type: \"alert\",\n                    width: 300,\n                    onConfirm: function () {\n                        popup.remove();\n                        popup = null;\n                    }\n                });\n            }\n        })\n    }\n\n};", "/*\n *  Seed Exchange By LancerComet at 16:49, 2016/1/7.\n *  # Carry Your World #\n *  ---\n *   / .\n */\n\nvar lazyInit = require('../../../common/functions/func-avalon-lazy-init/lazy-init');\nvar seedExchange = require('./exchange');\nvar charge = require('./charge');\n\nmodule.exports = function () {\n    \"use strict\";\n\n    avalon.ready(function () {\n\n        var seedExchangeCtrl = avalon.define({\n            $id: \"seedExchangeCtrl\",\n\n            // .\n            doms: {\n\n                // Bp .\n                exchange: {\n                    out:false,\n                    show: false,\n                    outTimeout: null,\n\n                    open: function () {\n                        seedExchangeCtrl.$fire(\"showExchange\", \"exchange\");\n                        seedExchangeCtrl.doms.noSeed.close();\n                    },\n                    close: function () {\n                        panelClose(\"exchange\");\n                    },\n\n                    panelNow: \"gold\",\n                    panelSwitch: function (panel) {\n                        seedExchangeCtrl.doms.exchange.panelNow = panel;\n                    }\n\n                },\n\n                // .\n                charge: {\n                    out: false,\n                    show: false,\n                    outTimeout: null,\n\n                    open: function () {\n                        seedExchangeCtrl.$fire(\"showExchange\", \"charge\");\n                        seedExchangeCtrl.doms.noSeed.close();\n                    },\n                    close: function () {\n                        panelClose(\"charge\");\n                    },\n\n                    btnText: \"\"\n                },\n\n                // .\n                noSeed: {\n                    out: false,\n                    show: false,\n                    outTimeout: null,\n                    close: function () {\n                        panelClose(\"noSeed\");\n                    }\n                }\n            },\n\n            // .\n            data: {\n                // .\n                account: {\n                    gold: 0,\n                    silver: 0,\n                    biliCoin: 0\n                },\n\n                // .\n                exchange: {\n                    count: {\n                        gold: \"\",\n                        coin: \"\"\n                    }\n                },\n\n                // .\n                charge: {\n                    myBp: 0,\n                    buyCount: \"\"\n                }\n            },\n\n            // .\n            events: {\n                exchange: {\n                    viaGold: function (event) {\n                        seedExchange.exchangeViaGold(event, seedExchangeCtrl);\n                    },\n                    viaCoin: function (event) {\n                        seedExchange.exchangeViaCoin(event, seedExchangeCtrl);\n                    }\n                },\n                buyGold: buyGold\n            }\n        });\n\n        // Definition: .\n        seedExchangeCtrl.$watch(\"showExchange\", function (panel) {\n            seedExchangeCtrl.doms[panel].show = true;\n            seedExchangeCtrl.$fire(\"all!updateCurrency\");\n            panel === \"charge\" && seedExchangeCtrl.$fire(\"getBp\");\n        });\n\n        // Definition: .\n        seedExchangeCtrl.$watch(\"noSeed\", function () {\n            seedExchangeCtrl.$fire(\"showExchange\", \"noSeed\");\n        });\n\n        // Definition:  BP .\n        seedExchangeCtrl.$watch(\"getBp\", function () {\n            $.ajax({\n                url: \"/payCenter/getBp\",\n                type: \"GET\",\n                cache: false,\n                dataType: \"JSON\",\n                timeout: 5 * 1000,\n                success: function (result) {\n                    if (result.code != 0) {\n                        return;\n                    }\n                    seedExchangeCtrl.data.charge.myBp = result.data.bp.bp;\n                },\n                error: function (result) {\n\n                }\n            });\n        });\n\n        // Definition: .\n        seedExchangeCtrl.$watch(\"fillCurrency\", function (value) {\n            seedExchangeCtrl.data.account.gold = value.gold;\n            seedExchangeCtrl.data.account.silver = value.silver;\n            seedExchangeCtrl.data.account.biliCoin = value.biliCoin;\n        });\n\n        // Lazy Init.\n        lazyInit($(\"#seed-exchange\")[0], seedExchangeCtrl);\n\n\n        /* Definition goes below. */\n\n        // Definition: .\n        function panelClose (panel) {\n            seedExchangeCtrl.doms[panel].out = true;\n            setTimeout(function () {\n                seedExchangeCtrl.doms[panel].show = false;\n                seedExchangeCtrl.doms[panel].out = false;\n            }, 380);\n        }\n\n        // Definition: Bp .\n        function buyGold (event) {\n            charge(event, seedExchangeCtrl)\n        }\n\n    });\n\n};\n", "/*\n *  Bilibili Live Room Sign Up at 15:22, 2016.01.05.\n *  ---\n *\n *  \n *  ---\n *   JS .\n *  , .\n */\n\nmodule.exports = function () {\n    require(\"./javascripts/sign-up.js\")();  // \n};", "/*\n *  Bilibili Live Room Sign Up at 12:11, 2015.12.23.\n *  ---\n *\n *  \n *  ---\n *  \n *\n */\n\n//var liveQuickLogin = require(\"liveQuickLogin\");\nvar liveQuickLogin =  require(\"../../../../common/functions/func-live-quick-login/live-quick-login\");\n\nmodule.exports = function () {\n    //  VM\n    var signUpVM = avalon.define({\n        $id: \"signUpCtrl\",\n        signInShow: false,\n        signInData: {\n            status: 0\n        },\n        loggedIn: false,\n        // \n        doSign: function (event) {\n            event.stopPropagation();\n            liveQuickLogin();\n            if (signUpVM.signInData.status) {\n                signUpVM.signInShow = !signUpVM.signInShow;\n            } else {\n                $.ajax({\n                    url: \"/sign/doSign\",\n                    type: \"get\",\n                    dataType: \"json\",\n                    success: function(result) {\n                        if (result.code == 0) {\n                            signUpVM.signInData = result.data;\n                            signUpVM.signInShow = true;\n                            signUpVM.signInData.status = 1;\n\n                            $(\"#room-left-sidebar .small-wrap .sign\").attr(\"data-label\", \"\");\n\n                            //  3 \n                            setTimeout(function () {\n                                signUpVM.signInShow = false;\n                            }, 3000)\n                        }\n                    }\n                });\n            }\n\n        },\n\n        // \n        myTask: function () {\n            liveQuickLogin();\n            window.open('/i/myTask', '_blank');\n        }\n    });\n\n    // Watch \n    signUpVM.$watch(\"signInData.hadSignDays\", function (value) {\n        var widthValue = (value < 20) ? (value / 20 * 100) : 100;\n        $(\".sign-in-panel .progress-bar-wrap .progress-data\").width(widthValue + \"%\")\n    });\n\n    // \n    function getSignInfo () {\n        // \n        if (document.cookie.indexOf(\"DedeUserID\") < 0) {\n            return false;\n        }\n        signUpVM.loggedIn = true;\n        $.ajax({\n            url: \"/sign/GetSignInfo\",\n            type: 'get',\n            dataType: \"json\",\n            success: function(result) {\n                if (result.code == 0) {\n                    signUpVM.signInData = result.data;\n                    if (result.data.status) {\n                        $(\"#room-left-sidebar .small-wrap .sign\").attr(\"data-label\", \"\");\n                    }\n                }\n            }\n        });\n    }\n\n    // \n    getSignInfo();\n\n    $(function () {\n        //  document \n        $(document).on(\"click\", function () {\n            signUpVM.signInShow = false;\n        });\n    });\n};\n\n\n\n", "/*\n *  Treasure Box Transferred by LancerComet at 19:16, 2016/1/7.\n *  # Carry Your World #\n *  ---\n *  .\n */\n\nvar liveRoomFuncs = require('../../room-javascripts/live-room-funcs');\nvar liveToast = require('../../../common/components/live-widget/live-toast/live-toast');\nvar randomEmoji = require('../../../common/functions/func-random-emoji/random-emoji');\nvar liveQuickLogin = require('../../../common/functions/func-live-quick-login/live-quick-login');\n\n// window.treasureRestore .\n//  restore = true , .\nmodule.exports = window.treasureRestore = function (window, restore) {\n\n    // .\n    // .\n\n    if (restore === true) {\n        $(\".treasure-box-panel\").remove();\n    }\n\n    // Definition: . .\n    var treasureCtrl = avalon.define({\n        $id: \"treasureCtrl\"\n    });\n\n    var CountDown = liveRoomFuncs.CountDown;\n\n    // Definition: .\n    (function () {\n        window.Popup = function(options) {\n            // .\n            this.options = options;\n\n            //  Dom .  arrow = true, .\n            this.el = options.arrow ? $('<div class=\"treasure-box-panel live-popup-panel\"><div class=\"tip-arrow\"><div class=\"tip-arrow-outer\"></div><div class=\"tip-arrow-inner\"></div></div><div class=\"tip-content\">' + options.content + '</div></div>').appendTo(\".room-panels\") : $('<div class=\"treasure-box-panel live-popup-panel\"><div class=\"tip-content\">' + options.content + '</div></div>').appendTo(\".room-panels\");\n            this.el.css({\n                height: options.height,\n                width: options.width\n            });\n            //  Dom .\n            var content = $('.tip-content, .center-tip-content', this.el);\n            content.width(options.width || 100);  // .\n            if (options.closable) {  // .\n                var closeTip = $('<div class=\"close-btn right-top\"></div>');\n                var self = this;\n                content.prepend(closeTip);\n                closeTip.on('click', function() {\n                    self.hide();\n                });\n            }\n        };\n        window.Popup.prototype.show = function(el) {\n            this.el.removeClass(\"out\");\n            var offset = el.offset();\n            var top = (this.options.arrow || this.options.direction == 'down') ? offset.top + el.height() : offset.top - this.options.height - 10;\n            var left = (this.options.arrow || this.options.direction == 'down') ? offset.left : offset.left + 50;\n            this.el.stop(false, true).css({\n                top: top,\n                left: left\n            }).fadeIn().end();\n        };\n        window.Popup.prototype.hide = function() {\n            //this.el.stop(false, true).fadeOut().end();\n            var popup = this.el;\n            popup.addClass(\"out\");\n            setTimeout(function () {\n                popup.removeClass(\"out\");\n                popup.hide();\n            }, 380);\n        };\n\n\n    })();\n\n\n    // \n    window.coutdownBox = null;\n    window.createTreasure = function () {\n        var $treasure = $('.treasure');\n        var $closeTreasure = $('.close-treasure-box');\n        var $treasureBox = $('.treasure-box').removeClass('animate7').addClass('animate1');\n        var $treasureCountdown = $('.treasure-count-down');\n        var getCookie = $.cookie(\"F_S_T_\" + window.UID);\n        if (getCookie == 0) {\n            $treasure.hover(function() {\n                $closeTreasure.show();\n            }, function() {\n                $closeTreasure.hide();\n            });\n            $closeTreasure.off('click').click(function() {\n                $treasureBox.hide();\n                $treasureBox.prev().hide();\n                $closeTreasure.hide();\n                $treasure.off('mouseenter').off('mouseleave');\n                $treasureCountdown.css({\n                    'cursor': 'pointer',\n                    'left': 0\n                }).click(function() {\n                    $treasureBox.show();\n                    $treasureBox.prev().show();\n                    $closeTreasure.show();\n                    $treasure.hover(function() {\n                        $closeTreasure.show();\n                    }, function() {\n                        $closeTreasure.hide();\n                    });\n                    $treasureCountdown.css({\n                        'cursor': 'default',\n                        'left': ''\n                    }).off('click');\n                });\n            });\n            if(!coutdownBox){\n                coutdownBox = new Popup({\n                    'content': '<i class=\"treasure-img close\"></i><div style=\"display: inline-block;width: 190px;padding-left: 10px;\"><h3 class=\"panel-title\"> ' + randomEmoji.happy() + '</h3><p> <span id=\"pop-count-down\"></span>  <span id=\"gz-num\"></span> .</p><button class=\"acknowledge-btn live-btn default\"></button></div>',\n                    'width': 290,\n                    'height': 120,  // Origin: 135\n                    'closable': true,\n                    'arrow': false\n                });\n            }\n            $treasureBox.off('click').click(function() {\n                LOGINED ? coutdownBox.show($treasureBox) : liveQuickLogin();\n            });\n            $('button', coutdownBox.el).off('click').off('click').on('click', function() {\n                coutdownBox.hide();\n            });\n        } else {\n            $treasure.addClass(\"out\");\n            setTimeout(function () {\n                $treasure.hide().removeClass(\"out\");\n            }, 450);\n        }\n    };\n\n    window.LAST_COUNT_DOWN = null;\n    window.LOGINED = false;\n\n    window.countdown = function () {\n        if (LAST_COUNT_DOWN != null) { LAST_COUNT_DOWN.clearCountdown(); }\n        $.ajax({\n            url: \"/FreeSilver/getCurrentTask?r=\" + Math.random(),\n            type: 'get',\n            dataType: \"json\",\n            success: function (result) {\n                if (result.code == 0) {\n                    LOGINED = true;\n                    var silver = result.data.silver;\n                    $('#gz-num').text(silver);\n\n                    var endTime = new Date();\n                    endTime.setMinutes(endTime.getMinutes() + result.data.minute);\n                    LAST_COUNT_DOWN = new CountDown({\n                        endTime: endTime,\n                        element: $('.treasure-count-down, #pop-count-down'),\n                        callback: function () {\n                            $.ajax({\n                                url: \"/freeSilver/getSurplus?r=\"+Math.random(),\n                                type: 'get',\n                                dataType: \"json\",\n                                success: function (result) {\n                                    if(result.code !== 0){\n                                        return false;\n                                    }\n                                    var surplus = result.data.surplus;\n                                    if (surplus < 1) {\n                                        playTreasureAnimate(result.data.silver);\n                                    } else {\n                                        resetCountDown(surplus);\n                                    }\n                                }\n                            });\n                        }\n                    });\n                }\n            }\n        });\n    };\n\n    window.resetCountDown = function (surplus) {\n        if (LAST_COUNT_DOWN != null) {\n            LAST_COUNT_DOWN.clearCountdown();\n        }\n        var endTime = new Date();\n        endTime.setMinutes(endTime.getMinutes() + surplus);\n        LAST_COUNT_DOWN = new CountDown({\n            endTime: endTime,\n            element: $('.treasure-count-down, #pop-count-down'),\n            callback: function () {\n                $.ajax({\n                    url: \"/freeSilver/getSurplus?r=\"+Math.random(),\n                    type: 'get',\n                    dataType: \"json\",\n                    success: function (result) {\n                        if(result.code !== 0){\n                            return false;\n                        }\n                        var surplus = result.data.surplus;\n                        if (surplus < 1) {\n                            playTreasureAnimate(result.data.silver);\n                        } else {\n                            resetCountDown(surplus);\n                        }\n                    }\n                });\n            }\n        });\n    };\n\n\n    window.verifyBox = null;\n    window.CLICK_FLAG = 0;\n\n    window.playTreasureAnimate = function (silver) {\n        var step = 1;\n        var guazNum = silver;\n        var $treasureBox = $('.treasure-box').show();\n        $treasureBox.prev().show();\n        $('.treasure-count-down').css({\n            'cursor': 'default',\n            'left': ''\n        });\n        $('.treasure').off('mouseenter').off('mouseleave');\n        var interval = setInterval(_play, 100);\n\n        function _play() {\n            var next = step + 1;\n            $treasureBox.addClass('animate' + next).removeClass('animate' + step);\n            step = next;\n            if (step === 7) {\n                clearInterval(interval);\n            }\n        }\n        if(!window.verifyBox) {\n            window.verifyBox = new Popup({\n                'content': '<i class=\"treasure-img open\"></i><div style=\"display: inline-block;width: 180px;padding-left: 10px;\"><div id=\"silver-notice-div\"></div><input id=\"freeSilverCaptchaInput\"type=\"text\" length=\"4\" class=\"live-input material\" style=\"width: 65px;\" placeholder=\"\"><img id=\"captchaImg\" src=\"\" alt=\"~\" style=\"width: 60px; height: 30px;vertical-align: top\"><a id=\"changeCaptcha\" class=\"bili-link\" href=\"javascript: void(0);\"></a><button class=\"live-btn default\" id=\"getFreeSilverAward\"></button></div>',\n                'width': 290,\n                'height': 135,\n                'closable': true,\n                'arrow': false\n            });\n        }\n        $('#silver-notice-div').html(' ' + guazNum + ' ' + randomEmoji.helpless());\n        if(CLICK_FLAG == 0){\n            CLICK_FLAG = 1;\n            $(\"#freeSilverCaptchaInput\").off(\"keyup\").on(\"keyup\", function (event) {\n                event.keyCode === 13 && getFreeSilver(event);\n            });\n\n            $('button', verifyBox.el).on('click', getFreeSilver);\n        }\n\n        $treasureBox.off('click').click(function() {\n            verifyBox.show($treasureBox);\n            refreshCaptcha();\n        });\n\n        //$('input', verifyBox.el).on('focus',refreshCaptcha);\n        $(\"#captchaImg, #changeCaptcha\").on('click', refreshCaptcha);\n    };\n\n\n    // Definition: .\n    window.getFreeSilver = function (e) {\n        $(\"#getFreeSilverAward\").text(\"...\");\n        $.ajax({\n            url: \"/freeSilver/getAward?r=\" + Math.random(),\n            type: 'get',\n            data: {\n                captcha: $('input', verifyBox.el).val()\n            },\n            dataType: \"json\",\n            success: function(result) {\n                $(\"#getFreeSilverAward\").text(\"\");\n                if (result.code == 0) {\n                    liveToast($(e.currentTarget)[0], ' ' + result.data.awardSilver + ' ' + randomEmoji.happy(), \"success\");\n                    var silverNumb = parseInt(result.data.silver, 10);\n                    console.log(silverNumb);\n                    treasureCtrl.$fire(\"all!updateCurrency\", { silver: silverNumb });\n                    createTreasure();\n                    $('#freeSilverCaptchaInput').val('');\n                    verifyBox.hide();\n                    setTimeout(function () {\n                        countdown();\n                    }, 3000);\n                } else {\n                    liveToast($(e.currentTarget)[0], result.msg);\n                    $(\"#captchaImg\").click();\n                }\n\n            },\n            error: function() {\n                liveToast($(e.currentTarget)[0], \" \" + randomEmoji.sad() , \"error\");\n                refreshCaptcha();\n                $(\"#getFreeSilverAward\").text(\"\");\n            },\n            complete: function () {\n                if (LAST_COUNT_DOWN != null) {\n                    LAST_COUNT_DOWN.clearCountdown();\n                    LAST_COUNT_DOWN = null;\n                }\n            }\n        });\n    };\n\n    window.FREE_SILVER_HEART = 0;\n    window.freeSilverHeart = function () {\n        if ($.cookie('F_S_T_'+window.UID) == 1) {\n            return false;\n        }\n\n        setTimeout(function () {\n            countdown();\n        }, 3000);\n\n        FREE_SILVER_HEART = setInterval(function () {\n            $.ajax({\n                url: \"/freeSilver/heart?r=\"+Math.random(),\n                type: 'get',\n                dataType: \"json\",\n                success: function (result) {\n                    //result.data.minute = 1;  // TESTING.\n                    if ($.cookie('F_S_T_'+window.UID) == 1) {\n                        clearInterval(FREE_SILVER_HEART);\n                        return true;\n                    }\n                }\n            })\n        }, 60000);  // TESTING:  60000\n\n    };\n\n    window.refreshCaptcha = function () {\n        $(\"#captchaImg\").attr(\"src\", \"/FreeSilver/getCaptcha?t=\" + Math.random());\n    };\n\n    //  By [.LancerComet] at 14:27, 2015.10.16.\n    // .\n    restore !== true && (function (window, undefined) {\n        console.log(\"Shining Star Treasurebox.\");\n        console.log(\"IS_STAR: \" + window.IS_STAR);\n\n        if (window.IS_STAR) {\n            $.getScript(\"http://static.hdslb.com/live-static/live-room/activity/shining-star.min.js\");\n            parseInt(window.FREE_SILVER_TIMES, 10) <= 3 && replaceFunc();\n        }\n\n        // Definition: .\n        var weAreGoingtoGet = {\n            vote: null,\n            seed: null\n        };\n\n        // Definition: .\n        //  live.room .\n        function replaceFunc () {\n\n            // .\n            createTreasure = function () {\n                // Definition: Necessary nodes requirement. | .\n                var $treasureContainer = $(\".treasure\").addClass(\"shining-star-treasure\"),\n                    $treasureCloseBtn = $(\".close-treasure-box\"),\n                    $treasureBox = $(\".treasure-box\").removeClass('animate7').addClass('animate1'),  //  jQuery .\n                    $treasureBoxFooter = $(\".treasure-box-footer\"),\n                    $treasureCountdown = $(\".treasure-count-down\"),\n                    cookieFST = $.cookie(\"F_S_T_\" + window.UID);\n\n                // Action: Treasure events go out when cookieFst exists. |  \"F_S_T_\"  Cookie .\n                cookieFST ? treasureExit() : mainLogic();\n\n                /* ---- Definition go below. ---- */\n\n                // Definition: .\n                function treasureExit () {\n                    $treasureContainer.addClass(\"out\");\n                    setTimeout(function () {\n                        $treasureContainer.hide().removeClass(\"out\");\n                    }, 450);\n                }\n\n                // Definition: .\n                function mainLogic () {\n\n                    // Definition: Hover Event of $treasureContainer. | Hover  @ $treasureContainer.\n                    var $treasureHover = {\n                        on: function () {\n                            $treasureContainer.hover(function () { $treasureCloseBtn.show(); }, function () { $treasureCloseBtn.hide(); });\n                        },\n\n                        off: function () {\n                            $treasureContainer.off(\"mouseenter\").off(\"mouseleave\");\n                        }\n                    };\n\n                    // Definition: Countdown node style changer. | .\n                    //  / .\n                    var $countdownStyle = {\n                        toClickable: function () {\n                            $treasureCountdown.css({ \"cursor\": \"pointer\", \"left\": \"0\" });\n                        },\n                        toUnclickable: function () {\n                            $treasureCountdown.css({ \"cursor\": \"default\", \"left\": \"\" });\n                        }\n                    };\n\n                    // Definition: Countdown on-click Handler. | .\n                    var $countdownOnClick = {\n                        on: function () {\n                            $treasureCountdown.on(\"click\", $treasureBoxCtrl.maximize);\n                        },\n                        off: function () {\n                            $treasureCountdown.off(\"click\");\n                        }\n                    };\n\n                    // Definition: Minimize & Maximize TreasureBox. |  / .\n                    // @ .\n                    // @ .\n                    var $treasureBoxCtrl = {\n                        minimize: function minimize() {\n                            $treasureBox.hide();  // .\n                            $treasureBoxFooter.hide();  // .\n                            $treasureCloseBtn.hide();  // .\n                            $treasureHover.off();  //  Hover .\n                            $countdownStyle.toClickable();  // : toClickable.\n                            $countdownOnClick.on();  // .\n                        },\n                        maximize: function maximize() {\n                            $treasureBox.show();  // .\n                            $treasureBoxFooter.show();  // .\n                            $treasureCloseBtn.show();  // .\n                            $treasureHover.on();  //  Hover .\n                            $countdownStyle.toUnclickable();  // : toUnclickable.\n                            $countdownOnClick.off();  // .\n                        }\n                    };\n\n                    // Action:  Hover .\n                    $treasureHover.on();\n\n                    // Action: .\n                    $treasureCloseBtn.off(\"click\").on(\"click\", $treasureBoxCtrl.minimize);\n\n                    // .\n                    // .\n                    (function dirtyCode () {\n\n                        //  window.coutdownBox () .\n                        if (!coutdownBox) {\n                            coutdownBox = new Popup({\n                                content:\n                                '<i class=\"treasure-img close\"></i>' +\n                                '<div style=\"display: inline-block;width: 180px; padding-left: 10px;\">' +\n                                '<h3 class=\"panel-title\"> ' + randomEmoji.happy() + '</h3>' +\n                                '<p style=\"margin-top: .5em\"> <span id=\"pop-count-down\" style=\"color: #359CCB\">--:--</span></p>' +\n                                '<p style=\"margin-bottom: 1em\"> <span id=\"gz-num\" style=\"color: #359CCB\"></span>  <span id=\"vote-coupons\" style=\"color: #359CCB\"></span> .</p>' +\n                                '<button class=\"acknowledge-btn live-btn default\">' +\n                                '</div>',\n                                width: 290,\n                                height: 135,\n                                closable: true,\n                                arrow: false\n                            });\n                        }\n\n                        // Action: TreasureBox on-click Event Handler. | .\n                        $treasureBox.off(\"click\").on(\"click\", function () {\n                            window.LOGINED ? coutdownBox.show($treasureBox) : liveQuickLogin();\n                        });\n\n                        // Action: Set close event of close button in pop-up panel. | .\n                        //  ...\n                        $(\"button\", coutdownBox.el).off(\"click\").off(\"click\").on(\"click\", function () {\n                            coutdownBox.hide();\n                        });\n\n                    })();\n\n\n                }\n\n            };\n\n            // .\n            // , .\n            // .\n            playTreasureAnimate = function (silver) {\n                var step = 1;\n                var guazNum = silver;\n                var $treasureBox = $('.treasure-box').show();\n                $treasureBox.prev().show();\n                $('.treasure-count-down').css({\n                    'cursor': 'default',\n                    'left': ''\n                });\n                $('.treasure').off('mouseenter').off('mouseleave');\n                var interval = setInterval(_play, 100);\n\n                function _play() {\n                    var next = step + 1;\n                    $treasureBox.addClass('animate' + next).removeClass('animate' + step);\n                    step = next;\n                    if (step === 7) {\n                        clearInterval(interval);\n                    }\n                }\n                if(!verifyBox) {\n                    window.verifyBox = new Popup({\n                        'content': '<i class=\"treasure-img open\" style=\"background-image: url(http://static.hdslb.com/live-static/images/shining-star/treasure-box-large.png); background-size: contain\"></i>' +\n                        '<div style=\"display:none;\" id=\"shining-star-verify\"></div>'+\n                        '<div style=\"display: inline-block; width: 180px;padding-left: 10px;\">' +\n                        '<div id=\"silver-notice-div\"></div>' +\n                        '<input id=\"freeSilverCaptchaInput\" type=\"text\" length=\"4\" class=\"live-input material\" style=\"width: 65px;\" placeholder=\"\">' +\n                        '<img id=\"captchaImg\" src=\"\" alt=\"~\" style=\"width: 60px; height: 30px;vertical-align: top\">' +\n                        '<a id=\"changeCaptcha\" href=\"javascript: void(0);\" class=\"bili-link\"></a>' +\n                        '<button class=\"live-btn default\" id=\"getFreeSilverAward\"></button>' +\n                        '</div>',\n                        'width': 280,\n                        'height': 135,\n                        'closable': true,\n                        'arrow': false\n                    });\n                }\n                $('#silver-notice-div').html(' <span style=\"color: #4fc1e9\">' + weAreGoingtoGet.seed + '</span>  <span style=\"color: #4fc1e9\">' + weAreGoingtoGet.vote + \"</span> .\").css({\"padding-right\": \"10px\", \"margin-bottom\": \"10px\"});\n                if(CLICK_FLAG == 0){\n                    CLICK_FLAG = 1;\n                    $(\"#freeSilverCaptchaInput\").off(\"keyup\").on(\"keyup\", function (event) {\n                        if (event.keyCode !== 13) { return }\n                        getFreeSilverVote(event);\n                    });\n                    $('button', verifyBox.el).on('click', getFreeSilverVote);\n\n                    function getFreeSilverVote (e) {\n                        $(\"#getFreeSilverAward\").text(\"...\");\n                        $.ajax({\n                            url: \"/freeSilver/getAward?r=\" + Math.random() + \"&roomid=\" + window.ROOMID,\n                            type: 'get',\n                            data: {\n                                captcha: $('input', verifyBox.el).val()\n                            },\n                            dataType: \"json\",\n                            success: function(result) {\n                                $(\"#getFreeSilverAward\").text(\"\");\n                                if (result.code == 0) {\n                                    liveToast($(e.currentTarget)[0], ' ' + result.data.awardSilver + '  ' + result.data.getVote + ' ' + randomEmoji.happy(), \"success\");\n                                    var silverNumb = parseInt(result.data.silver, 10);\n                                    window.starVote = {\n                                        voteCount: result.data.vote,\n                                        voteChance: result.data.svote\n                                    };\n                                    treasureCtrl.$fire(\"all!updateCurrency\", { silver: silverNumb });\n                                    createTreasure();\n                                    $('#freeSilverCaptchaInput').val('');\n                                    verifyBox.hide();\n                                    $(\".gift-item[data-gift-id=11] .num-hinter\").css({\"background-position\": result.data.vote * (-16) + \"px 0\"});\n                                    $(\".star-vote-vote-count\").text(result.data.vote);\n                                    $(\".star-vote-voted-num\").text(18 - parseInt(result.data.svote, 10));\n                                    $(\".star-vote-chance\").text(result.data.svote);\n                                    setTimeout(function () {\n                                        countdown();\n                                    }, 3000);\n                                    //  Cookie .\n                                    if ($.cookie(\"F_S_T_\" + window.UID)) {\n                                        $(\".treasure\").fadeOut();\n\n                                        var tips = livePopup({\n                                            title: \"\",\n                                            html: \"<p class='text-center'><br/>('')</p>\",\n                                            type: \"info\",\n                                            width: 300,\n                                            onConfirm: function () {\n                                                tips.remove();\n                                                tips = null;\n                                            }\n                                        });\n                                    }\n                                } else {\n                                    liveToast($(e.currentTarget)[0], result.msg);\n                                    $(\"#captchaImg\").click();\n                                    $(\"#getFreeSilverAward\").text(\"\");\n                                }\n\n                            },\n                            error: function() {\n                                liveToast($(e.currentTarget)[0], \" \" + randomEmoji.sad(), \"error\");\n                                $(\"#getFreeSilverAward\").text(\"\");\n                                refreshCaptcha();\n                            },\n                            complete: function () {\n                                if (LAST_COUNT_DOWN != null) {\n                                    LAST_COUNT_DOWN.clearCountdown();\n                                    LAST_COUNT_DOWN = null;\n                                }\n                            }\n                        });\n                    }\n                }\n\n                $treasureBox.off('click').click(function() {\n                    verifyBox.show($treasureBox);\n                    refreshCaptcha();\n                });\n\n                //$('input', verifyBox.el).on('focus',refreshCaptcha);\n                $(\"#captchaImg, #changeCaptcha\").on('click', refreshCaptcha);\n            };\n\n            // .\n            // .\n            countdown = function () {\n                if (LAST_COUNT_DOWN != null) {\n                    LAST_COUNT_DOWN.clearCountdown();\n                }\n                $.ajax({\n                    url: \"/FreeSilver/getCurrentTask?roomid=\" + window.ROOMID + \"&r=\" + Math.random(),\n                    type: 'get',\n                    dataType: \"json\",\n                    success: function (result) {\n                        if (result.code == 0) {\n                            LOGINED = true;\n                            var silver = result.data.silver;\n                            $('#gz-num').text(silver);\n                            $(\"#vote-coupons\").text(result.data.vote);\n                            weAreGoingtoGet.seed = result.data.silver;\n                            weAreGoingtoGet.vote = result.data.vote;\n\n                            //result.data.minute = 1;  // TESTING.\n\n                            //   3 .\n                            if (result.data.times > 3 && !$.cookie(\"F_S_T_\" + window.UID)) {\n                                window.restoreOriginalFunc();\n                                var tips = livePopup({\n                                    title: \"\",\n                                    html: \"<p class='text-center'><br/>('')</p>\",\n                                    type: \"info\",\n                                    width: 300,\n                                    onConfirm: function () {\n                                        tips.remove();\n                                        tips = null;\n                                    }\n                                });\n                            }\n\n                            var endTime = new Date();\n                            endTime.setMinutes(endTime.getMinutes() + result.data.minute);\n                            LAST_COUNT_DOWN = new CountDown({\n                                endTime: endTime,\n                                element: $('.treasure-count-down, #pop-count-down'),\n                                callback: function () {\n                                    $.ajax({\n                                        url: \"/freeSilver/getSurplus?r=\"+Math.random(),\n                                        type: 'get',\n                                        dataType: \"json\",\n                                        success: function (result) {\n                                            if(result.code !== 0){\n                                                return false;\n                                            }\n                                            var surplus = result.data.surplus;\n                                            if (surplus < 1) {\n                                                playTreasureAnimate(result.data.silver);\n                                            } else {\n                                                resetCountDown(surplus);\n                                            }\n                                        }\n                                    });\n                                }\n                            });\n                        }\n                    }\n                });\n            };\n\n        }\n\n    })(window);\n\n    // Initizalition.\n    $(function () {\n        freeSilverHeart();\n        createTreasure();\n    });\n\n};\n", "module.exports = function () {\n    return require(\"./javascripts/wish.js\")();  // \n};", "/**\n * Created by user on 2016/1/13.\n */\n\nvar liveQuickLogin = require(\"./../../../../common/functions/func-live-quick-login/live-quick-login.js\");\nvar liveToast = require(\"./../../../../common/components/live-widget/live-toast/live-toast.js\");\nvar setNum = require('./../../../../common/functions/func-setnum/set-num.js');\nmodule.exports = function() {\n    /**\n     * \n     * */\n    function Dialog() {\n        this.$el = {};\n        this.doms = {};\n        this.datas = {};\n        this.init();\n    }\n    Dialog.prototype = {\n        template: function() {\n            return '' +\n                '<div class=\"wish-dialog\" id=\"wis-dialog\">' +\n                '<div class=\"dialog-main\">' +\n                '<div class=\"wish-top\">' +\n                '<div class=\"wish-top-icon\"></div>' +\n                '<span class=\"wish-ok-text\"><a href=\"/lottery/lotteryResult\" target=\"_blank\" class=\"ok-target\"></a></span>' +\n                '</div>' +\n                '<div class=\"wish-main\">' +\n                '<p class=\"wish-des\"> 21</p>' +\n                '<div class=\"wish-prize\">' +\n                '<dl class=\"wish-prize-list\">' +\n                '<dt></dt>' +\n                '<dd>' +\n                ' 1 <em class=\"prize-content\"><span class=\"first-prize\">' + this.formatNum(this.datas.first) + '</span></em>' +\n                '</dd>' +\n                '<dd>' +\n                ' 10 <em class=\"prize-content\"><span class=\"second-prize\">'  + this.formatNum(this.datas.second) +  '</span></em>' +\n                '</dd>' +\n                '<dd>' +\n                ' <em class=\"third-prize-num\">' + this.datas.third + '</em> <em class=\"prize-content\">B1</em>' +\n                '</dd>' +\n                '</dl>' +\n                '</div>' +\n                '<div class=\"wish-set\">' +\n                '<div class=\"wish-num-box\">' +\n                '<p><em class=\"wish-num\" id=\"total-wish-num\">' + this.datas.totalnum + '</em></p>' +\n                '<p><em class=\"wish-num\" id=\"my-wish-num\">' + this.datas.num + '</em></p>' +\n                '</div>' +\n                '<div class=\"wish-buy\">' +\n                '<div class=\"wish-buy-content\">' +\n                '<input type=\"text\" class=\"ipt-num\" value=\"1\">' +\n                '<span class=\"wish-buy-type\">' +\n                '<ul>' +\n                '<li class=\"wish-buy-item\"><input checked=\"checked\" type=\"radio\" name=\"buy-type\" data-type=\"silver\" id=\"type-silver\"><label for=\"type-silver\"></label></li>' +\n                '<li class=\"wish-buy-item\"><input type=\"radio\" name=\"buy-type\" data-type=\"gold\" id=\"type-gold\"><label for=\"type-gold\"></label></li>' +\n                '</ul>' +\n                '</span>' +\n                '</div>' +\n                '<div class=\"wish-buy-tip\"><span class=\"buy-tip-icon\"></span>2000/</div>' +\n                '</div>' +\n                '<div class=\"wish-set-btn\">' +\n                '' +\n                '</div>' +\n                '</div>' +\n                '</div>' +\n                '</div>' +\n                '<div class=\"close\"></div>' +\n                '</div>' +\n                '' +\n                ''\n        },\n        $dialog: \"\",\n        $mask: \"\",\n        csses: {\n            \"iptNum\": \".ipt-num\",\n            \"btnBuy\": \".wish-set-btn\",\n            \"totalNum\": \"#total-wish-num\",\n            \"myNum\": \"#my-wish-num\",\n            \"firstNum\": \".first-prize\",\n            \"secondNum\": \".second-prize\",\n            \"thirdPrizeNum\": \".third-prize-num\"\n        },\n        init: function() {\n            this.$el = $(\"<div style='opacity:0'></div>\").appendTo(\".wish-panel\");\n            this.bindEvent();\n        },\n        render: function() {\n            this.$el.html();\n            this.$dialog = $(this.template());\n            this.$mask = $(\"<div class='mask'></div>\");\n            this.$el.append(this.$dialog).append(this.$mask);\n\n            this.setDoms();\n        },\n        setDoms: function() {\n            var $el = this.$el,\n                csses = this.csses;\n\n            this.doms = {\n                $iptNum: $(csses.iptNum, $el),\n                $btnBuy: $(csses.btnBuy, $el),\n                $totalNum: $(csses.totalNum, $el),\n                $myNum: $(csses.myNum, $el),\n                $firstNum: $(csses.firstNum, $el),\n                $secondNum: $(csses.secondNum, $el),\n                $thirdPrizeNum: $(csses.thirdPrizeNum, $el)\n            };\n        },\n        show: function(data) {\n            this.datas = data;\n            this.render();\n            this.setStyle();\n            this.setPosition();\n            this.$el.animate({\n                opacity: 1\n            }, 200);\n        },\n        hide: function() {\n            var self = this;\n\n            this.$el.animate({\n                opacity: 0\n            }, 200, function() {\n                self.$el.html(\"\").css(\"opacity\", 1);\n            });\n        },\n        setPosition: function() {\n            var allWidth = document.documentElement.clientWidth,\n                allHeight = document.documentElement.clientHeight,\n                dialogWidth = this.$dialog.width(),\n                dialogHeight = this.$dialog.height(),\n                top,\n                left,\n                cssData;\n\n\n            top = allHeight / 2 -  dialogHeight / 2;\n            left = allWidth / 2 - dialogWidth / 2;\n\n            if (top < 0) {\n                top = top * 2\n\n            }\n\n            cssData = {\n                width: 750,\n                position: \"fixed\",\n                zIndex: 1100,\n                left: left,\n                top: top\n            }\n\n            this.$dialog.css(cssData)\n        },\n\n        /**\n         * \n         * */\n        setStyle: function() {\n            var clientHeight = document.documentElement.clientHeight;\n\n            if (clientHeight < 750) {\n                this.$dialog.addClass(\"min-dialog\");\n            } else {\n                this.$dialog.removeClass(\"min-dialog\");\n            }\n        },\n        buy: function() {\n            var self = this,\n                $coin = $(\"[name=buy-type]\", this.$el).filter(\"[checked]\"),\n                coinType = $coin.data(\"type\"),\n                $num = this.doms.$iptNum,\n                num = $num.val();\n\n            if (!this.checkNum()) {\n                $num.focus().addClass(\"error\");\n                liveToast(self.doms.$btnBuy, \"~ ('')\", \"error\");\n            } else {\n                this.ajaxBuy({\n                    coinType: coinType,\n                    num: num\n                });\n            }\n\n        },\n        ajaxBuy: function(param) {\n            var self = this;\n\n            $.ajax({\n                type: \"post\",\n                url: \"/lottery/buy\",\n                data: {\n                    coinType: param.coinType,\n                    num: param.num,\n                    token: $.cookie(\"LIVE_LOGIN_DATA\") || \"\"\n                },\n                success: function(data) {\n                    var dataJSON = $.parseJSON(data);\n\n                    if (dataJSON.code === 0) {\n                        self.buySuccess(dataJSON.data);\n                    } else {\n                        self.buyError(dataJSON.msg);\n                    }\n                }\n            });\n        },\n        buySuccess: function(data) {\n            var self = this;\n\n            liveToast(this.doms.$btnBuy[0], \"\", \"success\", false);\n            refreshAccount(data);                           // \n\n            // \n            ajaxGetWishNum(function(data) {\n                var doms = self.doms;\n\n                doms.$totalNum.text(data.totalnum);\n                doms.$myNum.text(data.num);\n                doms.$firstNum.text(self.formatNum(data.first));\n                doms.$secondNum.text(self.formatNum(data.second));\n                doms.$thirdPrizeNum.text(data.third);\n            })\n        },\n        buyError: function(msg) {\n            liveToast(this.doms.$btnBuy[0], msg, \"error\", false);\n        },\n        checkNum: function() {\n\n            var $num = this.doms.$iptNum,\n                num = $num.val(),\n                flag = true;\n\n            if (!num || /[^0-9]/.test(num) ) {\n                flag = false;\n            }\n\n\n            if (flag) {\n                $num.removeClass(\"error\");\n            } else {\n                $num.addClass(\"error\");\n            }\n\n            return flag;\n        },\n        formatNum: function(num) {\n            var str = \"\",\n                dotNum;\n\n            if (num >= 10000) {\n                dotNum = num / 10000;\n                str = dotNum.toString().replace(/(\\d+)(\\.)?(\\d+)/, function (a, b, c, d) {\n                    var dot;\n\n                    if (c) {\n                        dot = d.toString().substring(0, 1);\n                        return b + (dot == 0 ? \"\" : (\".\" + dot))\n                    } else {\n                        return a\n                    }\n                });\n\n                str += \"\";\n            } else {\n                str = num;\n            }\n\n            return str;\n        },\n        bindEvent: function() {\n            var self = this,\n                doms = this.doms,\n                $el = this.$el,\n                resizeTid = 0;\n\n            $el.on(\"keyup\", \".ipt-num\", function() {\n                self.checkNum();\n            });\n\n            $el.on(\"click\", \".wish-set-btn\", function() {\n                self.buy();\n            });\n\n            $el.on(\"click\", \".close\", function() {\n                self.hide();\n            });\n\n            $el.on(\"click\", \".mask\", function() {\n                self.hide();\n            });\n\n            $(window).resize(function() {\n                if (resizeTid) {\n                    clearTimeout(resizeTid);\n                }\n\n                resizeTid = setTimeout(function() {\n                    if (self.$el.html()) {\n\n                        self.setStyle();\n                        self.setPosition();\n                    }\n                }, 50);\n            });\n        }\n    };\n\n\n    /**\n     * \n     * */\n    function refreshAccount(data) {\n        avalon.vmodels[\"giftCtrl\"].$fire(\"all!updateCurrency\", {\n            gold: data.gold,\n            silver: data.silver\n        });\n    }\n\n\n    /**\n     * \n     * */\n    function ajaxGetWishNum(cb) {\n        var cb = cb || function() {};\n\n        $.ajax({\n            url: \"/lottery/index\",\n            cache: false,\n            success: function(data) {\n                var dataJSON = $.parseJSON(data);\n\n                if (dataJSON.code === 0) {\n                    cb(dataJSON.data);\n                }\n            }\n        });\n    }\n\n\n\n    var dialog = new Dialog();\n    return {\n        show: function() {\n            liveQuickLogin();\n\n            if (!dialog.$el.html()) {\n                ajaxGetWishNum(function(data) {\n                    dialog.show(data)\n                });\n            }\n        }\n    }\n};\n\n", "/*\n *  Live Room Main Script File By LancerComet at 10:57, 2015/12/15.\n *  # Carry Your World #\n *  ---\n *\n *  :\n *  ---\n *   Live Room . (Browserify)\n *  , ****.\n *   Browserify  JavaScript .\n *  Browserify  Common.JS .\n *\n *  Common.JS :\n *  ---\n *   - JS  .js .\n *   - ,  \"module.exports = ...\" , , .\n *     (: \"bilibili.js\" ,  module.exports = \"Bilibili\")\n *   -  \"var  = require('')\" , \"\" .\n *     (: var a = require(\"bilibili\"),  a  \"Bilibili\")\n *\n *  :\n *  ---\n *   var  = require(\"./.js\");        //  \".js\"  \"\".\n *   require(\"./.js\")();                    //  \".js\" .\n *   require(\"./.js\")();               // ... (_`)\n *   require(\"./.js\")();\n *   require(\"./.js\")();\n *   require(\"./.js\")();\n *\n */\n\n// .\n// =================\nrequire(\"./../common/app-config/app-config\").avalonConfig();  //  Avalon.\nrequire(\"./../common/app-config/avalon-filters\")();  //  Avalon .\nrequire(\"./../common/app-config/app-config\").globalConfig(window);  // .\nrequire('../common/functions/func-number-tofixed/number-tofixed')();  //  toFixed1 .\n\n// .\n// =================\nrequire(\"../common/functions/func-number-tofixed/number-tofixed\")();  // Number .\nrequire(\"./../common/live-service/live-service-ctrl\")();  // .\n\n\n// .\n// =================\nrequire(\"../common/components/live-top-navigator/intro-scripts\")();  // .\n\n\n// .\n// =================\nrequire(\"./room-javascripts/live-room-init\")(window);  // .\nrequire(\"./components/gift-section/intro-javascripts.js\")();  // .\nrequire(\"./components/live-room-sidebar-left/intro.js\")();  // .\nrequire(\"./components/my-attention/intro.js\")();  // .\nrequire(\"./components/sign-up/intro.js\")();  // .\nrequire(\"./room-javascripts/live-room-funcs\").topNavOnScroll(window);  // .\nrequire(\"./components/seed-exchange/seed-exchange\")();  //  & .\nrequire(\"./../common/components/live-feedback/live-feedback\")();  // .\nrequire(\"./room-javascripts/live-room-funcs\").greeting();  // .", "/*\n *  Live Room Flash External Call Functions By LancerComet at 16:11, 2015/12/23.\n *  # Carry Your World #\n *  ---\n *  Flash .\n */\n\nvar explorerDetective = require('../../common/functions/func-explorer-detective/explorer-detective')();\n\nmodule.exports = function (window) {\n\n    // Definition: Flash  Avalon .\n    var ctrlByFlash = avalon.define({\n        $id: \"ctrlByFlash\"\n    });\n\n\n    // Definition: Flash  By LancerComet at 13:59, 2015.11.16.\n    //  Flash .\n    window.getDanmuColor = function () {\n        return window.colorfulDanMu.currentColor;\n    };\n\n    // Definition: Flash .\n    //  Flash .\n    window.PlayerSetOnline = function (data) {\n        data = parseInt(data, 10) < 0 ? 1 : data;\n        avalon.ready(function () {\n            ctrlByFlash.$fire(\"all!setViewerCount\", data);  // Fire to headInfoCtrl.\n        });\n    };\n\n    // Definition: Protocol .\n    //  Flash .\n    //  Worker  IE IE  Blob  Worker  IE  Worker.\n    // Worker  String -> Blob -> DataURL .\n    (function serverCallback () {\n        var msgArr = null, danmuWorker = null;\n\n        //  IE  Worker.\n        // Firefox  WebWorker , .\n        var useWorker = (typeof Worker === \"function\" && explorerDetective.indexOf(\"IE\") < 0 && explorerDetective.indexOf(\"Firefox\") < 0) ;\n        if (useWorker) {\n\n            // workerJS  live-room-danmu-worker.js.\n            var workerJS = ['var msgArr={now:[],temp:[],aveSpeed:80};setInterval(function(){msgArr.now=msgArr.now.concat(msgArr.temp.splice(0)),msgArr.aveSpeed=Math.ceil(1e3/msgArr.now.length)},1e3),onmessage=function(e){msgArr.temp.push(e.data)},function e(){postMessage(msgArr.now.shift()),setTimeout(e,msgArr.aveSpeed)}();'];\n            var workerJSBlob = new Blob(workerJS, {type: \"text/javascript\"});\n\n            danmuWorker = new Worker(window.URL.createObjectURL(workerJSBlob));\n\n            danmuWorker.onmessage = function (event) {\n                var msgData = event.data;\n                //if (msgData) {\n                //    consoleText.log(\"Danmu Worker onMessage:\");\n                //    consoleText.log(msgData);\n                //}\n                msgData && msgData.cmd && protocol[msgData.cmd] && protocol[msgData.cmd](msgData);\n            };\n\n            workerJS = workerJSBlob = null;\n\n        } else {\n            // IE  Worker .\n            msgArr = { now: [], temp: [], aveSpeed: 80 };\n\n            setInterval(function() {\n                msgArr.now = msgArr.now.concat(msgArr.temp.splice(0));\n                msgArr.aveSpeed = Math.ceil(1000 / msgArr.now.length);\n            }, 1000);\n\n            function showMsg () {\n                var msgData = msgArr.now.shift();\n                msgData && msgData.cmd && protocol[msgData.cmd] && protocol[msgData.cmd](msgData);\n                setTimeout(showMsg, msgArr.aveSpeed);\n            }\n\n            showMsg();\n        }\n\n        window.server_callback = function server_callback (json) {\n            console.log(\"server_callback\");\n            try {\n                if (useWorker) {\n                    danmuWorker.postMessage($.parseJSON(json));\n                } else {\n                    msgArr.temp.push($.parseJSON(json));\n                }\n            } catch (tryErr) {\n                // Do nothing.\n            }\n        };\n\n        // The old fashion:\n        // ==========================\n        //$(window).on(\"blur\", function () {\n        //    $(window).on(\"focus\", danmuWindowFocus);\n        //});\n        //\n        //function danmuWindowFocus () {\n        //    if (msgArr.now.length > 100) {\n        //        msgArr.now = msgArr.now.splice(0, 100);\n        //    }\n        //    $(window).off(\"focus\", danmuWindowFocus);\n        //}\n    })();\n\n\n    // Definition: .\n    //  Flash .\n    window.addMessage = function (json) {\n        console.log(\"addMessage\");\n        ctrlByFlash.$fire(\"all!addDanmu\", json);\n    };\n\n\n    // Definition:  B .\n    //  Flash .  JB .\n    window.showBkela = function () {\n        $(\".gift-item.gift-3\").click();\n    };\n\n\n    // Definition: Flash .\n    //  Flash .\n    window.flashAttendRoom = function () {\n        $(\".attention-btn-ctrl\").find(\".btn-transition\").click();\n    };\n\n    // Definition: Flash .\n    window.player_fullwin = function (status) {\n        console.log(\"Player Fullscreen: \" + status);\n        status ? $(\"body\").addClass(\"player-full-win\") : $(\"body\").removeClass(\"player-full-win\");\n    };\n\n};\n", "/*\n *  Live Room Functions By LancerComet at 16:58, 2016/1/5.\n *  # Carry Your World #\n *  ---\n *  .\n *\n */\n\nvar appConfig = require('../../common/app-config/app-config');\nvar typeAdjust = require('../../common/functions/func-type-adjust/type-adjust');\nvar explorerDetective = require('../../common/functions/func-explorer-detective/explorer-detective');\n\n\n// Definition: .\n// , .\n// Usage: new CountDown(...) || CountDown(...)\n/*\n *  Param: {\n *    endTime: Date (TimeStamp),  // .\n *    element: HTML Dom || jQuery Element,  // .\n *    callback: Function  // .\n *  }\n */\n// ================================\nfunction CountDown (param) {\n\n    //  \"\".\n    if (!(this instanceof CountDown)) {\n        return new CountDown(param);\n    }\n\n    var dateNow = new Date();\n    var endTime = param.endTime;\n\n    if (!endTime || !(endTime instanceof Date) || endTime.getTime() <= dateNow.getTime()) {\n        consoleText.log(appConfig.consoleText.error + \".\");\n    }\n\n    // Definition: .\n    var interval = setInterval(function () {\n        var ms = endTime.getTime() - dateNow.getTime();  // : .\n        var mm = Math.floor(ms / 60 / 1000); // : .\n        var s = ms - (mm * 60 * 1000); // :  - \n        var ss = Math.floor(s / 1000); // .\n        mm = mm < 10 ? \"0\" + mm : mm;\n        ss = ss < 10 ? \"0\" + ss : ss;\n\n        // Action:  HTML .\n        var outputTime = mm + \":\" + ss;\n        if (typeAdjust(param.element) === \"jQuery Object\") {\n            param.element.html(outputTime);\n        } else {\n            param.element.innerHTML = outputTime;\n        }\n\n        // Action: .\n        if (mm == \"00\" && ss == \"00\") {\n            clearInterval(interval);\n            param.callback && param.callback();\n            return;\n        }\n\n        endTime.setSeconds(endTime.getSeconds() - 1);\n\n    }, 1000);\n\n    this.countDown = interval;\n}\nCountDown.prototype.clearCountdown = function () {\n    clearInterval(this.countDown);\n};\n// ================================\n\n\n\n\n// Definition: .\n// ================================\nvar roomSilentTimer = null;  // Definition: .\nvar $silentMerge = $(\".room-silent-merge\");\nvar roomSilent = {\n    on: function (hintMsg, endTime) {\n        roomSilentTimer && roomSilentTimer.clearCountdown();\n        roomSilentTimer = CountDown({\n            endTime: endTime,\n            element: $silentMerge.find(\".count-down\"),\n            callback: function () {\n                $silentMerge.fadeOut(200);\n            }\n        });\n        $silentMerge.show().find(\".hint-text\").text(hintMsg);\n    },\n    off: function () {\n        roomSilentTimer.clearCountdown();\n        $silentMerge.fadeOut(200);\n    }\n};\n// ================================\n\n\n\n\n// Definition: .\n// ================================\nvar getHistoryDanmu = function (vmodel) {\n    $.ajax({\n        url: \"/ajax/msg\",\n        type: \"POST\",\n        data: {\n            roomid: window.ROOMID\n        },\n        dataType: \"JSON\",\n        timeout: 5000,\n        success: function (result) {\n            if (result.code == 0) {\n\n                // Action: .\n                for (var i = 0, j = result.data.room.length; i < j; i++) {\n\n                    // Definition: .\n                    var item = result.data.room[i];\n\n                    // Definition: .  Protocol  JSON .\n                    var json = { info:[] };\n                    json.info[0] = [];\n                    json.info[0][5] = null;  // RND,  null.\n                    json.info[1] = item.text;  // .\n                    json.info[2] = [];\n                    json.info[2][0] = item.uid;  // UID\n                    json.info[2][1] = item.nickname;  // Username.\n                    json.info[2][2] = item.isadmin;  // IS Admin.\n                    json.info[2][3] = item.vip;  // IS VIP.\n                    json.info[3] = item.medal;  // .\n                    json.info[4] = item.user_level;  // .\n                    json.info[5] = item.title;  // .\n\n                    vmodel.$fire(\"all!addDanmu\", json);\n\n                    item = json = null;\n                }\n\n                //  Greeting .\n                (VIP == 1 && VIP_TIPS == 1) && vmodel.$fire(\"all!addSelfWelcomeMsg\");\n            }\n        },\n        error: function (result) {\n\n        }\n    });\n};\n// ================================\n\n\n\n\n// Definition: .\n// ================================\nfunction greetingInfo () {\n    if (!explorerDetective() === \"IE 8\") {\n        return;\n    }\n    consoleText.log(appConfig.appInfo.name + \" \" + appConfig.appInfo.version + ' Lovingly By  ' + new Date().getFullYear() + ' - ' + (new Date().getFullYear() + 1) + ' Bilibili Live Department  ...(\\'\\')   # Renascence #\\n');\n    consoleText.log(\"Version: \" + appConfig.appInfo.version + \", CodeName: \" + appConfig.appInfo.codeName + \".\\n\\n\\n\");\n}\n// ================================\n\n\n\n\n// Definition: .\n// ================================\nvar changeRoomBKTimeout = null;\nfunction changeRoomBK (link) {\n    $(\".bk-img\").addClass(\"fade-out\").removeClass(\"fade-in\");\n    clearTimeout(changeRoomBKTimeout);\n    changeRoomBKTimeout = setTimeout(function () { $(\".bk-img\").addClass(\"fade-in\").removeClass(\"fade-out\").css({\"background-image\": \"url(\" + link + \")\"}) }, 380)\n}\n// ================================\n\n\n\n\n// Definition: .\n// ================================\nfunction loadingCutOffMsg () {\n    if (window.ISANCHOR != 1) { return; }\n    $.ajax({\n        url: \"/liveact/cutoffmsg\",\n        type: \"POST\",\n        data: { roomid: window.ROOMID },\n        dataType: \"JSON\",\n        success: function (result) {\n            if (result.code != 0 || !result.msg) { return; }\n\n            var hintPopup = window.livePopup({\n                title: \" > <\",\n                html: '<p><span style=\"color: red\">\"' + result.msg + '\"</span> <span style=\"color: red\"></span></p><p> <span style=\"color: #61c7eb\">livehelp@bilibili.com</span>  <span style=\"color: #61c7eb\"> QQ </span></p>' +\n                '<div><input type=\"checkbox\" id=\"cut-off-acknowledge\"><label for=\"cut-off-acknowledge\" class=\"v-top dp-inline-block\" style=\"margin-top: 7px\"></label></div>',\n                type: \"info\",\n                onConfirm: function () {\n                    $(\"#cut-off-acknowledge\").is(\":checked\") && $.post(\"/liveact/del_cutoff_msg\", { roomid: window.ROOMID }, null, \"JSON\");\n                    hintPopup.remove();\n                    hintPopup = null;\n                }\n            });\n        }\n    });\n}\n// ================================\n\n\n\n\n// Definition: .\nfunction topNavOnScroll (window) {\n    $(function () {\n        var scrollBefore = null;\n        $(window).scroll(function (event) {\n            var scrollY = event.currentTarget.scrollY || event.currentTarget.pageYOffset;\n            var delta = scrollY - scrollBefore > 0 ? \"scrollDown\" : \"scrollUp\";\n            var $topNav = $(\".live-top-nav-ctnr\");\n\n            switch (delta) {\n                case \"scrollDown\":\n                    $topNav.addClass(\"fixed-hide\");\n                    scrollBefore = scrollY - 1;  //  IE, IE  pageYOffset , .\n                    break;\n                case \"scrollUp\":\n                    $topNav.removeClass(\"fixed-hide\");\n                    scrollBefore = scrollY + 1;\n                    break;\n            }\n        });\n    });\n}\n\n\n\nmodule.exports = {\n\n    // Definition: .\n    changeRoomBK: changeRoomBK,\n\n    // Definition: .\n    // Usage: new CountDown(...) || CountDown(...)\n    CountDown: CountDown,\n\n    // Definition: . , .\n    roomSilent: roomSilent,\n\n    // Definition: .\n    getHistoryDanmu: getHistoryDanmu,\n\n    // Definition: .\n    greeting: greetingInfo,\n\n    // Definition: .\n    loadingCutOffMsg: loadingCutOffMsg,\n\n    // Definition: .\n    topNavOnScroll: topNavOnScroll\n\n};", "/*\n *  Live Room Initialization By LancerComet at 14:08, 2015/12/15.\n *  # Carry Your World #\n *  ---\n *   JavaScript.\n *\n */\n\nvar appConfig = require('../../common/app-config/app-config');\n\nmodule.exports = function (window, undefined) {\n    \"use strict\";\n\n    // Action: .\n    globalFunc(window);\n    require(\"./live-room-flash-func\")(window);\n\n    // Action:  - getInfo.\n    $.ajax({\n        url: \"/live/getInfo\",\n        type: \"GET\",\n        data: {\n            roomid: window.ROOMID\n        },\n        dataType: \"JSON\",\n        success: successCallback,\n        error: errorCallback\n    });\n\n\n};\n\n// Definition: .\nfunction successCallback (result) {\n    // Error Handler.\n    if (result.code != 0) {\n        throw new Error(appConfig.consoleText.error + \"getInfo : \" + result.msg);\n    }\n\n    // Action: .\n    require(\"./room-init-funcs/func-set-global-variables\")(window, result);\n\n    // Action: .\n    require(\"./live-room-protocol\")(window);\n\n    // Action: . , , , .\n    require(\"./room-init-funcs/func-set-data\")(result);\n\n    // Action: .\n    require(\"./room-init-funcs/func-user-online-heart\")();\n\n    // Action: .\n    require(\"../components/treasure-box/treasure-box\")(window);\n\n    // Action: .\n    require(\"../components/quiz-system/intro-scripts\")();\n\n    // Action: .\n    require(\"../components/recommend-videos/recommend-videos\")(window);\n\n    // Action: .\n    if (parseInt(ISANCHOR, 10) === 1) {\n        require(\"../components/admin-functions/intro-scripts\")();  // .\n    }\n\n    // Action \n    require('../components/admin-room-edit-panel/room-edit-panel')(result.data);\n\n\n    // Action: .\n    //  100% .\n    require(\"./room-init-funcs/func-room-data-deferred\")(result);\n\n}\n\n// Definition: .\nfunction errorCallback (result) {\n    throw new Error(appConfig.consoleText.error + \"getInfo , .\");\n}\n\n// Definition: .\n// .\nfunction globalFunc (window) {\n\n    // Definition:  By LancerComet at 14:33, 2015.11.05.\n    /*\n     *  :\n     *  ---\n     *  var trackEvent = liveLookEvent($(\"#targetDom\")[0]);\n     *  trackEvent  #targetDom ,  trackEvent .\n     *\n     *  eg: trackEvent.click[0]  #targetDom .\n     *      trackEvent.click[0].handler .\n     *      .\n     *\n     */\n    window.liveTrackEvents = function (element) {\n        return $.data ? $.data(element, \"events\", undefined, true) : $._data(element, \"events\");\n    };\n\n}", "/*\n *  Live Room Protocol by LancerComet at 11:14, 2015/12/17.\n *  # Carry Your World #\n *  ---\n *   Protocol .\n *\n *  :\n *  ---\n *  Protocol  Flash , .\n *\n */\nvar appConfig = require('../../common/app-config/app-config');\nvar livePopup = require('../../common/components/live-widget/live-popup/live-popup');\nvar randomEmoji = require('../../common/functions/func-random-emoji/random-emoji');\nvar liveRoomFuncs = require('./live-room-funcs');\n\nmodule.exports = function (window, undefined) {\n    \"use strict\";\n\n    // Definition: .\n    var $msgPool = $(\"#chat-msg-list\");\n\n    // Definition: Protocol .\n    //  Flash .\n    if (window.protocol) {\n        throw new Error(appConfig.consoleText.error + \"window.protocol , .\");\n    }\n\n    // Definition: Protocol.\n    window.protocol = {};\n\n    // Definition:  Avalon .\n    // , .\n    var flashProtoCtrl = avalon.define({\n        $id: \"flashProtoCtrl\"\n    });\n\n\n    /*\n     *  .\n     *  ==============================================\n     */\n\n    // .\n    window.protocol.DANMU_MSG = function (json) {\n        console.log(\"protocol: DANMU_MSG\");\n        console.log(json);\n\n        // . Fire to \"addDanmu\" in chatListCtrl.\n        //  UID  DANMU_RND .\n        //json.info[2][0] == UID || json.info[0][5] == DANMU_RND && flashProtoCtrl.$fire(\"all!addDanmu\", json);\n        flashProtoCtrl.$fire(\"all!addDanmu\", json);\n    };\n\n    // .\n    window.protocol.SEND_GIFT = function (json) {\n        /*\n         *  TODO:\n         *   - .\n         *   - .\n         *   - .\n         *   - .\n         */\n        console.log(\"protocol: SEND_GIFT\");\n        console.log(json);\n\n        // .\n        flashProtoCtrl.$fire(\"all!addGift\", json);\n        activitySendGift(json);  // .\n    };\n\n    // .\n    window.protocol.SEND_TOP = function (json) {\n        // TODO: loadTop10(json)\n        console.log(\"protocol: SEND_TOP\");\n        flashProtoCtrl.$fire(\"all!updateGiftTop\", json.data.top_list);\n    };\n\n    // .\n    window.protocol.CHANGE_ROOM_INFO = function (json) {\n        console.log(\"protocol: CHANGE_ROOM_INFO\");\n        console.log(json);\n        require(\"./live-room-funcs\").changeRoomBK(json.background);\n    };\n\n    // .\n    window.protocol.WELCOME = function (json) {\n        console.log(\"protocol: WELCOME\");\n        console.log(json);\n\n        /*\n         *  @ json: {\n         *    data: {\n         *      isadmin: 0 || 1,\n         *      uid: Number,\n         *      uname: String\n         *    }\n         *  }\n         */\n\n        flashProtoCtrl.$fire(\"all!addWelcomeMsg\", json);\n    };\n\n    // .\n    window.protocol.WIN_ACTIVITY = function (json) {\n        activityDraw.win(json);\n    };\n\n    // .\n    window.protocol.SYS_MSG = function (json) {\n        // TODO: addMessage\n        console.log(\"protocol: SYS_MSG\");\n        console.log(json)\n\n        flashProtoCtrl.$fire(\"all!addSysMsg\", json);\n\n    };\n\n\n\n\n    /*\n     *  .\n     *  ==============================================\n     */\n\n    // .\n    window.protocol.LIVE = function (json) {\n        // TODO: liveStatusControl(\"on\");\n        console.log(\"protocol: LIVE\");\n        flashProtoCtrl.$fire(\"all!liveStatusButton\", \"on\");\n    };\n\n    // .\n    window.protocol.PREPARING = function (json) {\n        // TODO: liveStatusControl(\"off\");\n        console.log(\"protocol: PREPARING\");\n        flashProtoCtrl.$fire(\"all!liveStatusButton\", \"off\");\n    };\n\n    // .\n    window.protocol.END = function (json) {\n        console.log(\"protocol: END\");\n    };\n\n    // .\n    window.protocol.CLOSE = function (json) {\n        console.log(\"protocol: CLOSE\");\n    };\n\n    // .\n    window.protocol.BLOCK = function (json) {\n        console.log(\"protocol: BLOCK\");\n    };\n\n\n\n    /*\n     *  .\n     *  ==============================================\n     */\n\n    // .\n    window.protocol.ROOM_SILENT_ON = function (json) {\n        console.log(\"ROOM_SILENT_ON\");\n        console.log(json);\n\n        // json.is_newbie = 1 ,  1 .\n        var hintMsg = json.is_newbie == 1 ? \"\" : \"\";\n        $msgPool.append('<p class=\"system-msg\" style=\"color: #f25d8e\">[]' + hintMsg + '</p>');\n\n        if (ISADMIN != 1 && (json.is_newbie != 1 || (json.is_newbie == 1 && IS_NEWBIE == 1 && VIP != 1))) {\n            // Definition: .\n            var endTime = new Date();\n            endTime.setSeconds(endTime.getSeconds() + json.countdown);\n\n            // .\n            liveRoomFuncs.roomSilent.on(hintMsg, endTime);\n        }\n    };\n\n    // .\n    window.protocol.ROOM_SILENT_OFF = function (json) {\n        $msgPool.append('<div class=\"system-msg\" style=\"color: #4fc1e9\">[]</div>');\n        liveRoomFuncs.roomSilent.off();\n    };\n\n    // .\n    window.protocol.ROOM_BLOCK_MSG = function (json) {\n        // json.uid, json.uname\n        console.log(\"protocol: ROOM_BLOCK_MSG\");\n        console.log(json);\n        $msgPool.append('<div class=\"system-msg\"> <em style=\"color: #aaa\">' + json.uname + '</em> </div>');\n    };\n\n    // .\n    window.protocol.ROOM_LOCK = function (json) {\n        console.log(\"protocol: ROOM_LOCK\");\n        console.log(json);\n        if (UID == MASTERID) {\n            livePopup({\n                title: \"\",\n                content: '<span style=\"color: #FF0000\"></span> QQ ',\n                type: \"info\",\n                width: 350,\n                onConfirm: function () {\n                    location.href = \"/\";\n                }\n            });\n        } else {\n            livePopup({\n                title: \"\",\n                content: \"\",\n                type: \"info\",\n                width: 300,\n                onConfirm: function () {\n                    location.href = \"/\";\n                }\n            });\n        }\n    };\n\n    // .\n    window.protocol.ROOM_KICKOUT = function (json) {\n        flashProtoCtrl.$fire(\"all!addKickoutMsg\", json);\n    };\n\n    // .\n    window.protocol.ROOM_BLOCK_INTO = function (json) {\n        // json.uid, json.uname\n        if (parseInt(json.uid, 10) === UID) {\n            livePopup({\n                title: \" \" + randomEmoji.sad(),\n                content: \" ~ \" + randomEmoji.helpless(),\n                type: \"alert\",\n                button: {\n                    confirm: \"~~~~\"\n                },\n                onConfirm: function () {\n                    location.href = \"/\";\n                }\n            });\n        }\n\n        flashProtoCtrl.$fire(\"all!addKickoutMsg\", json);\n\n    };\n\n    // .\n    window.protocol.ROOM_AUDIT = function (json) {\n        // TODO: window.UID == window.MASTERID && loadAudit();\n    };\n\n    // .\n    window.protocol.CUT_OFF = function (json) {\n\n        if (UID == MASTERID) {\n            flashProtoCtrl.$fire(\"all!liveCutOff\");\n            require(\"./live-room-funcs\").loadingCutOffMsg();\n        } else {\n            var popup = livePopup({\n                title: \"\",\n                content: \"\",\n                type: \"info\",\n                width: 300,\n                onConfirm: function () {\n                    popup.remove();\n                    popup = null;\n                }\n            });\n        }\n\n    };\n\n    // .\n    window.protocol.ROOM_ADMINS = function (json) {\n\n    };\n\n    // .\n    window.protocol.ROOM_SHIELD = function (json) {\n\n    };\n\n    //  \n    window.protocol.GAODA = function (json) {\n        console.log(\":\",json);\n\n        (function(){\n\n            //\n            var gaodaPanel =  $('<div class=\"ka-draw-box\"><div class=\"ka-close\"></div><div class=\"ka-title\"></div><div class=\"ka-content\"><p></p></div><div class=\"ka-btn\"></div></div>');\n\n            var $kaDrawBox =  $(\".ka-draw-box\");\n\n            if ( $kaDrawBox.length >= 1 ) {\n\n                $kaDrawBox.removeAttr(\"style\");\n                $(\".ka-content\").html(\"<p></p>\");\n                $(\".ka-draw-box\").remove();\n\n            }\n\n            //\n            $(\"body\").on(\"click\", \".ka-close, .ka-btn\", function(){\n                gaodaPanel.remove();\n            });\n\n            var _rcode = json.data.rcode;\n\n            $.ajax({\n                url: \"gaoda/getReward\",\n                type: \"GET\",\n                data: {\n                    room_id: json.roomid,\n                    rcode: _rcode\n                },\n                dataType: \"JSON\",\n                success: function (result) {\n\n                    if( result.code == 0 ) {\n                        // \n                        $(\"body\").append(gaodaPanel);\n\n                        var arr_t = {2:\"B1\",3:\"66\",4:\"2016\",5:\"200\",0:\"~\"};\n                        var giftText = null;\n                        if ( result.data.status == 1){\n                            if( result.data.rank == 1){\n\n                                //~\n                                $(\".ka-btn\").removeClass(\"close-popup\").addClass(\"ka-draw-complete\");\n\n                                if (_rcode == 75) {\n                                    giftText = \"MG1\";\n                                    $(\".data-status span\").addClass(\"gaoda-top2\")\n                                }else if (_rcode == 100) {\n                                    giftText = \"PG1\";\n                                    result.data.rank = 7;\n                                    $(\".data-status span\").addClass(\"gaoda-top1\")\n                                }\n                            } else {\n                                giftText = arr_t[result.data.rank];\n                                $(\".ka-btn\").addClass(\"close-popup\");\n\n                            }\n                        }else {\n                            giftText = \"~\";\n                        }\n\n                        $(\".ka-content\").html(\"<p>: <b style='font-size: 16px'>\"+ json.data.uname +\"</b></p><p class='mar-top24'></p><div class='gao-da-gift'><span class='gift-\"+ result.data.rank +\"'></span><span>\"+ giftText +\"</span></div>\")\n\n                    }\n\n                }\n            });\n\n\n        })(window);\n    };\n\n    //  \n    window.protocol.GAODA_START = function (json) {\n\n        console.log(\":\",json);\n        var cpData = json.data.rcode+\"%\";\n        console.log(cpData);\n\n        (function(){\n            // \n            var picPanel = $('<div class=\"gao-da-tips\"><div class=\"ka-close-pic\"></div><div class=\"ka-tips-1\"></div><div class=\"data-times\"><span></span></div><div class=\"ka-tips-2\"></div></div>');\n\n            var initPic;\n\n            $(\"body\").on(\"click\", \".gao-da-tips .ka-close-pic\", function(){\n                clearInterval(initPic);\n                picPanel.remove();\n            });\n\n            picTimes(json.roomid);  //\n\n            function picTimes (roomid) {\n\n                $.ajax({\n                    url: \"gaoda/index\",\n                    type: \"GET\",\n                    data: {\n                        room_id: roomid,\n                        complete:cpData,\n                        timestamp: Date.now()\n                    },\n                    dataType: \"JSON\",\n                    success: function (result) {\n\n                        if (result.code == 7) {\n\n                            $(\"#chat-ctrl-panel\").append(picPanel);\n                            $(\".data-times span\").text(result.data.deadline);\n\n                            initPic = setInterval(function(){\n                                var picTimes = $(\".data-times span\").text();\n\n                                if( picTimes > 0){\n                                    picTimes--;\n                                    $(\".data-times span\").text(picTimes);\n                                }else{\n                                    picPanel.remove();\n                                }\n                            }, 1000);\n\n                        }\n                    }\n                });\n            }\n\n        })(window);\n    };\n\n\n};\n\n\n// Definition: .\n// , .\n\n\n//  SEND_GIFT .\nfunction activitySendGift (json) {\n    // : require(\"shining-star\").updateTicket(json);\n    //flashProtoCtrl.$fire(\"all!updateRiceCake\", json.data.top_cake);\n}\n\n\n//  DANMU_MSG .\nfunction activityDanmuMsg (json) {\n    // : require(\"shining-star\").announcement(json);\n}", "/*\n *  Live Room Data Deferred Update By LancerComet at 10:12, 2015/01/20.\n *  # Carry Your World #\n *  ---\n *  : .\n *   100% ..\n *\n */\n\nvar lazyInit = require('../../../common/functions/func-avalon-lazy-init/lazy-init');\nvar liveRoomFuncs = require('../live-room-funcs');\n\nmodule.exports = function (result) {\n\n    // , .\n    avalon.ready(function () {\n\n        var emptyCtrl = avalon.define({\n            $id: \"emptyNode\"\n        });\n\n        lazyInit($(\"#empty-node\")[0], emptyCtrl, function () {\n\n            /* Action goes below. */\n\n            // Action: .\n            setTimeout(function () {\n                emptyCtrl.$fire(\"all!updateCurrency\", {\n                    gold: parseInt(result.data.GOLD, 10),\n                    silver: parseInt(result.data.SILVER, 10)\n                });\n            }, 1);\n\n            // Action: .\n            liveRoomFuncs.getHistoryDanmu(emptyCtrl);\n\n            // Action: .\n            require(\"./func-set-data-activity\")(result, emptyCtrl);\n\n            // Action: .\n            require(\"../live-room-funcs\").loadingCutOffMsg();\n        });\n    });\n\n\n};", "/*\n *  Live Room Initialization By LancerComet at 11:11, 2015/12/21.\n *  # Carry Your World #\n *  ---\n *  .\n *   func-room-data-deferred .\n *\n *  \n *   - .\n */\n\n\nmodule.exports = function (result, avalonCtrl) {\n\n    // Action: .\n    // result.data.starRank\n    avalonCtrl.$fire(\"all!shiningStarCount\", result.data.starRank);\n\n};", "/*\n *  Live Room Data Setting By LancerComet at 11:55, 2015/12/21.\n *  # Carry Your World #\n *  ---\n *  : .\n */\n\nmodule.exports = function (result) {\n\n    // Action: .\n    require(\"../../components/header-section/header-section.js\")(result, window);\n\n    // Action: .\n    require(\"../../components/chat-area/intro-javascripts\")(result);\n\n    // Action: .\n    (function setRoomSilent () {\n        (ISADMIN != 1 && BLOCK_TYPE != -1) && window.protocol.ROOM_SILENT_ON({\n            countdown: result.data.BLOCK_TIME,\n            is_newbie: window.IS_NEWBIE\n        });\n    })();\n\n};\n", "/*\n *  Live Room Initialization By LancerComet at 15:50, 2015/12/21.\n *  # Carry Your World #\n *  ---\n *  : .\n */\n\nvar livePopup = require('../../../common/components/live-widget/live-popup/live-popup');\nvar liveToast = require('../../../common/components/live-widget/live-toast/live-toast');\nvar liveQuickLogin = require('../../../common/functions/func-live-quick-login/live-quick-login');\n\nmodule.exports = function (window, result) {\n    \"use strict\";\n\n    for (var i in result.data) {\n        if (result.data.hasOwnProperty(i)) {\n            window[i] = result.data[i];\n        }\n    }\n\n    // Definition: , .\n    window.giftTsHistory = [];\n\n    // Definition: Common.JS , .\n    window.livePopup = livePopup;\n    window.liveToast = liveToast;\n    window.liveQuickLogin = liveQuickLogin;\n\n};", "/*\n *  Live Room User Online Heart at 16:19, 2016/01/21.\n *  ---\n *  \n */\n\nmodule.exports = function () {\n    // \n    if($.cookie(\"DedeUserID\")){\n        setInterval(function () {\n            $.ajax({\n                url: \"/User/userOnlineHeart\",\n                type: \"post\",\n                dataType: \"json\",\n                success: function (result) {\n                    // ...\n                }\n            });\n        }, 300000);\n    }\n};\n\n", "/* Copyright (c) 2015 Hyunje Alex Jun and other contributors\n * Licensed under the MIT License\n */\n'use strict';\n\nmodule.exports = require('./src/js/adaptor/jquery');\n", "/* Copyright (c) 2015 Hyunje Alex Jun and other contributors\n * Licensed under the MIT License\n */\n'use strict';\n\nvar ps = require('../main')\n  , psInstances = require('../plugin/instances');\n\nfunction mountJQuery(jQuery) {\n  jQuery.fn.perfectScrollbar = function (settingOrCommand) {\n    return this.each(function () {\n      if (typeof settingOrCommand === 'object' ||\n          typeof settingOrCommand === 'undefined') {\n        // If it's an object or none, initialize.\n        var settings = settingOrCommand;\n\n        if (!psInstances.get(this)) {\n          ps.initialize(this, settings);\n        }\n      } else {\n        // Unless, it may be a command.\n        var command = settingOrCommand;\n\n        if (command === 'update') {\n          ps.update(this);\n        } else if (command === 'destroy') {\n          ps.destroy(this);\n        }\n      }\n\n      return jQuery(this);\n    });\n  };\n}\n\nif (typeof define === 'function' && define.amd) {\n  // AMD. Register as an anonymous module.\n  define(['jquery'], mountJQuery);\n} else {\n  var jq = window.jQuery ? window.jQuery : window.$;\n  if (typeof jq !== 'undefined') {\n    mountJQuery(jq);\n  }\n}\n\nmodule.exports = mountJQuery;\n", "/* Copyright (c) 2015 Hyunje Alex Jun and other contributors\n * Licensed under the MIT License\n */\n'use strict';\n\nfunction oldAdd(element, className) {\n  var classes = element.className.split(' ');\n  if (classes.indexOf(className) < 0) {\n    classes.push(className);\n  }\n  element.className = classes.join(' ');\n}\n\nfunction oldRemove(element, className) {\n  var classes = element.className.split(' ');\n  var idx = classes.indexOf(className);\n  if (idx >= 0) {\n    classes.splice(idx, 1);\n  }\n  element.className = classes.join(' ');\n}\n\nexports.add = function (element, className) {\n  if (element.classList) {\n    element.classList.add(className);\n  } else {\n    oldAdd(element, className);\n  }\n};\n\nexports.remove = function (element, className) {\n  if (element.classList) {\n    element.classList.remove(className);\n  } else {\n    oldRemove(element, className);\n  }\n};\n\nexports.list = function (element) {\n  if (element.classList) {\n    return Array.prototype.slice.apply(element.classList);\n  } else {\n    return element.className.split(' ');\n  }\n};\n", "/* Copyright (c) 2015 Hyunje Alex Jun and other contributors\n * Licensed under the MIT License\n */\n'use strict';\n\nvar DOM = {};\n\nDOM.e = function (tagName, className) {\n  var element = document.createElement(tagName);\n  element.className = className;\n  return element;\n};\n\nDOM.appendTo = function (child, parent) {\n  parent.appendChild(child);\n  return child;\n};\n\nfunction cssGet(element, styleName) {\n  return window.getComputedStyle(element)[styleName];\n}\n\nfunction cssSet(element, styleName, styleValue) {\n  if (typeof styleValue === 'number') {\n    styleValue = styleValue.toString() + 'px';\n  }\n  element.style[styleName] = styleValue;\n  return element;\n}\n\nfunction cssMultiSet(element, obj) {\n  for (var key in obj) {\n    var val = obj[key];\n    if (typeof val === 'number') {\n      val = val.toString() + 'px';\n    }\n    element.style[key] = val;\n  }\n  return element;\n}\n\nDOM.css = function (element, styleNameOrObject, styleValue) {\n  if (typeof styleNameOrObject === 'object') {\n    // multiple set with object\n    return cssMultiSet(element, styleNameOrObject);\n  } else {\n    if (typeof styleValue === 'undefined') {\n      return cssGet(element, styleNameOrObject);\n    } else {\n      return cssSet(element, styleNameOrObject, styleValue);\n    }\n  }\n};\n\nDOM.matches = function (element, query) {\n  if (typeof element.matches !== 'undefined') {\n    return element.matches(query);\n  } else {\n    if (typeof element.matchesSelector !== 'undefined') {\n      return element.matchesSelector(query);\n    } else if (typeof element.webkitMatchesSelector !== 'undefined') {\n      return element.webkitMatchesSelector(query);\n    } else if (typeof element.mozMatchesSelector !== 'undefined') {\n      return element.mozMatchesSelector(query);\n    } else if (typeof element.msMatchesSelector !== 'undefined') {\n      return element.msMatchesSelector(query);\n    }\n  }\n};\n\nDOM.remove = function (element) {\n  if (typeof element.remove !== 'undefined') {\n    element.remove();\n  } else {\n    if (element.parentNode) {\n      element.parentNode.removeChild(element);\n    }\n  }\n};\n\nDOM.queryChildren = function (element, selector) {\n  return Array.prototype.filter.call(element.childNodes, function (child) {\n    return DOM.matches(child, selector);\n  });\n};\n\nmodule.exports = DOM;\n", "/* Copyright (c) 2015 Hyunje Alex Jun and other contributors\n * Licensed under the MIT License\n */\n'use strict';\n\nvar EventElement = function (element) {\n  this.element = element;\n  this.events = {};\n};\n\nEventElement.prototype.bind = function (eventName, handler) {\n  if (typeof this.events[eventName] === 'undefined') {\n    this.events[eventName] = [];\n  }\n  this.events[eventName].push(handler);\n  this.element.addEventListener(eventName, handler, false);\n};\n\nEventElement.prototype.unbind = function (eventName, handler) {\n  var isHandlerProvided = (typeof handler !== 'undefined');\n  this.events[eventName] = this.events[eventName].filter(function (hdlr) {\n    if (isHandlerProvided && hdlr !== handler) {\n      return true;\n    }\n    this.element.removeEventListener(eventName, hdlr, false);\n    return false;\n  }, this);\n};\n\nEventElement.prototype.unbindAll = function () {\n  for (var name in this.events) {\n    this.unbind(name);\n  }\n};\n\nvar EventManager = function () {\n  this.eventElements = [];\n};\n\nEventManager.prototype.eventElement = function (element) {\n  var ee = this.eventElements.filter(function (eventElement) {\n    return eventElement.element === element;\n  })[0];\n  if (typeof ee === 'undefined') {\n    ee = new EventElement(element);\n    this.eventElements.push(ee);\n  }\n  return ee;\n};\n\nEventManager.prototype.bind = function (element, eventName, handler) {\n  this.eventElement(element).bind(eventName, handler);\n};\n\nEventManager.prototype.unbind = function (element, eventName, handler) {\n  this.eventElement(element).unbind(eventName, handler);\n};\n\nEventManager.prototype.unbindAll = function () {\n  for (var i = 0; i < this.eventElements.length; i++) {\n    this.eventElements[i].unbindAll();\n  }\n};\n\nEventManager.prototype.once = function (element, eventName, handler) {\n  var ee = this.eventElement(element);\n  var onceHandler = function (e) {\n    ee.unbind(eventName, onceHandler);\n    handler(e);\n  };\n  ee.bind(eventName, onceHandler);\n};\n\nmodule.exports = EventManager;\n", "/* Copyright (c) 2015 Hyunje Alex Jun and other contributors\n * Licensed under the MIT License\n */\n'use strict';\n\nmodule.exports = (function () {\n  function s4() {\n    return Math.floor((1 + Math.random()) * 0x10000)\n               .toString(16)\n               .substring(1);\n  }\n  return function () {\n    return s4() + s4() + '-' + s4() + '-' + s4() + '-' +\n           s4() + '-' + s4() + s4() + s4();\n  };\n})();\n", "/* Copyright (c) 2015 Hyunje Alex Jun and other contributors\n * Licensed under the MIT License\n */\n'use strict';\n\nvar cls = require('./class')\n  , d = require('./dom');\n\nexports.toInt = function (x) {\n  return parseInt(x, 10) || 0;\n};\n\nexports.clone = function (obj) {\n  if (obj === null) {\n    return null;\n  } else if (typeof obj === 'object') {\n    var result = {};\n    for (var key in obj) {\n      result[key] = this.clone(obj[key]);\n    }\n    return result;\n  } else {\n    return obj;\n  }\n};\n\nexports.extend = function (original, source) {\n  var result = this.clone(original);\n  for (var key in source) {\n    result[key] = this.clone(source[key]);\n  }\n  return result;\n};\n\nexports.isEditable = function (el) {\n  return d.matches(el, \"input,[contenteditable]\") ||\n         d.matches(el, \"select,[contenteditable]\") ||\n         d.matches(el, \"textarea,[contenteditable]\") ||\n         d.matches(el, \"button,[contenteditable]\");\n};\n\nexports.removePsClasses = function (element) {\n  var clsList = cls.list(element);\n  for (var i = 0; i < clsList.length; i++) {\n    var className = clsList[i];\n    if (className.indexOf('ps-') === 0) {\n      cls.remove(element, className);\n    }\n  }\n};\n\nexports.outerWidth = function (element) {\n  return this.toInt(d.css(element, 'width')) +\n         this.toInt(d.css(element, 'paddingLeft')) +\n         this.toInt(d.css(element, 'paddingRight')) +\n         this.toInt(d.css(element, 'borderLeftWidth')) +\n         this.toInt(d.css(element, 'borderRightWidth'));\n};\n\nexports.startScrolling = function (element, axis) {\n  cls.add(element, 'ps-in-scrolling');\n  if (typeof axis !== 'undefined') {\n    cls.add(element, 'ps-' + axis);\n  } else {\n    cls.add(element, 'ps-x');\n    cls.add(element, 'ps-y');\n  }\n};\n\nexports.stopScrolling = function (element, axis) {\n  cls.remove(element, 'ps-in-scrolling');\n  if (typeof axis !== 'undefined') {\n    cls.remove(element, 'ps-' + axis);\n  } else {\n    cls.remove(element, 'ps-x');\n    cls.remove(element, 'ps-y');\n  }\n};\n\nexports.env = {\n  isWebKit: 'WebkitAppearance' in document.documentElement.style,\n  supportsTouch: (('ontouchstart' in window) || window.DocumentTouch && document instanceof window.DocumentTouch),\n  supportsIePointer: window.navigator.msMaxTouchPoints !== null\n};\n", "/* Copyright (c) 2015 Hyunje Alex Jun and other contributors\n * Licensed under the MIT License\n */\n'use strict';\n\nvar destroy = require('./plugin/destroy')\n  , initialize = require('./plugin/initialize')\n  , update = require('./plugin/update');\n\nmodule.exports = {\n  initialize: initialize,\n  update: update,\n  destroy: destroy\n};\n", "/* Copyright (c) 2015 Hyunje Alex Jun and other contributors\n * Licensed under the MIT License\n */\n'use strict';\n\nmodule.exports = {\n  maxScrollbarLength: null,\n  minScrollbarLength: null,\n  scrollXMarginOffset: 0,\n  scrollYMarginOffset: 0,\n  stopPropagationOnClick: true,\n  suppressScrollX: false,\n  suppressScrollY: false,\n  swipePropagation: true,\n  useBothWheelAxes: false,\n  useKeyboard: true,\n  useSelectionScroll: false,\n  wheelPropagation: false,\n  wheelSpeed: 1\n};\n", "/* Copyright (c) 2015 Hyunje Alex Jun and other contributors\n * Licensed under the MIT License\n */\n'use strict';\n\nvar d = require('../lib/dom')\n  , h = require('../lib/helper')\n  , instances = require('./instances');\n\nmodule.exports = function (element) {\n  var i = instances.get(element);\n\n  if (!i) {\n    return;\n  }\n\n  i.event.unbindAll();\n  d.remove(i.scrollbarX);\n  d.remove(i.scrollbarY);\n  d.remove(i.scrollbarXRail);\n  d.remove(i.scrollbarYRail);\n  h.removePsClasses(element);\n\n  instances.remove(element);\n};\n", "/* Copyright (c) 2015 Hyunje Alex Jun and other contributors\n * Licensed under the MIT License\n */\n'use strict';\n\nvar h = require('../../lib/helper')\n  , instances = require('../instances')\n  , updateGeometry = require('../update-geometry')\n  , updateScroll = require('../update-scroll');\n\nfunction bindClickRailHandler(element, i) {\n  function pageOffset(el) {\n    return el.getBoundingClientRect();\n  }\n  var stopPropagation = window.Event.prototype.stopPropagation.bind;\n\n  if (i.settings.stopPropagationOnClick) {\n    i.event.bind(i.scrollbarY, 'click', stopPropagation);\n  }\n  i.event.bind(i.scrollbarYRail, 'click', function (e) {\n    var halfOfScrollbarLength = h.toInt(i.scrollbarYHeight / 2);\n    var positionTop = i.railYRatio * (e.pageY - window.pageYOffset - pageOffset(i.scrollbarYRail).top - halfOfScrollbarLength);\n    var maxPositionTop = i.railYRatio * (i.railYHeight - i.scrollbarYHeight);\n    var positionRatio = positionTop / maxPositionTop;\n\n    if (positionRatio < 0) {\n      positionRatio = 0;\n    } else if (positionRatio > 1) {\n      positionRatio = 1;\n    }\n\n    updateScroll(element, 'top', (i.contentHeight - i.containerHeight) * positionRatio);\n    updateGeometry(element);\n\n    e.stopPropagation();\n  });\n\n  if (i.settings.stopPropagationOnClick) {\n    i.event.bind(i.scrollbarX, 'click', stopPropagation);\n  }\n  i.event.bind(i.scrollbarXRail, 'click', function (e) {\n    var halfOfScrollbarLength = h.toInt(i.scrollbarXWidth / 2);\n    var positionLeft = i.railXRatio * (e.pageX - window.pageXOffset - pageOffset(i.scrollbarXRail).left - halfOfScrollbarLength);\n    var maxPositionLeft = i.railXRatio * (i.railXWidth - i.scrollbarXWidth);\n    var positionRatio = positionLeft / maxPositionLeft;\n\n    if (positionRatio < 0) {\n      positionRatio = 0;\n    } else if (positionRatio > 1) {\n      positionRatio = 1;\n    }\n\n    updateScroll(element, 'left', ((i.contentWidth - i.containerWidth) * positionRatio) - i.negativeScrollAdjustment);\n    updateGeometry(element);\n\n    e.stopPropagation();\n  });\n}\n\nmodule.exports = function (element) {\n  var i = instances.get(element);\n  bindClickRailHandler(element, i);\n};\n", "/* Copyright (c) 2015 Hyunje Alex Jun and other contributors\n * Licensed under the MIT License\n */\n'use strict';\n\nvar d = require('../../lib/dom')\n  , h = require('../../lib/helper')\n  , instances = require('../instances')\n  , updateGeometry = require('../update-geometry')\n  , updateScroll = require('../update-scroll');\n\nfunction bindMouseScrollXHandler(element, i) {\n  var currentLeft = null;\n  var currentPageX = null;\n\n  function updateScrollLeft(deltaX) {\n    var newLeft = currentLeft + (deltaX * i.railXRatio);\n    var maxLeft = Math.max(0, i.scrollbarXRail.getBoundingClientRect().left) + (i.railXRatio * (i.railXWidth - i.scrollbarXWidth));\n\n    if (newLeft < 0) {\n      i.scrollbarXLeft = 0;\n    } else if (newLeft > maxLeft) {\n      i.scrollbarXLeft = maxLeft;\n    } else {\n      i.scrollbarXLeft = newLeft;\n    }\n\n    var scrollLeft = h.toInt(i.scrollbarXLeft * (i.contentWidth - i.containerWidth) / (i.containerWidth - (i.railXRatio * i.scrollbarXWidth))) - i.negativeScrollAdjustment;\n    updateScroll(element, 'left', scrollLeft);\n  }\n\n  var mouseMoveHandler = function (e) {\n    updateScrollLeft(e.pageX - currentPageX);\n    updateGeometry(element);\n    e.stopPropagation();\n    e.preventDefault();\n  };\n\n  var mouseUpHandler = function () {\n    h.stopScrolling(element, 'x');\n    i.event.unbind(i.ownerDocument, 'mousemove', mouseMoveHandler);\n  };\n\n  i.event.bind(i.scrollbarX, 'mousedown', function (e) {\n    currentPageX = e.pageX;\n    currentLeft = h.toInt(d.css(i.scrollbarX, 'left')) * i.railXRatio;\n    h.startScrolling(element, 'x');\n\n    i.event.bind(i.ownerDocument, 'mousemove', mouseMoveHandler);\n    i.event.once(i.ownerDocument, 'mouseup', mouseUpHandler);\n\n    e.stopPropagation();\n    e.preventDefault();\n  });\n}\n\nfunction bindMouseScrollYHandler(element, i) {\n  var currentTop = null;\n  var currentPageY = null;\n\n  function updateScrollTop(deltaY) {\n    var newTop = currentTop + (deltaY * i.railYRatio);\n    var maxTop = Math.max(0, i.scrollbarYRail.getBoundingClientRect().top) + (i.railYRatio * (i.railYHeight - i.scrollbarYHeight));\n\n    if (newTop < 0) {\n      i.scrollbarYTop = 0;\n    } else if (newTop > maxTop) {\n      i.scrollbarYTop = maxTop;\n    } else {\n      i.scrollbarYTop = newTop;\n    }\n\n    var scrollTop = h.toInt(i.scrollbarYTop * (i.contentHeight - i.containerHeight) / (i.containerHeight - (i.railYRatio * i.scrollbarYHeight)));\n    updateScroll(element, 'top', scrollTop);\n  }\n\n  var mouseMoveHandler = function (e) {\n    updateScrollTop(e.pageY - currentPageY);\n    updateGeometry(element);\n    e.stopPropagation();\n    e.preventDefault();\n  };\n\n  var mouseUpHandler = function () {\n    h.stopScrolling(element, 'y');\n    i.event.unbind(i.ownerDocument, 'mousemove', mouseMoveHandler);\n  };\n\n  i.event.bind(i.scrollbarY, 'mousedown', function (e) {\n    currentPageY = e.pageY;\n    currentTop = h.toInt(d.css(i.scrollbarY, 'top')) * i.railYRatio;\n    h.startScrolling(element, 'y');\n\n    i.event.bind(i.ownerDocument, 'mousemove', mouseMoveHandler);\n    i.event.once(i.ownerDocument, 'mouseup', mouseUpHandler);\n\n    e.stopPropagation();\n    e.preventDefault();\n  });\n}\n\nmodule.exports = function (element) {\n  var i = instances.get(element);\n  bindMouseScrollXHandler(element, i);\n  bindMouseScrollYHandler(element, i);\n};\n", "/* Copyright (c) 2015 Hyunje Alex Jun and other contributors\n * Licensed under the MIT License\n */\n'use strict';\n\nvar h = require('../../lib/helper')\n  , instances = require('../instances')\n  , updateGeometry = require('../update-geometry')\n  , updateScroll = require('../update-scroll');\n\nfunction bindKeyboardHandler(element, i) {\n  var hovered = false;\n  i.event.bind(element, 'mouseenter', function () {\n    hovered = true;\n  });\n  i.event.bind(element, 'mouseleave', function () {\n    hovered = false;\n  });\n\n  var shouldPrevent = false;\n  function shouldPreventDefault(deltaX, deltaY) {\n    var scrollTop = element.scrollTop;\n    if (deltaX === 0) {\n      if (!i.scrollbarYActive) {\n        return false;\n      }\n      if ((scrollTop === 0 && deltaY > 0) || (scrollTop >= i.contentHeight - i.containerHeight && deltaY < 0)) {\n        return !i.settings.wheelPropagation;\n      }\n    }\n\n    var scrollLeft = element.scrollLeft;\n    if (deltaY === 0) {\n      if (!i.scrollbarXActive) {\n        return false;\n      }\n      if ((scrollLeft === 0 && deltaX < 0) || (scrollLeft >= i.contentWidth - i.containerWidth && deltaX > 0)) {\n        return !i.settings.wheelPropagation;\n      }\n    }\n    return true;\n  }\n\n  i.event.bind(i.ownerDocument, 'keydown', function (e) {\n    if (e.isDefaultPrevented && e.isDefaultPrevented()) {\n      return;\n    }\n\n    if (!hovered) {\n      return;\n    }\n\n    var activeElement = document.activeElement ? document.activeElement : i.ownerDocument.activeElement;\n    if (activeElement) {\n      // go deeper if element is a webcomponent\n      while (activeElement.shadowRoot) {\n        activeElement = activeElement.shadowRoot.activeElement;\n      }\n      if (h.isEditable(activeElement)) {\n        return;\n      }\n    }\n\n    var deltaX = 0;\n    var deltaY = 0;\n\n    switch (e.which) {\n    case 37: // left\n      deltaX = -30;\n      break;\n    case 38: // up\n      deltaY = 30;\n      break;\n    case 39: // right\n      deltaX = 30;\n      break;\n    case 40: // down\n      deltaY = -30;\n      break;\n    case 33: // page up\n      deltaY = 90;\n      break;\n    case 32: // space bar\n      if (e.shiftKey) {\n        deltaY = 90;\n      } else {\n        deltaY = -90;\n      }\n      break;\n    case 34: // page down\n      deltaY = -90;\n      break;\n    case 35: // end\n      if (e.ctrlKey) {\n        deltaY = -i.contentHeight;\n      } else {\n        deltaY = -i.containerHeight;\n      }\n      break;\n    case 36: // home\n      if (e.ctrlKey) {\n        deltaY = element.scrollTop;\n      } else {\n        deltaY = i.containerHeight;\n      }\n      break;\n    default:\n      return;\n    }\n\n    updateScroll(element, 'top', element.scrollTop - deltaY);\n    updateScroll(element, 'left', element.scrollLeft + deltaX);\n    updateGeometry(element);\n\n    shouldPrevent = shouldPreventDefault(deltaX, deltaY);\n    if (shouldPrevent) {\n      e.preventDefault();\n    }\n  });\n}\n\nmodule.exports = function (element) {\n  var i = instances.get(element);\n  bindKeyboardHandler(element, i);\n};\n", "/* Copyright (c) 2015 Hyunje Alex Jun and other contributors\n * Licensed under the MIT License\n */\n'use strict';\n\nvar instances = require('../instances')\n  , updateGeometry = require('../update-geometry')\n  , updateScroll = require('../update-scroll');\n\nfunction bindMouseWheelHandler(element, i) {\n  var shouldPrevent = false;\n\n  function shouldPreventDefault(deltaX, deltaY) {\n    var scrollTop = element.scrollTop;\n    if (deltaX === 0) {\n      if (!i.scrollbarYActive) {\n        return false;\n      }\n      if ((scrollTop === 0 && deltaY > 0) || (scrollTop >= i.contentHeight - i.containerHeight && deltaY < 0)) {\n        return !i.settings.wheelPropagation;\n      }\n    }\n\n    var scrollLeft = element.scrollLeft;\n    if (deltaY === 0) {\n      if (!i.scrollbarXActive) {\n        return false;\n      }\n      if ((scrollLeft === 0 && deltaX < 0) || (scrollLeft >= i.contentWidth - i.containerWidth && deltaX > 0)) {\n        return !i.settings.wheelPropagation;\n      }\n    }\n    return true;\n  }\n\n  function getDeltaFromEvent(e) {\n    var deltaX = e.deltaX;\n    var deltaY = -1 * e.deltaY;\n\n    if (typeof deltaX === \"undefined\" || typeof deltaY === \"undefined\") {\n      // OS X Safari\n      deltaX = -1 * e.wheelDeltaX / 6;\n      deltaY = e.wheelDeltaY / 6;\n    }\n\n    if (e.deltaMode && e.deltaMode === 1) {\n      // Firefox in deltaMode 1: Line scrolling\n      deltaX *= 10;\n      deltaY *= 10;\n    }\n\n    if (deltaX !== deltaX && deltaY !== deltaY/* NaN checks */) {\n      // IE in some mouse drivers\n      deltaX = 0;\n      deltaY = e.wheelDelta;\n    }\n\n    return [deltaX, deltaY];\n  }\n\n  function shouldBeConsumedByTextarea(deltaX, deltaY) {\n    var hoveredTextarea = element.querySelector('textarea:hover');\n    if (hoveredTextarea) {\n      var maxScrollTop = hoveredTextarea.scrollHeight - hoveredTextarea.clientHeight;\n      if (maxScrollTop > 0) {\n        if (!(hoveredTextarea.scrollTop === 0 && deltaY > 0) &&\n            !(hoveredTextarea.scrollTop === maxScrollTop && deltaY < 0)) {\n          return true;\n        }\n      }\n      var maxScrollLeft = hoveredTextarea.scrollLeft - hoveredTextarea.clientWidth;\n      if (maxScrollLeft > 0) {\n        if (!(hoveredTextarea.scrollLeft === 0 && deltaX < 0) &&\n            !(hoveredTextarea.scrollLeft === maxScrollLeft && deltaX > 0)) {\n          return true;\n        }\n      }\n    }\n    return false;\n  }\n\n  function mousewheelHandler(e) {\n    var delta = getDeltaFromEvent(e);\n\n    var deltaX = delta[0];\n    var deltaY = delta[1];\n\n    if (shouldBeConsumedByTextarea(deltaX, deltaY)) {\n      return;\n    }\n\n    shouldPrevent = false;\n    if (!i.settings.useBothWheelAxes) {\n      // deltaX will only be used for horizontal scrolling and deltaY will\n      // only be used for vertical scrolling - this is the default\n      updateScroll(element, 'top', element.scrollTop - (deltaY * i.settings.wheelSpeed));\n      updateScroll(element, 'left', element.scrollLeft + (deltaX * i.settings.wheelSpeed));\n    } else if (i.scrollbarYActive && !i.scrollbarXActive) {\n      // only vertical scrollbar is active and useBothWheelAxes option is\n      // active, so let's scroll vertical bar using both mouse wheel axes\n      if (deltaY) {\n        updateScroll(element, 'top', element.scrollTop - (deltaY * i.settings.wheelSpeed));\n      } else {\n        updateScroll(element, 'top', element.scrollTop + (deltaX * i.settings.wheelSpeed));\n      }\n      shouldPrevent = true;\n    } else if (i.scrollbarXActive && !i.scrollbarYActive) {\n      // useBothWheelAxes and only horizontal bar is active, so use both\n      // wheel axes for horizontal bar\n      if (deltaX) {\n        updateScroll(element, 'left', element.scrollLeft + (deltaX * i.settings.wheelSpeed));\n      } else {\n        updateScroll(element, 'left', element.scrollLeft - (deltaY * i.settings.wheelSpeed));\n      }\n      shouldPrevent = true;\n    }\n\n    updateGeometry(element);\n\n    shouldPrevent = (shouldPrevent || shouldPreventDefault(deltaX, deltaY));\n    if (shouldPrevent) {\n      e.stopPropagation();\n      e.preventDefault();\n    }\n  }\n\n  if (typeof window.onwheel !== \"undefined\") {\n    i.event.bind(element, 'wheel', mousewheelHandler);\n  } else if (typeof window.onmousewheel !== \"undefined\") {\n    i.event.bind(element, 'mousewheel', mousewheelHandler);\n  }\n}\n\nmodule.exports = function (element) {\n  var i = instances.get(element);\n  bindMouseWheelHandler(element, i);\n};\n", "/* Copyright (c) 2015 Hyunje Alex Jun and other contributors\n * Licensed under the MIT License\n */\n'use strict';\n\nvar instances = require('../instances')\n  , updateGeometry = require('../update-geometry');\n\nfunction bindNativeScrollHandler(element, i) {\n  i.event.bind(element, 'scroll', function () {\n    updateGeometry(element);\n  });\n}\n\nmodule.exports = function (element) {\n  var i = instances.get(element);\n  bindNativeScrollHandler(element, i);\n};\n", "/* Copyright (c) 2015 Hyunje Alex Jun and other contributors\n * Licensed under the MIT License\n */\n'use strict';\n\nvar h = require('../../lib/helper')\n  , instances = require('../instances')\n  , updateGeometry = require('../update-geometry')\n  , updateScroll = require('../update-scroll');\n\nfunction bindSelectionHandler(element, i) {\n  function getRangeNode() {\n    var selection = window.getSelection ? window.getSelection() :\n                    document.getSelection ? document.getSelection() : '';\n    if (selection.toString().length === 0) {\n      return null;\n    } else {\n      return selection.getRangeAt(0).commonAncestorContainer;\n    }\n  }\n\n  var scrollingLoop = null;\n  var scrollDiff = {top: 0, left: 0};\n  function startScrolling() {\n    if (!scrollingLoop) {\n      scrollingLoop = setInterval(function () {\n        if (!instances.get(element)) {\n          clearInterval(scrollingLoop);\n          return;\n        }\n\n        updateScroll(element, 'top', element.scrollTop + scrollDiff.top);\n        updateScroll(element, 'left', element.scrollLeft + scrollDiff.left);\n        updateGeometry(element);\n      }, 50); // every .1 sec\n    }\n  }\n  function stopScrolling() {\n    if (scrollingLoop) {\n      clearInterval(scrollingLoop);\n      scrollingLoop = null;\n    }\n    h.stopScrolling(element);\n  }\n\n  var isSelected = false;\n  i.event.bind(i.ownerDocument, 'selectionchange', function () {\n    if (element.contains(getRangeNode())) {\n      isSelected = true;\n    } else {\n      isSelected = false;\n      stopScrolling();\n    }\n  });\n  i.event.bind(window, 'mouseup', function () {\n    if (isSelected) {\n      isSelected = false;\n      stopScrolling();\n    }\n  });\n\n  i.event.bind(window, 'mousemove', function (e) {\n    if (isSelected) {\n      var mousePosition = {x: e.pageX, y: e.pageY};\n      var containerGeometry = {\n        left: element.offsetLeft,\n        right: element.offsetLeft + element.offsetWidth,\n        top: element.offsetTop,\n        bottom: element.offsetTop + element.offsetHeight\n      };\n\n      if (mousePosition.x < containerGeometry.left + 3) {\n        scrollDiff.left = -5;\n        h.startScrolling(element, 'x');\n      } else if (mousePosition.x > containerGeometry.right - 3) {\n        scrollDiff.left = 5;\n        h.startScrolling(element, 'x');\n      } else {\n        scrollDiff.left = 0;\n      }\n\n      if (mousePosition.y < containerGeometry.top + 3) {\n        if (containerGeometry.top + 3 - mousePosition.y < 5) {\n          scrollDiff.top = -5;\n        } else {\n          scrollDiff.top = -20;\n        }\n        h.startScrolling(element, 'y');\n      } else if (mousePosition.y > containerGeometry.bottom - 3) {\n        if (mousePosition.y - containerGeometry.bottom + 3 < 5) {\n          scrollDiff.top = 5;\n        } else {\n          scrollDiff.top = 20;\n        }\n        h.startScrolling(element, 'y');\n      } else {\n        scrollDiff.top = 0;\n      }\n\n      if (scrollDiff.top === 0 && scrollDiff.left === 0) {\n        stopScrolling();\n      } else {\n        startScrolling();\n      }\n    }\n  });\n}\n\nmodule.exports = function (element) {\n  var i = instances.get(element);\n  bindSelectionHandler(element, i);\n};\n", "/* Copyright (c) 2015 Hyunje Alex Jun and other contributors\n * Licensed under the MIT License\n */\n'use strict';\n\nvar instances = require('../instances')\n  , updateGeometry = require('../update-geometry')\n  , updateScroll = require('../update-scroll');\n\nfunction bindTouchHandler(element, i, supportsTouch, supportsIePointer) {\n  function shouldPreventDefault(deltaX, deltaY) {\n    var scrollTop = element.scrollTop;\n    var scrollLeft = element.scrollLeft;\n    var magnitudeX = Math.abs(deltaX);\n    var magnitudeY = Math.abs(deltaY);\n\n    if (magnitudeY > magnitudeX) {\n      // user is perhaps trying to swipe up/down the page\n\n      if (((deltaY < 0) && (scrollTop === i.contentHeight - i.containerHeight)) ||\n          ((deltaY > 0) && (scrollTop === 0))) {\n        return !i.settings.swipePropagation;\n      }\n    } else if (magnitudeX > magnitudeY) {\n      // user is perhaps trying to swipe left/right across the page\n\n      if (((deltaX < 0) && (scrollLeft === i.contentWidth - i.containerWidth)) ||\n          ((deltaX > 0) && (scrollLeft === 0))) {\n        return !i.settings.swipePropagation;\n      }\n    }\n\n    return true;\n  }\n\n  function applyTouchMove(differenceX, differenceY) {\n    updateScroll(element, 'top', element.scrollTop - differenceY);\n    updateScroll(element, 'left', element.scrollLeft - differenceX);\n\n    updateGeometry(element);\n  }\n\n  var startOffset = {};\n  var startTime = 0;\n  var speed = {};\n  var easingLoop = null;\n  var inGlobalTouch = false;\n  var inLocalTouch = false;\n\n  function globalTouchStart() {\n    inGlobalTouch = true;\n  }\n  function globalTouchEnd() {\n    inGlobalTouch = false;\n  }\n\n  function getTouch(e) {\n    if (e.targetTouches) {\n      return e.targetTouches[0];\n    } else {\n      // Maybe IE pointer\n      return e;\n    }\n  }\n  function shouldHandle(e) {\n    if (e.targetTouches && e.targetTouches.length === 1) {\n      return true;\n    }\n    if (e.pointerType && e.pointerType !== 'mouse' && e.pointerType !== e.MSPOINTER_TYPE_MOUSE) {\n      return true;\n    }\n    return false;\n  }\n  function touchStart(e) {\n    if (shouldHandle(e)) {\n      inLocalTouch = true;\n\n      var touch = getTouch(e);\n\n      startOffset.pageX = touch.pageX;\n      startOffset.pageY = touch.pageY;\n\n      startTime = (new Date()).getTime();\n\n      if (easingLoop !== null) {\n        clearInterval(easingLoop);\n      }\n\n      e.stopPropagation();\n    }\n  }\n  function touchMove(e) {\n    if (!inGlobalTouch && inLocalTouch && shouldHandle(e)) {\n      var touch = getTouch(e);\n\n      var currentOffset = {pageX: touch.pageX, pageY: touch.pageY};\n\n      var differenceX = currentOffset.pageX - startOffset.pageX;\n      var differenceY = currentOffset.pageY - startOffset.pageY;\n\n      applyTouchMove(differenceX, differenceY);\n      startOffset = currentOffset;\n\n      var currentTime = (new Date()).getTime();\n\n      var timeGap = currentTime - startTime;\n      if (timeGap > 0) {\n        speed.x = differenceX / timeGap;\n        speed.y = differenceY / timeGap;\n        startTime = currentTime;\n      }\n\n      if (shouldPreventDefault(differenceX, differenceY)) {\n        e.stopPropagation();\n        e.preventDefault();\n      }\n    }\n  }\n  function touchEnd() {\n    if (!inGlobalTouch && inLocalTouch) {\n      inLocalTouch = false;\n\n      clearInterval(easingLoop);\n      easingLoop = setInterval(function () {\n        if (!instances.get(element)) {\n          clearInterval(easingLoop);\n          return;\n        }\n\n        if (Math.abs(speed.x) < 0.01 && Math.abs(speed.y) < 0.01) {\n          clearInterval(easingLoop);\n          return;\n        }\n\n        applyTouchMove(speed.x * 30, speed.y * 30);\n\n        speed.x *= 0.8;\n        speed.y *= 0.8;\n      }, 10);\n    }\n  }\n\n  if (supportsTouch) {\n    i.event.bind(window, 'touchstart', globalTouchStart);\n    i.event.bind(window, 'touchend', globalTouchEnd);\n    i.event.bind(element, 'touchstart', touchStart);\n    i.event.bind(element, 'touchmove', touchMove);\n    i.event.bind(element, 'touchend', touchEnd);\n  }\n\n  if (supportsIePointer) {\n    if (window.PointerEvent) {\n      i.event.bind(window, 'pointerdown', globalTouchStart);\n      i.event.bind(window, 'pointerup', globalTouchEnd);\n      i.event.bind(element, 'pointerdown', touchStart);\n      i.event.bind(element, 'pointermove', touchMove);\n      i.event.bind(element, 'pointerup', touchEnd);\n    } else if (window.MSPointerEvent) {\n      i.event.bind(window, 'MSPointerDown', globalTouchStart);\n      i.event.bind(window, 'MSPointerUp', globalTouchEnd);\n      i.event.bind(element, 'MSPointerDown', touchStart);\n      i.event.bind(element, 'MSPointerMove', touchMove);\n      i.event.bind(element, 'MSPointerUp', touchEnd);\n    }\n  }\n}\n\nmodule.exports = function (element, supportsTouch, supportsIePointer) {\n  var i = instances.get(element);\n  bindTouchHandler(element, i, supportsTouch, supportsIePointer);\n};\n", "/* Copyright (c) 2015 Hyunje Alex Jun and other contributors\n * Licensed under the MIT License\n */\n'use strict';\n\nvar cls = require('../lib/class')\n  , h = require('../lib/helper')\n  , instances = require('./instances')\n  , updateGeometry = require('./update-geometry');\n\n// Handlers\nvar clickRailHandler = require('./handler/click-rail')\n  , dragScrollbarHandler = require('./handler/drag-scrollbar')\n  , keyboardHandler = require('./handler/keyboard')\n  , mouseWheelHandler = require('./handler/mouse-wheel')\n  , nativeScrollHandler = require('./handler/native-scroll')\n  , selectionHandler = require('./handler/selection')\n  , touchHandler = require('./handler/touch');\n\nmodule.exports = function (element, userSettings) {\n  userSettings = typeof userSettings === 'object' ? userSettings : {};\n\n  cls.add(element, 'ps-container');\n\n  // Create a plugin instance.\n  var i = instances.add(element);\n\n  i.settings = h.extend(i.settings, userSettings);\n\n  clickRailHandler(element);\n  dragScrollbarHandler(element);\n  mouseWheelHandler(element);\n  nativeScrollHandler(element);\n\n  if (i.settings.useSelectionScroll) {\n    selectionHandler(element);\n  }\n\n  if (h.env.supportsTouch || h.env.supportsIePointer) {\n    touchHandler(element, h.env.supportsTouch, h.env.supportsIePointer);\n  }\n  if (i.settings.useKeyboard) {\n    keyboardHandler(element);\n  }\n\n  updateGeometry(element);\n};\n", "/* Copyright (c) 2015 Hyunje Alex Jun and other contributors\n * Licensed under the MIT License\n */\n'use strict';\n\nvar d = require('../lib/dom')\n  , defaultSettings = require('./default-setting')\n  , EventManager = require('../lib/event-manager')\n  , guid = require('../lib/guid')\n  , h = require('../lib/helper');\n\nvar instances = {};\n\nfunction Instance(element) {\n  var i = this;\n\n  i.settings = h.clone(defaultSettings);\n  i.containerWidth = null;\n  i.containerHeight = null;\n  i.contentWidth = null;\n  i.contentHeight = null;\n\n  i.isRtl = d.css(element, 'direction') === \"rtl\";\n  i.isNegativeScroll = (function () {\n    var originalScrollLeft = element.scrollLeft;\n    var result = null;\n    element.scrollLeft = -1;\n    result = element.scrollLeft < 0;\n    element.scrollLeft = originalScrollLeft;\n    return result;\n  })();\n  i.negativeScrollAdjustment = i.isNegativeScroll ? element.scrollWidth - element.clientWidth : 0;\n  i.event = new EventManager();\n  i.ownerDocument = element.ownerDocument || document;\n\n  i.scrollbarXRail = d.appendTo(d.e('div', 'ps-scrollbar-x-rail'), element);\n  i.scrollbarX = d.appendTo(d.e('div', 'ps-scrollbar-x'), i.scrollbarXRail);\n  i.scrollbarX.setAttribute('tabindex', 0);\n  i.scrollbarXActive = null;\n  i.scrollbarXWidth = null;\n  i.scrollbarXLeft = null;\n  i.scrollbarXBottom = h.toInt(d.css(i.scrollbarXRail, 'bottom'));\n  i.isScrollbarXUsingBottom = i.scrollbarXBottom === i.scrollbarXBottom; // !isNaN\n  i.scrollbarXTop = i.isScrollbarXUsingBottom ? null : h.toInt(d.css(i.scrollbarXRail, 'top'));\n  i.railBorderXWidth = h.toInt(d.css(i.scrollbarXRail, 'borderLeftWidth')) + h.toInt(d.css(i.scrollbarXRail, 'borderRightWidth'));\n  // Set rail to display:block to calculate margins\n  d.css(i.scrollbarXRail, 'display', 'block');\n  i.railXMarginWidth = h.toInt(d.css(i.scrollbarXRail, 'marginLeft')) + h.toInt(d.css(i.scrollbarXRail, 'marginRight'));\n  d.css(i.scrollbarXRail, 'display', '');\n  i.railXWidth = null;\n  i.railXRatio = null;\n\n  i.scrollbarYRail = d.appendTo(d.e('div', 'ps-scrollbar-y-rail'), element);\n  i.scrollbarY = d.appendTo(d.e('div', 'ps-scrollbar-y'), i.scrollbarYRail);\n  i.scrollbarY.setAttribute('tabindex', 0);\n  i.scrollbarYActive = null;\n  i.scrollbarYHeight = null;\n  i.scrollbarYTop = null;\n  i.scrollbarYRight = h.toInt(d.css(i.scrollbarYRail, 'right'));\n  i.isScrollbarYUsingRight = i.scrollbarYRight === i.scrollbarYRight; // !isNaN\n  i.scrollbarYLeft = i.isScrollbarYUsingRight ? null : h.toInt(d.css(i.scrollbarYRail, 'left'));\n  i.scrollbarYOuterWidth = i.isRtl ? h.outerWidth(i.scrollbarY) : null;\n  i.railBorderYWidth = h.toInt(d.css(i.scrollbarYRail, 'borderTopWidth')) + h.toInt(d.css(i.scrollbarYRail, 'borderBottomWidth'));\n  d.css(i.scrollbarYRail, 'display', 'block');\n  i.railYMarginHeight = h.toInt(d.css(i.scrollbarYRail, 'marginTop')) + h.toInt(d.css(i.scrollbarYRail, 'marginBottom'));\n  d.css(i.scrollbarYRail, 'display', '');\n  i.railYHeight = null;\n  i.railYRatio = null;\n}\n\nfunction getId(element) {\n  if (typeof element.dataset === 'undefined') {\n    return element.getAttribute('data-ps-id');\n  } else {\n    return element.dataset.psId;\n  }\n}\n\nfunction setId(element, id) {\n  if (typeof element.dataset === 'undefined') {\n    element.setAttribute('data-ps-id', id);\n  } else {\n    element.dataset.psId = id;\n  }\n}\n\nfunction removeId(element) {\n  if (typeof element.dataset === 'undefined') {\n    element.removeAttribute('data-ps-id');\n  } else {\n    delete element.dataset.psId;\n  }\n}\n\nexports.add = function (element) {\n  var newId = guid();\n  setId(element, newId);\n  instances[newId] = new Instance(element);\n  return instances[newId];\n};\n\nexports.remove = function (element) {\n  delete instances[getId(element)];\n  removeId(element);\n};\n\nexports.get = function (element) {\n  return instances[getId(element)];\n};\n", "/* Copyright (c) 2015 Hyunje Alex Jun and other contributors\n * Licensed under the MIT License\n */\n'use strict';\n\nvar cls = require('../lib/class')\n  , d = require('../lib/dom')\n  , h = require('../lib/helper')\n  , instances = require('./instances')\n  , updateScroll = require('./update-scroll');\n\nfunction getThumbSize(i, thumbSize) {\n  if (i.settings.minScrollbarLength) {\n    thumbSize = Math.max(thumbSize, i.settings.minScrollbarLength);\n  }\n  if (i.settings.maxScrollbarLength) {\n    thumbSize = Math.min(thumbSize, i.settings.maxScrollbarLength);\n  }\n  return thumbSize;\n}\n\nfunction updateCss(element, i) {\n  var xRailOffset = {width: i.railXWidth};\n  if (i.isRtl) {\n    xRailOffset.left = i.negativeScrollAdjustment + element.scrollLeft + i.containerWidth - i.contentWidth;\n  } else {\n    xRailOffset.left = element.scrollLeft;\n  }\n  if (i.isScrollbarXUsingBottom) {\n    xRailOffset.bottom = i.scrollbarXBottom - element.scrollTop;\n  } else {\n    xRailOffset.top = i.scrollbarXTop + element.scrollTop;\n  }\n  d.css(i.scrollbarXRail, xRailOffset);\n\n  var yRailOffset = {top: element.scrollTop, height: i.railYHeight};\n  if (i.isScrollbarYUsingRight) {\n    if (i.isRtl) {\n      yRailOffset.right = i.contentWidth - (i.negativeScrollAdjustment + element.scrollLeft) - i.scrollbarYRight - i.scrollbarYOuterWidth;\n    } else {\n      yRailOffset.right = i.scrollbarYRight - element.scrollLeft;\n    }\n  } else {\n    if (i.isRtl) {\n      yRailOffset.left = i.negativeScrollAdjustment + element.scrollLeft + i.containerWidth * 2 - i.contentWidth - i.scrollbarYLeft - i.scrollbarYOuterWidth;\n    } else {\n      yRailOffset.left = i.scrollbarYLeft + element.scrollLeft;\n    }\n  }\n  d.css(i.scrollbarYRail, yRailOffset);\n\n  d.css(i.scrollbarX, {left: i.scrollbarXLeft, width: i.scrollbarXWidth - i.railBorderXWidth});\n  d.css(i.scrollbarY, {top: i.scrollbarYTop, height: i.scrollbarYHeight - i.railBorderYWidth});\n}\n\nmodule.exports = function (element) {\n  var i = instances.get(element);\n\n  i.containerWidth = element.clientWidth;\n  i.containerHeight = element.clientHeight;\n  i.contentWidth = element.scrollWidth;\n  i.contentHeight = element.scrollHeight;\n\n  var existingRails;\n  if (!element.contains(i.scrollbarXRail)) {\n    existingRails = d.queryChildren(element, '.ps-scrollbar-x-rail');\n    if (existingRails.length > 0) {\n      existingRails.forEach(function (rail) {\n        d.remove(rail);\n      });\n    }\n    d.appendTo(i.scrollbarXRail, element);\n  }\n  if (!element.contains(i.scrollbarYRail)) {\n    existingRails = d.queryChildren(element, '.ps-scrollbar-y-rail');\n    if (existingRails.length > 0) {\n      existingRails.forEach(function (rail) {\n        d.remove(rail);\n      });\n    }\n    d.appendTo(i.scrollbarYRail, element);\n  }\n\n  if (!i.settings.suppressScrollX && i.containerWidth + i.settings.scrollXMarginOffset < i.contentWidth) {\n    i.scrollbarXActive = true;\n    i.railXWidth = i.containerWidth - i.railXMarginWidth;\n    i.railXRatio = i.containerWidth / i.railXWidth;\n    i.scrollbarXWidth = getThumbSize(i, h.toInt(i.railXWidth * i.containerWidth / i.contentWidth));\n    i.scrollbarXLeft = h.toInt((i.negativeScrollAdjustment + element.scrollLeft) * (i.railXWidth - i.scrollbarXWidth) / (i.contentWidth - i.containerWidth));\n  } else {\n    i.scrollbarXActive = false;\n  }\n\n  if (!i.settings.suppressScrollY && i.containerHeight + i.settings.scrollYMarginOffset < i.contentHeight) {\n    i.scrollbarYActive = true;\n    i.railYHeight = i.containerHeight - i.railYMarginHeight;\n    i.railYRatio = i.containerHeight / i.railYHeight;\n    i.scrollbarYHeight = getThumbSize(i, h.toInt(i.railYHeight * i.containerHeight / i.contentHeight));\n    i.scrollbarYTop = h.toInt(element.scrollTop * (i.railYHeight - i.scrollbarYHeight) / (i.contentHeight - i.containerHeight));\n  } else {\n    i.scrollbarYActive = false;\n  }\n\n  if (i.scrollbarXLeft >= i.railXWidth - i.scrollbarXWidth) {\n    i.scrollbarXLeft = i.railXWidth - i.scrollbarXWidth;\n  }\n  if (i.scrollbarYTop >= i.railYHeight - i.scrollbarYHeight) {\n    i.scrollbarYTop = i.railYHeight - i.scrollbarYHeight;\n  }\n\n  updateCss(element, i);\n\n  if (i.scrollbarXActive) {\n    cls.add(element, 'ps-active-x');\n  } else {\n    cls.remove(element, 'ps-active-x');\n    i.scrollbarXWidth = 0;\n    i.scrollbarXLeft = 0;\n    updateScroll(element, 'left', 0);\n  }\n  if (i.scrollbarYActive) {\n    cls.add(element, 'ps-active-y');\n  } else {\n    cls.remove(element, 'ps-active-y');\n    i.scrollbarYHeight = 0;\n    i.scrollbarYTop = 0;\n    updateScroll(element, 'top', 0);\n  }\n};\n", "/* Copyright (c) 2015 Hyunje Alex Jun and other contributors\n * Licensed under the MIT License\n */\n'use strict';\n\nvar instances = require('./instances');\n\nvar upEvent = document.createEvent('Event')\n  , downEvent = document.createEvent('Event')\n  , leftEvent = document.createEvent('Event')\n  , rightEvent = document.createEvent('Event')\n  , yEvent = document.createEvent('Event')\n  , xEvent = document.createEvent('Event')\n  , xStartEvent = document.createEvent('Event')\n  , xEndEvent = document.createEvent('Event')\n  , yStartEvent = document.createEvent('Event')\n  , yEndEvent = document.createEvent('Event')\n  , lastTop\n  , lastLeft;\n\nupEvent.initEvent('ps-scroll-up', true, true);\ndownEvent.initEvent('ps-scroll-down', true, true);\nleftEvent.initEvent('ps-scroll-left', true, true);\nrightEvent.initEvent('ps-scroll-right', true, true);\nyEvent.initEvent('ps-scroll-y', true, true);\nxEvent.initEvent('ps-scroll-x', true, true);\nxStartEvent.initEvent('ps-x-reach-start', true, true);\nxEndEvent.initEvent('ps-x-reach-end', true, true);\nyStartEvent.initEvent('ps-y-reach-start', true, true);\nyEndEvent.initEvent('ps-y-reach-end', true, true);\n\nmodule.exports = function (element, axis, value) {\n  if (typeof element === 'undefined') {\n    throw 'You must provide an element to the update-scroll function';\n  }\n\n  if (typeof axis === 'undefined') {\n    throw 'You must provide an axis to the update-scroll function';\n  }\n\n  if (typeof value === 'undefined') {\n    throw 'You must provide a value to the update-scroll function';\n  }\n\n  if (axis === 'top' && value <= 0) {\n    element.scrollTop = 0;\n    element.dispatchEvent(yStartEvent);\n    return; // don't allow negative scroll\n  }\n\n  if (axis === 'left' && value <= 0) {\n    element.scrollLeft = 0;\n    element.dispatchEvent(xStartEvent);\n    return; // don't allow negative scroll\n  }\n\n  var i = instances.get(element);\n\n  if (axis === 'top' && value >= i.contentHeight - i.containerHeight) {\n    element.scrollTop = i.contentHeight - i.containerHeight;\n    element.dispatchEvent(yEndEvent);\n    return; // don't allow scroll past container\n  }\n\n  if (axis === 'left' && value >= i.contentWidth - i.containerWidth) {\n    element.scrollLeft = i.contentWidth - i.containerWidth;\n    element.dispatchEvent(xEndEvent);\n    return; // don't allow scroll past container\n  }\n\n  if (!lastTop) {\n    lastTop = element.scrollTop;\n  }\n\n  if (!lastLeft) {\n    lastLeft = element.scrollLeft;\n  }\n\n  if (axis === 'top' && value < lastTop) {\n    element.dispatchEvent(upEvent);\n  }\n\n  if (axis === 'top' && value > lastTop) {\n    element.dispatchEvent(downEvent);\n  }\n\n  if (axis === 'left' && value < lastLeft) {\n    element.dispatchEvent(leftEvent);\n  }\n\n  if (axis === 'left' && value > lastLeft) {\n    element.dispatchEvent(rightEvent);\n  }\n\n  if (axis === 'top') {\n    element.scrollTop = lastTop = value;\n    element.dispatchEvent(yEvent);\n  }\n\n  if (axis === 'left') {\n    element.scrollLeft = lastLeft = value;\n    element.dispatchEvent(xEvent);\n  }\n\n};\n", "/* Copyright (c) 2015 Hyunje Alex Jun and other contributors\n * Licensed under the MIT License\n */\n'use strict';\n\nvar d = require('../lib/dom')\n  , h = require('../lib/helper')\n  , instances = require('./instances')\n  , updateGeometry = require('./update-geometry')\n  , updateScroll = require('./update-scroll');\n\nmodule.exports = function (element) {\n  var i = instances.get(element);\n\n  if (!i) {\n    return;\n  }\n\n  // Recalcuate negative scrollLeft adjustment\n  i.negativeScrollAdjustment = i.isNegativeScroll ? element.scrollWidth - element.clientWidth : 0;\n\n  // Recalculate rail margins\n  d.css(i.scrollbarXRail, 'display', 'block');\n  d.css(i.scrollbarYRail, 'display', 'block');\n  i.railXMarginWidth = h.toInt(d.css(i.scrollbarXRail, 'marginLeft')) + h.toInt(d.css(i.scrollbarXRail, 'marginRight'));\n  i.railYMarginHeight = h.toInt(d.css(i.scrollbarYRail, 'marginTop')) + h.toInt(d.css(i.scrollbarYRail, 'marginBottom'));\n\n  // Hide scrollbars not to affect scrollWidth and scrollHeight\n  d.css(i.scrollbarXRail, 'display', 'none');\n  d.css(i.scrollbarYRail, 'display', 'none');\n\n  updateGeometry(element);\n\n  // Update top/left scroll to trigger events\n  updateScroll(element, 'top', element.scrollTop);\n  updateScroll(element, 'left', element.scrollLeft);\n\n  d.css(i.scrollbarXRail, 'display', '');\n  d.css(i.scrollbarYRail, 'display', '');\n};\n"]
}